MCO: 11029		Name: TARL		Date:  3-Nov-83:15:55:28


[Symptom]
New: Move the ac set around. Re-organize their order to
approximate the tops-20 order, so that we can port tops20
monitor code more easily. In doing this, we formalize the
existance of seperate sets of AC names. These sets are:
TOPS10, DECNET, and TOPS20. Their orders are:

Number	TOPS10	TOPS20	DECnet

0	S	F	FREE0
1	P	P	P
2	T1	T1	T1
3	T2	T2	T2
4	T3	T3	T3
5	T4	T4	T4
6	W	Q1	T5
7	M	Q2	T6
10	U	Q3	FREE1
11	P1	P1	P1
12	P2	P2	P2
13	P3	P3	FREE2
14	P4	P4	MS
15	J	P5	MB
16	F	P6(.FP)	(.FP)
17	R	CX	CX

The "TOPS20" acs aren't truly congruent to the TOPS20 set, since TOPS20 has
P being AC 17. Unfortunatley, there is too much fragile code which depends on
P being AC 1 in tops10.

The method of invoking these sets of ACs is via macro. Searching S will by
default invoke the TOPS10 set, changing to one of the other sets is done
by calling the T20SYM or D36SYM macro. Switching back to tops10 is done via
the T10SYM macro.

Beware: Any RTTRP or SNUP programs will have to be rewritten. Failing to do
so will cause you monitor to live short amounts of time.

[Diagnosis]


[Cure]

[Keywords]
ACs
T20SYM
T10SYM
D36SYM
TOPS20

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		S	T10SYM,T20SYM,D36SYM


[End of MCO 11029]
MCO: 11030		Name: JMF		Date:  3-Nov-83:17:31:55


[Symptom]
Interlocks can tie up memory long enough doing read-modify-write
instructions to cause DMA NXMs whenmultiple CPUs and I/O devices are
contending for the memory.

[Diagnosis]
AOSE FOO
JRST .-1
doesn't give other devices, CPUs a chance to get at memory.

[Cure]
Don't try to get an interlock unless its potentially available. I.e.,
the intelock code becomes
SKIPGE FOO
AOSEE FOO
JRST .-2

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	S
		COMMON
		COMNET
		CLOCK1
		CPNSER
		FILIO


[End of MCO 11030]
MCO: 11032		Name: JMF		Date:  7-Nov-83:09:09:28


[Symptom]
Running out of address space again.

[Diagnosis]

[Cure]
Cause SCNSER/NETSER/NETDEV/PTYSER/D??INT to work in section 1.
Move LDBs and TTY chunks to section 4. COMGO and COMRET will execute
in section 1 but the commands will be dispatched to in section 0.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	SCNSER
		TTDINT
		SCNSER
		TTDINT
		D8SINT
		D85INT
		D6SINT
		COMNET
		COMDEV
		COMMON
		SYSINI
		D6DINT
		NETSER
		NETDEV
		PTYSER
		UUOCON
		MSGSER


[End of MCO 11032]
MCO: 11033		Name: JMF		Date:  7-Nov-83:09:19:15


[Symptom]
New: Add a bit to the UUO dispatch tables UU.SE1 which causes
UUO dispatching to happen in section 1. UUOs which currently turn this
bit on are JOBSTS, ATTACH, TRMOP., TRMNO., DNET., NTMAN., NSP., GTXTN.,
GTNTN., TTCALL, DDTIN, DDTOUT.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	UUOCON	DISP2A


[End of MCO 11033]
MCO: 11039		Name: DF		Date: 14-Nov-83:13:53:18


[Symptom]
ANF LINE BLOCKS ARE USUALLY BIGGER THAN NECESSARY.

[Diagnosis]
WRONG CONDITIONAL ASSEMBLY FOR ASYNCHRONOUS DDCMP LINES
INCLUDES AN EXTRA WORD.

[Cure]
ASSEMBLE WORD LB.LCB ON THE CORRECT CONDITIONS.

[Keywords]
LB.LCB
LINE BLOCK

[Related MCOs]
None

[Related SPRs]
32522

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		DNCNFG	CTYNO

702A		DNLBLK	LBLIM

703	


[End of MCO 11039]
MCO: 11041		Name: TD/SMW		Date: 16-Nov-83:15:26:27


[Symptom]
     It's always been hard coded in the monitor  that  there
are  8  disk drives per kontroller.  The HSC50, however, can
have up to 24 drives.

[Diagnosis]
     Yes

[Cure]
     New:   Change  it  so  that  there  are  N  drives  per
kontroller,  where  N  can  be  different  for  each type of
kontroller.

[Keywords]
CI
HSC50
KONTAB

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		RNXKON
		AUTCON
		FILIO
		COMMOD
		MONGEN
		FILFND
		RHXKON
		RPXKON
		UUOSYM
		CPNSER
		FILUUO
		MONBTS
		SYSINI
		UUOCON
		VMSER


[End of MCO 11041]
MCO: 11042		Name: SMW		Date: 16-Nov-83:16:08:53


[Symptom]
     RP20'S can have 16 drives  per  kontroller,  but  we've
only supported 8.

[Diagnosis]
     The way we used to build a monitor for 16 drives was to
build  two  KDB's  (with  8  drives  each).  Besides being a
kludge,  this  results   in   a   serious   degradation   in
performance.
1).  RP20's can't do a position command on  one  drive  when
there is a transfer in progress on another drive.  If you're
smart, you start all the position commands before starting a
transfer.  We run into trouble if we start a transfer on RNA
and then try to start a position on RNB  (despite  the  fact
that  there  are  two  KDB's, these are both really the same
kontroller).  It's impossible to start the position  on  RNB
at  this  time.  RNXKON lies to FILIO and tells him that the
position command is already done.  Later,  an  implied  seek
will  be  done.   An  implied  seek  ties up the channel for
inordinate lengths of time.  On a heavily loaded  system  it
was found that 1/3 of all transfers did implied seeks.
2).  Swapping and queued protocol isn't as fast as it  might
be.   We  try to decide which CPU to do the request on based
on which kontroller is idle.  The fact that  there  are  two
KDB's  for  the  same  kontroller  makes  it  very  hard  to
accurately determine if the kontroller is really busy.   The
existing code doesn't even try to get this case right.

[Cure]
     Make RP20's have all 16 drives on a single KDB.

[Keywords]
RP20

[Related MCOs]
11041

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		RNXKON
		FILIO
		COMMOD
		MONGEN
		AUTCON


[End of MCO 11042]
MCO: 11043		Name: SMW		Date: 16-Nov-83:16:31:53


[Symptom]
     Stopcode  KCP  if  MCO  11042  is  installed,  needless
implied seeks if MCO 11042 is not installed.

[Diagnosis]
     When a drive finishes a command, it normally takes  the
next  request  from  the queue.  Due to the status of cache,
however, certain requests can only be done on a certain  CPU
(despite  the fact that both CPU's are ported to the drive).
We queue a clock request to come back on the other  CPU  and
start  the command over there.  By the time the clock ticks,
it is not necessarily true that the kontroller will still be
idle.   We cannot start a position command on an RP20 if the
kontroller is busy.

[Cure]
     When the clock ticks, check if the kontroller is  busy.
If  so,  set the unit to position wait and dismiss the clock
request without starting anything.  Later, when the  current
transfer  completes,  FILIO will automatically take the next
request from the queue.

[Keywords]
IMPLIED SEEK
RP20
KCP

[Related MCOs]
11042

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		FILIO	SETI10


[End of MCO 11043]
MCO: 11045		Name: JMF		Date: 17-Nov-83:05:04:29


[Symptom]
Too many monitor listing binders. Also, hard to do a mechanistic
edit to all ANF device service routines.

[Diagnosis]
TSKSER and RDXSER are seperate modules when they really should
be included in NETDEV.

[Cure]
Move TSKSER and RDXSER to NETDEV. Also, make NETDEV be a real module
in NETDEV which contains only the copyright statement and the edit history.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	NETDEV
		TSKSER
		RDXSER


[End of MCO 11045]
MCO: 11046		Name: DF		Date: 17-Nov-83:13:38:05


[Symptom]
USELESS SYMBOL IN ANF MACROS .NXTDH AND .NXTDZ.

[Diagnosis]
PROBABLY A TYPO

[Cure]
MAKE THE SYMBOL MEANINGFUL.

[Keywords]
 .NXTDH
 .NXTDZ
DNXXXX

[Related MCOs]
None

[Related SPRs]
33503

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		MACROS	NCLLOG
703	


[End of MCO 11046]
MCO: 11047		Name: DF		Date: 17-Nov-83:14:08:53


[Symptom]
UNDEFINED MACRO IN ANF CODE.

[Diagnosis]
IF DFNAME IS UNDEFINED, THE CODE CALLS AN UNDEFINED MACRO
TO GENERATE THE STATION NAME.

[Cure]
CALL THE CORRECT MACRO.

[Keywords]
OURSNM
OURNNM

[Related MCOs]
None

[Related SPRs]
33502

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		DNNCL	OURSCB
703	


[End of MCO 11047]
MCO: 11048		Name: DF		Date: 17-Nov-83:14:31:10


[Symptom]
MESSAGE COUNT INCORRECT IN ANF CODE WITH DGUTS SET.

[Diagnosis]
AN OUTPUT LINE IS SELECTED FOR A MESSAGE AND THE MESSAGE COUNT
IS INCREMENTED. AFTER CALCULATING BCC, IF THE ERROR RETURN IS TAKEN, THE
MESSAGE IS TOSSED. THIS IS FINE EXCEPT THAT IT FORGETS TO DECREMENT THE COUNT.

[Cure]
DECREMENT THE COUNT.

[Keywords]
LB.HSN
DGUTS

[Related MCOs]
None

[Related SPRs]
33111

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702B		DNDCMP	DDCQRQ
703	


[End of MCO 11048]
MCO: 11050		Name: JMF		Date: 20-Nov-83:05:01:19


[Symptom]
Hard to read the listings.

[Diagnosis]
Too many feature test switches many of which if they were turned
off would cause the monitor not to have a prayer of running.

[Cure]
Remove obsolete switches. The following were removed leaving the code
turned on: FTWATCH, FTDAEMON, FTVERSION, FTEL, FTDBAD, FTDQTA, FTDSST, FTDALC,
FTDMRB, FTDRDR, FTDBBK, FTGSRC, FTCCIN, FTMODM, FTTVP,  FTDAIL, FTTPAG,
FTTBLK, FTNUL, FTMONL, FTMOFF, FTDSIM, FTDHIA, FTEXE, FTKLP.
The following were removed and the code under them was removed as well: FTMETR,
FTRTC, FTHDPX, FTGPO2, FT630H, FTSCLC, FT2741, FTKI10, FTOSAV, FTDOTD.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	ALL


[End of MCO 11050]
MCO: 11051		Name: DPM		Date: 21-Nov-83:08:08:59


[Symptom]
Inaccurate tape labeler termination codes returned to users.

[Diagnosis]
Too many error conditions treated as volume label error or
write locked tape error.

[Cure]
Add 3 new termination codes to indicate volume protection failure
(IOVPF%), file protection failure (IOFPF%), and attempt to overwrite an
unexpired file (IOUEF%).

[Keywords]
LABELS
TAPES
TERMINATION

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	S	IOVPF%,IOFPF%,IOUEF%
		TAPUUO	LBLETB
		UUOSYM	IOVPF%,IOFPF%,IOUEF%

702A	

701B	


[End of MCO 11051]
MCO: 11056		Name: RDH		Date:  7-Dec-83:17:35:24


[Symptom]

ANF network crashes (esp running NFT).

[Diagnosis]

Mismatched MSGMAX values - the -10 defaults to 512, but the -11 still
defaults to 450 - the -11 loses.

[Cure]

Change MSGMAX default to 512 in the -11 code too.

[Keywords]
MSGMAX
ANF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702	172	DNCNFG

703		DNCNFG


[End of MCO 11056]
MCO: 11058		Name: DPM		Date: 12-Dec-83:03:26:52


[Symptom]
LOGNUM off the number of login failures.

[Diagnosis]
ACCLG. UUO behaves as if the logging-in job is running on the CTY, OPR,
or a subjob of an operator job.  Processing login failures for operator
jobs just happens to work by accident.  User login failures cause LOGNUM
to be decremented twice, once in ACCLOG and once in CLRLOG.  This is due
the fact that LOGIN uses the ACCLG. UUO incorrectly.  LOGIN doesn't get
the LOGNUM interlock for operator jobs, which is OK, but it always tries
to clear the interlock.  For user jobs, ACCLOG doesn't set the LOGNUM
interlock bit appropriately, causing CLRLOG to decrement LOGNUM one too
many times.

[Cure]
Crock up ACCLOG some more.  This isn't a particularly good thing to do,
but at this late a stage in field test, it's the safest way to fix the
problem.  The real solution is to re-think the LOGNUM/BATNUM problem
again, throw out the ACCLG. UUO, and start over with some cooperation
from LOGIN.  Next release.

[Keywords]
LOGNUM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	110	UUOCON	ACLDCR

702	172

701B	


[End of MCO 11058]
MCO: 11061		Name: TARL		Date: 15-Dec-83:05:05:23


[Symptom]
?address check from QUEUE. UUO

[Diagnosis]
Bad address supplied, TRNGE decides it is bad, and then
gives an address check. This is wrong, because QUEUE. has an error
return for address check.

[Cure]
Crock it. Add code to CHKIC to check the block manually, instead
of calling TRNGE.

[Keywords]
queue.

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		IPCSER	CHKIC


[End of MCO 11061]
MCO: 11064		Name: DPM		Date: 20-Dec-83:02:22:47


[Symptom]
If a program using the QUEUE. UUO requests a response by setting
QF.RSP but specifies a zero length response buffer, IPCSER writes
one word in user memory.

[Diagnosis]
No checks for a zero length buffer.

[Cure]
Check.

[Keywords]
QUEUE.
RESPONSE

[Related MCOs]
None

[Related SPRs]
34326

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	110	IPCSER	GLXI10

702A	

701B	


[End of MCO 11064]
MCO: 11067		Name: SMW		Date: 27-Dec-83:01:23:58


[Symptom]
     Cache  bug:   Files  written  with  big   buffers   are
corrupted.   Problem is most likely to occur on a file which
is highly fragmented.

[Diagnosis]
     We take the number of buffers which have been swept and
multiply   by   the  number  of  blocks  per  buffer.   This
theoretically gives us the number of blocks which have  been
swept  (i.e.   the number of blocks we will transfer).  This
value is too high, however, if some  portion  of  the  first
buffer  has already been transferred.  FILIO therefore thinks
that it's ok to transfer some portion of another buffer (one
that hasn't been swept yet).

[Cure]
     Don't  count  the  blocks  that   have   already   been
transferred.

[Keywords]
CACHE
BIG BUFFER

[Related MCOs]
None

[Related SPRs]
125319

[MCO status]
Checked

[MCO attributes]
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702		FILIO	SETLS1
703	


[End of MCO 11067]
MCO: 11070		Name: RDH		Date: 29-Dec-83:05:26:01


[Symptom]

DN8x dies if a DMC/R dies

[Diagnosis]

No code

[Cure]

If a DMC/R is determined to be bad ("Master Clear" doesn't clear within a
reasonable amount of time after being set), just set the DMC-is-kroaked flag
and ignore the DMC/R, rather than HALTing.

[Keywords]
DN8X
DMC
TRAP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Field service attention
HOSS attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702	173	DNCDMC	DMCHLT,DMCRST

703	273	DNCDMC	DMCHLT,DMCRST


[End of MCO 11070]
MCO: 11071		Name: SMW		Date: 29-Dec-83:17:59:00


[Symptom]
The RENAME UUO allows the user to change .RBVER, .RBSPL,
and .RBNCA of his UFD, but only if he changes the protection as well.
He can always do a second RENAME to change the protection back.
But why should he be required to do so?

[Diagnosis]
Ordinarily, the only operation an unprived job can do to
a UFD is to read it as a file. There is, however, an exception: the
owner is allowed to change the protection. The RENAME UUO then assumes
that if it's ok to change the protection, it must be ok to change
any of the other attributes as well. It is not legal, however, to
change any of the attributes unless the protection is changed as well.

[Cure]
Lie to CHKPRV, tell him we're changing the protection
when actually we're changing the attributes. Only lie if the
extension is UFD.

[Keywords]
UFD
change protection

[Related MCOs]
None

[Related SPRs]
125703

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		FILUUO	RENA11


[End of MCO 11071]
MCO: 11072		Name: TARL		Date:  2-Jan-84:08:33:18


[Symptom]
MCO 11062 is unclean.

[Diagnosis]
That MCO stashes the SPT at die time, so that in looking at crashes
we have to look for the SPT in a different place than we would look
in a running monitor.

[Cure]
Sine problem is that REBOOT clobbers .CPSPT by calling SYSTR0,
have SYSTR0+ save the current value of the SPT, and REBOOT will restore
it. This also avoids some of the sticky issues which would arise if we
ever get a real full sized SPT.

[Keywords]
DIE
REBOOT
 .CPSPT
SYSTR0

[Related MCOs]
11062

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702	173	COMMON	REBOOT
703	


[End of MCO 11072]
MCO: 11073		Name: TARL		Date:  4-Jan-84:06:36:00


[Symptom]
When merging PFH or GETSEG'ing a hiseg, we can page out the .JBINT
block.

[Diagnosis]
Comparing address against page number

[Cure]
Compare page against page. While we're at it, make sure we check the
end of the JBINT block as well as the beginning to allow it to cross
page boundaries.

[Keywords]
 .JBINT
JOBINYT
PAGOUT
Ill mem ref

[Related MCOs]
None

[Related SPRs]
24422

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		COMCON	PAGOUT
702A	
701B	


[End of MCO 11073]
MCO: 11075		Name: JMF		Date:  6-Jan-84:04:57:19


[Symptom]
Kind of a crock having a 1 word SPT.

[Diagnosis]

[Cure]
Make JBTUPM be a real SPT (only for the low segment for the time
being). The SPT slot's which map funny space are JBTUPM-CPU#. Thus the
SPT actually starts at JBTUPM-CPUN, and .CPSPT points at the slot to
be used by that CPU to map funny space. A context switch now becomes
	MOVEM	@.CPSPT
	DATAO	PAG,xxx
rather than
	MOVEM	.CPSPT
	DATAO	PAG,xxx
and all CPUs have the SPT base register pointing at the same address.
Namely, JBTUPM-CPUN.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	


[End of MCO 11075]
MCO: 11076		Name: JMF		Date:  6-Jan-84:05:02:04


[Symptom]
Many routines only report an 18 bit PC. Also, ^T only tells you
about the low order 18 bits of the PC.

[Diagnosis]

[Cure]
Call DPCP with T1 and T2 setup rather than PCP with T2 setup.
Invent another JBT table to store F in for ^T and store a full 30
bit PC in JBTPC for ^T reporting.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	


[End of MCO 11076]
MCO: 11078		Name: RDH		Date: 10-Jan-84:03:39:31


[Symptom]

KAFs on all cpus

[Diagnosis]

MCO 10890 left some dangling 2471 (!) code . . .

[Cure]

Rend it asunder

[Keywords]
TTY TAPE
KAF

[Related MCOs]
10890

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702	174	SCNSER	XMTDMC,UNLKBD

703	274	SCNSER	XMTDMC,UNLKBD


[End of MCO 11078]
MCO: 11080		Name: JMF		Date: 12-Jan-84:18:27:08


[Symptom]
New: If the length of the argument list in FILOP open is 12(8) or
greater, treat word 11(8) which is in the form of XWD A,B in the folllowing
manner: if the number of OUTPUT buffers to be created is non-zero, and A is
non-zero, create the output buffer ring starting at A. If A=0, create the
OUTPUT ring at .JBFF. If the number of INPUT buffers to be created is non-zero,
and B is non-zero, create the input buffer ring starting at B. If B=0, create
the INPUT buffer ring at .JBFF. If the word is not supplied, or contains zero,
rings will be created at .JBFF as in the past.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOCON
		ERRCON


[End of MCO 11080]
MCO: 11082		Name: JMF		Date: 13-Jan-84:13:49:43


[Symptom]
Hard to write a routine which does command parsing and wants to do
several PUSHs and then encounters an error.

[Diagnosis]
When an error occurs, tradition has it that one JRSTs to COMERA,
or if one level down, one JRSTs to COMERP which POPs one item off the stack.
If parsing is complicated, several items may have been PUSHed on the stack
and thus a JRST to either routine doesn't wind up back at COMRET but in the
boonies.

[Cure]
Make COMERP, COMERA, and friends exit via ABORTC which will ajust the
stack such that teh return is always to COMRET. This allows any command
processing routine to JRST to any of the error routines without worrying
about the stack.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		COMCON	COMERL


[End of MCO 11082]
MCO: 11085		Name: SMW		Date: 16-Jan-84:11:55:55


[Symptom]
     Problems with RP20's:  1).   A  servo  problem  on  one
drive  can cause other drives to drop off line, 2).  Running
diagnostics on one drive (from the  maintenance  panel)  can
cause  trouble for the other drives (KCP stopcode, drive off
line, spurious I/O error).

[Diagnosis]
     The device driver can't issue  a  new  command  if  the
kontroller  is  still  busy  from the previous command (i.e.
the GO bit is still up).  The above two conditions can cause
the  kontroller  to remain busy for longer than anticipated.
The monitor times out and decides to issue the next command.
This hangs the entire subsystem.

[Cure]
     Exit from the device driver  without  issuing  the  new
command.   Wait  for  the  previous  command  to  signal  an
interrupt, then tell FILIO that both commands are done (this
is  a  lie).   If the new command is a transfer, then lie to
FILIO and tell him "position done".  FILIO will  think  he's
recovering  from  a  hung  transfer  and  will  re-issue the
transfer command.  If the new command is  a  position,  then
tell  filio  "recal done".  FILIO will think he's recovering
from a hung position and will re-issue the position command.

[Keywords]
INLINES
RP20
KCP
OFF-LINE

[Related MCOs]
None

[Related SPRs]
125077, 125697

[MCO status]
Checked

[MCO attributes]
Field service attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		RNXKON	CMDWAT
702A		FILIO	HNGD14
703	


[End of MCO 11085]
MCO: 11087		Name: TARL		Date: 19-Jan-84:13:31:38


[Symptom]
LUUO's don't work in extended sections.

[Diagnosis]
Section 0 luuo's use locations 40 and 41, which are insufficient
for extended section luuos. The block used for trapping extended
LUUOs is a four word block pointed to by location 420 in the UPT.

[Cure]
Allow setting the pointer to this block with trap number
zero of the UTRP. uuo. The pointer is a full 30 bit address
to the four word block in user memory. The block looks like:
	Block+0: Flags,,opcode of LUUO
	Block+1: PC of LUUO
	Block+2: Effective address of LUUO
	Block+3: New PC.

You'll notice this looks oddly like the MUUO block at upt+424. It should.

[Keywords]
UTRP.
LUUO
Xaddr

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOCON	GETTRN


[End of MCO 11087]
MCO: 11088		Name: RCB		Date: 19-Jan-84:16:41:23


[Symptom]
TM02/TM03s no longer work as second, third, etc. kontroller on an RH20.

[Diagnosis]
Code left over from 7.01 which made TM02 KDBs be meta-KDBs describing
up to 64 (decimal) slave units.

[Cure]
Teach TM2KON about having a KDB per TM02 on a channel.

[Keywords]
TM02
TM03
Multi-unit RH20s

[Related MCOs]
None

[Related SPRs]
125806

[MCO status]
None

[MCO attributes]
Field service attention
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		TM2KON	TM2IN2,DRVPOL,DRVPL1,DRVPL5
702A	
701B	


[End of MCO 11088]
MCO: 11091		Name: NT		Date: 23-Jan-84:08:39:08


[Symptom]
Not enough dispatch bits in command tables.

[Diagnosis]
Yes

[Cure]
Rearrange the command tables, assigning a table completely to the
bits, and another table exclusively for the dispatch address. UNQTAB is now
a table of one word entries with the post dispatch bits in the left
half and the predispatch and uniqueness bits in the right half. The
uniqueness bits must be the least significant bits so that we can
remain compatible with the user defined command tables which are still
compressed. DISP now contains the full word dispatch address. Dispatch
bit NOLOGC has been removed, since there was no longer a need for it.
The only logical name restictions now are the "R" and null commands.

[Keywords]
COMMAND DISPATCH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	COMMON	COMTAB,DISP,UNQTAB
		COMCON	COMMAN,FNDABV


[End of MCO 11091]
MCO: 11099		Name: TARL		Date: 31-Jan-84:03:36:24


[Symptom]
New: Move the default PFH into the monitor.

This eliminates only the functionality of fetching a default PFH when
no PFH is present; All page faults in these conditions are now handled
by the monitor. The old functionality of setting up a private PFH
continues to work.

This new PFH allows us to fix a number of outstanding virtual bugs, such as
dump mode filop I/O not working, that we never had room to fix. The new code
is considerably smaller than the old code, mainly by virtue of not having to
worry about overlaying and running in user mode. The algorithms are currently
much simpler than the old PFH (instead of a FIFO we have random page out),
and there is room for considerable experimentation.

[Diagnosis]

[Cure]

[Keywords]
PFH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	


[End of MCO 11099]
MCO: 11100		Name: KBY/JMF		Date: 31-Jan-84:03:49:24


[Symptom]
New: implement user mode extended addressing. See spec for details.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	


[End of MCO 11100]
MCO: 11101		Name: JMF		Date: 31-Jan-84:04:58:25


[Symptom]
New: If the length of the FILOP open argument list is 13(8) or
greater, treat word 12(8) which is in the form XWD A,B in the following
manner: if the number of output buffers to be created is non-zero, and A
is non-zero, create the output buffer ring with buffers of size A+2.
Likewise, if the number of input buffers to be created is non-zero, and B
is non-zero, create the input buffer ring with buffers of size B+2. If the
number is not supplied or contains zero, the buffers will be created using
the default size.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
11080

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	


[End of MCO 11101]
MCO: 11102		Name: DPM		Date: 31-Jan-84:07:55:08


[Symptom]
New:  Add alternate job contexts.  Included with this are
three new commands: CONTEXT, PUSH, and POP, and the CTX. UUO.
All code to support this resides in a new module, CTXSER.  See
spec for details.  Currently, the code is turned off, I expect
it will be usable in a couple of weeks.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	110	S	.USBTS
		CLOCK1	STOP1B,STOP1C
		COMCON	LOTS
		COMMON	LOTS
		CTXSER	LOTS
		DATMAN	CREPDB
		S	.USBTS
		SCNSER	TYIEAT
		SCHED1	FINOUT
		SYSINI	IOGO


[End of MCO 11102]
MCO: 11103		Name: TARL		Date:  2-Feb-84:03:12:30


[Symptom]
Junk error code returned in AC 1 after attempting to merge
an execute only core image.

[Diagnosis]
We determined a protection failure after FILFND was done,
so what's left does not indicate a protection failure.

[Cure]
Fake it up. When deciding that merging an exectute only image is
a sin, do a movem with "protection failure".

[Keywords]

[Related MCOs]
None

[Related SPRs]
34476

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		COMCON	MERGE
703	


[End of MCO 11103]
MCO: 11104		Name: KBY		Date:  3-Feb-84:10:13:48


[Symptom]
%LDSWP is wrong.

[Diagnosis]
CAIG T1,7 where T1 contains "UDB addr,,UNISWP" doesn't work
when the UDBs are above 400000.

[Cure]
CAIG T1,7-->TLNN T1,-1.

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		ONCMOD	SOMUSL
703	


[End of MCO 11104]
MCO: 11107		Name: DPM		Date:  7-Feb-84:06:32:23


[Symptom]
Programs using labeled tapes can't tell when a reel switch has
occured.

[Diagnosis]
Normally this is a feature, but for some programs like BACKUP
which log information while a tape is being written, this is
necessary.

[Cure]
Add PSI on reel switch.  It will be an I/O condition (PS.RSW==1B31).

[Keywords]
REEL SWITCH
REELID

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	PSISER	PSIDVB
		S	IR.RSW,IR.ALL
		TAPUUO	TPMLSU
		UUOSYM	PS.RSW


[End of MCO 11107]
MCO: 11110		Name: JMF		Date: 13-Feb-84:07:24:53


[Symptom]
CIB stopcds on parity errors on SMP systems.

[Diagnosis]
DIE interlock not obtained/given up at the correct times.

[Cure]
Yes.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Field service attention
Multi CPU only
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		KLSER	PRTRY

703	


[End of MCO 11110]
MCO: 11111		Name: KBY/JMF		Date: 13-Feb-84:07:27:26


[Symptom]
New: implement user mode extended addressing. See spec for more
details.

[Diagnosis]

[Cure]

[Keywords]
BIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
KL paging only
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	ALL


[End of MCO 11111]
MCO: 11112		Name: RCB		Date: 14-Feb-84:16:26:42


[Symptom]
1) S assembly blows up with U,V, and E errors.

2) STOPCD IME.

[Diagnosis]
1) Extra ">" in PXGEN.

2) Incorrect code in PXGEN causing us light the wrong bits in the ac field
of the PXCT generated.

[Cure]
1) Delete the ">".

2) Use IFB/IFNB to test for space and tab.  Generally clean up the definition.

[Keywords]
PXGEN
PXCT

[Related MCOs]
11108

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	S	PXGEN


[End of MCO 11112]
MCO: 11114		Name: JMF		Date: 16-Feb-84:07:03:37


[Symptom]
New: In a RUN, GET, MERGE command, allow the path spec to appear
either to the right or left of the file name in the file spec.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	COMCON	SGSET


[End of MCO 11114]
MCO: 11115		Name: RDH		Date: 16-Feb-84:20:42:49


[Symptom]

MPX-controlled PIM mode devices compute wrong counts

[Diagnosis]

trashed ac

[Cure]

Insert "LDB T3,[POINT 6,P1,11]" at STOCN2+7L immed before "IDIVI T2,(T3)"

[Keywords]
MPX
PIM

[Related MCOs]
10846, 10821, 10823

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		MSGSER	STOCN2

703		MSGSER	STOCN2


[End of MCO 11115]
MCO: 11119		Name: RCB		Date: 21-Feb-84:12:54:40


[Symptom]
Magtape diagnostics hung

[Diagnosis]
Call to KONWAT never returns.

[Cure]
Add a PUSHJ P,SETACS.

[Keywords]
DFTUI
TM78

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Field service attention
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		TAPUUO	TPDSCH
703	211


[End of MCO 11119]
MCO: 11121		Name: TARL		Date: 22-Feb-84:13:24:56


[Symptom]
Virtual timer traps get cleared while PFH is still
around and active.

[Diagnosis]
Big fortran program gets pulled in by GET.EXE, which invokes
PFH.EXE before the program even gets started. PFH starts up,
and sets his virtual timer traps, and returns to the starting
program. This program, like all good programs, does a reset UUO
and ends up clearing the virtual timer traps. This does PFH
no good, since he never gets around to being called for garbage
collection.

[Cure]
Move the SETZM .USTMI from RESET into RMVPFH. The original
intent of MCO was simply to reset the timer between core images,
so that running OPR didn't cause the next program you ran
to go virtual. Zeroing the timer in RMVPFH makes more sense.

[Keywords]
 .ustmi
fortran
get.exe

[Related MCOs]
9649

[Related SPRs]
34501

[MCO status]
Checked

[MCO attributes]
Beware file entry required
Documentation change
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	UUOCON	RESET
702A		VMSER	RMVPFH


[End of MCO 11121]
MCO: 11123		Name: KBY		Date: 27-Feb-84:10:36:15


[Symptom]
Trashed monitor high seg

[Diagnosis]
DX10 picking up a virtual address at the wrong time.

[Cure]
Don't ever store the virtual address.  Always recompute it.
This changes the fix for the TUBCRD filled with crud and related
problems.  TX1KON will now always only have the physical address
of the extended status area in the first part of the channel program.

[Keywords]

DX10
High seg overwritten


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		TX1KON	LOTS
703	


[End of MCO 11123]
MCO: 11124		Name: DPM		Date: 28-Feb-84:03:18:43


[Symptom]
New:  Reserve space in the DDBs for a context number.  It will
occupy bits 18-26 in DEVJOB.  PUNIT will shift left 9 bits into
the left half of DEVJOB (bits 9-17).  Although there are comments
indicating FILSER uses bits 7-17 in DEVJOB, it appears no longer
true.

[Diagnosis]

[Cure]

[Keywords]
CONTEXT
PUNIT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMMON	PUNIT
		COMDEV	CDRDDB,DCRDDB,CDPDDB,LPTDDB,DLPDDB,PLTDDB,PTRDDB,PTPDDB


[End of MCO 11124]
MCO: 11125		Name: DPM		Date: 28-Feb-84:06:12:15


[Symptom]
FILOP. UUO function .FOUSO fails when it should not.

[Diagnosis]
If a file is opened in update mode (.FOSAU) is read until EOF
encountered, and a FILOP. USETO done to block 1, the FILOP.
takes the error return because of the EOF condition.  This is
inconsistant with a USETO with does not check EOF.

[Cure]
Do not check IODEND.

[Keywords]
FILOP.
USETO

[Related MCOs]
None

[Related SPRs]
33814

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	UUOCON	FUSTO

702A	

701B	


[End of MCO 11125]
MCO: 11126		Name: JMF		Date:  1-Mar-84:09:36:43


[Symptom]
New: Add support for the "keep me" bit implemented by the MCA25.
This currently turns on "keep me" for the resident monitor. At a later
time, we may want to do some extensive performance analysis to see if that's
too much or too little.

[Diagnosis]

[Cure]

[Keywords]
MCA25
keep me

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	S
		COMMON
		KLSER
		VMSER
		SYSINI
		ONCE

702A	


[End of MCO 11126]
MCO: 11127		Name: JMF		Date:  1-Mar-84:09:39:39


[Symptom]
New: Implement new support for TGHA to be able to do bit substitution
for the MG20.

[Diagnosis]


[Cure]

[Keywords]
TGHA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	MOSSER

702A		MOSSER


[End of MCO 11127]
MCO: 11128		Name: DPM		Date:  6-Mar-84:06:10:42


[Symptom]
New: Allow IPCF to work with alternate contexts by encoding the
context number in the PID.  The job number will continue to live
in bits 27-35, the context number in bits 18-26.  Programs which
depend on %IPCPM to extract the job/context number lose.  This MCO
will require SYSINF to be rewritten, as it can't handle new style
PIDs.  SYSINF will crash trying to process simple things like  RESET
messages.

[Diagnosis]

[Cure]

[Keywords]
CONTEXTS
IPCF
PID
SYSINF

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMCON	JOBKL
		COMMON	.PDIPC,PIDTAB
		CTXSER	CTXIPC
		IPCSER	LOTS


[End of MCO 11128]
MCO: 11129		Name: LWS		Date: 16-Mar-84:11:23:36


[Symptom]
Jobs that PSI on KSYS keep getting interrupted even
after SYSKTM has gone negative, i.e. timesharing is already over.

[Diagnosis]
Code is not smart enough to only give one interrupt
to job when timesharing is over.

[Cure]
Only interrupt job when SYSKTM goes from 1 to -1 (timesharing
has just ended).

[Keywords]
KSYS
PSI

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		CLOCK1	NOKSYS


[End of MCO 11129]
MCO: 11130		Name: RCB		Date: 20-Mar-84:05:48:59


[Symptom]
PSISER and CTXSER don't get along.

[Diagnosis]
Nobody told PSISER about multiple contexts and the fun they cause.

[Cure]
Teach it all about CTXSER.

[Keywords]
CTXSER
PSISER

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	PSISER	MOST
		CTXSER	MANY
		COMMON	CTXJCH,PINOJN


[End of MCO 11130]
MCO: 11131		Name: DPM		Date: 20-Mar-84:05:53:54


[Symptom]
New: Add full context support to IPCSER.  'til reset PIDs are
now preserved across contexts.  Job/context numbers are now
passed back to the user in the IPCFx. argument blocks.  This
edit changed the way lots of things work inside IPCSER.  Beware.

[Diagnosis]

[Cure]

[Keywords]
CONTEXT
IPCF
PSI

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMMON	LOTS
		CTXSER	CTXIPC
		IPCSER	ALL


[End of MCO 11131]
MCO: 11132		Name: KBY		Date: 20-Mar-84:14:07:26


[Symptom]
STOPCODE KSW

[Diagnosis]
User issues a CLOSE to a write-locked tape.  Before the
interrupt code exits, some other user gets queued for I/O on the same
kontroller.  The write-lock-on-CLOSE code gets confused and starts
up the next guy, then interrupt level deselects him although he
has now been released.

[Cure]
Make write-lock-on-CLOSE deselect the drive first so nothing will
happen until normal interrupt level code selects someone to run.

[Keywords]
KSW
write-lock
CLOSE

[Related MCOs]
None

[Related SPRs]
32757

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		TAPSER	TAPDSL
703		TAPUUO	CLSWLK


[End of MCO 11132]
MCO: 11133		Name: DAD/RDH		Date: 24-Mar-84:10:30:21


[Symptom]

DN8x terminals can hang (stop output)

[Diagnosis]

If the -11 is EXTREMELY heavily loaded (loop service has not run for
20 clock ticks) then the DH/DZ output interrupt service starts shutting
down terminals in an attempt to "back off" and let loop service get
some cpu time (for routing, etc.), assuming that IRMA will eventually
get the line(s) restarted. Unfortunately, the line can be left without
DS.ACT (line active) set, in which case IRMA ignores that line.

[Cure]

Set DS.ACT for any line being "idled" due to overload.

[Keywords]
DN8x
Hung terminals
IRMA


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		DNTTY	XMTINT

702A		DNTTY	XMTINT

703		DNTTY	XMTINT


[End of MCO 11133]
MCO: 11134		Name: DPM		Date: 26-Mar-84:03:07:09


[Symptom]
	"PRIMARY PROTOCOL NOT RUNNING" error messages at system startup
on multi-CPU systems.

[Diagnosis]
	A non-boot CPU references LINTAB entries before LINTAB gets
setup.

[Cure]
	Make sure the LINTAB entry in question is non-zero before sending
line speed information to RSX-20F.

[Keywords]
STARTUP
RSX-20F
LINTAB

[Related MCOs]
None

[Related SPRs]
34227, 34485

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	TTDINT	TTDRLD

702A	


[End of MCO 11134]
MCO: 11135		Name: ERS		Date: 27-Mar-84:07:40:51


[Symptom]
Pathalogical name limits cannot be changed at mongen time.

[Diagnosis]
Values were hard coded in.

[Cure]
Allow the following words to be defined at MONGEN time.

	LNMMXL	Maximum length of any pathalogical name.  Defaults to 144, 
		maximum possible value is 177.

	LNMMAX	Maximum number of pathalogical names.  Defaults to 77.

[Keywords]
PATH

[Related MCOs]
None

[Related SPRs]
31536

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMMOD	LNMMXL,LNMMAX
702A	
701B	


[End of MCO 11135]
MCO: 11136		Name: ERS		Date: 27-Mar-84:08:03:13


[Symptom]
Monitor too slow.

[Diagnosis]
Code reading bug.

[Cure]
Make a new label and use it.

[Keywords]

[Related MCOs]
None

[Related SPRs]
32763

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	ERRCON	DOINT1
702A	
701B	


[End of MCO 11136]
MCO: 11138		Name: LWS		Date: 28-Mar-84:15:49:37


[Symptom]
SETUUO argument restrictions for setting minutes
till KSYS prohibits new OPR command, SET KSYS NOW <I mean it!>,
from working.

[Diagnosis]
SETUUO function for setting KSYS only allows
half-word argument value. To stop timesharing immediately, a
full-word -1 needs to be placed in SYSKTM.

[Cure]
If the argument to the SETUUO set KSYS function is 777777
(an immediate -1), change it to 777777,,777777 and then stuff it
in SYSKTM.

[Keywords]
KSYS
SETUUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		COMCON	SETKSY


[End of MCO 11138]
MCO: 11139		Name: RCB		Date: 28-Mar-84:16:16:50


[Symptom]
Monitor too slow.

[Diagnosis]
Unnecessary calls to SETCHP when user sets or clears XOFFed status
for a terminal.

[Cure]
Only call SETCHP when necessary.

[Keywords]
TRMOP. .TOSTP
SETCHP

[Related MCOs]
10260

[Related SPRs]
33042

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	SCNSER	TOPXF0
702A	
701B	


[End of MCO 11139]
MCO: 11140		Name: RCB		Date: 28-Mar-84:16:58:31


[Symptom]
Sporadic "?Illegal address in UUO" messages when creating an EXE file via
LINK on SMP systems.

[Diagnosis]
The CLOSE UUO calls RELSEG to see if we just superseded a known segment.
We wander into FNDSGU, where we set up a path pointer in .JDAT+SGAPPN.
Then, we call FNDSEG, which calls SRCSEG, which gets MM.  When MM is not
available, we do a context switch, thus clobbering the dump ac we so
cleverly put our path pointer in.

[Cure]
PUSH/POP SGAPPN around the call to UPMM in SRCSEG.

[Keywords]
Ill addr in UUO
LINK writing EXE files

[Related MCOs]
None

[Related SPRs]
32491

[MCO status]
None

[MCO attributes]
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	SEGCON	SRCSEG
702A	
701B	


[End of MCO 11140]
MCO: 11141		Name: TARL		Date: 29-Mar-84:04:21:28


[Symptom]
Cannot simulate SPY uuo with .PAGSP PAGE.

[Diagnosis]
People want to use the negative argument facility, so
they say "map 100 pages from monitor page 0 into user page 400".

When NXTPAG looks at .USNXP, he decides whether or not to
increment both halves by seeing if the left half is already
non-zero.

[Cure]
Make SPYPGS call NXTSPG, a routine which is similar to NXTPAG
but knows to increment both halves. This is a reasonable way to
fix this, since this is the only case where doing something to
page zero with a page uuo is legal.

[Keywords]
SPY uuo
 .PAGSP

[Related MCOs]
None

[Related SPRs]
30092

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	VMSER	NXTSPG,SPYPG1,SPYPG2
702A	


[End of MCO 11141]
MCO: 11142		Name: RCB		Date: 29-Mar-84:11:23:54


[Symptom]
JBSET. UUO to set page fault timer traps will always set them for
the job doing the UUO, rather than for the requested target job.

[Diagnosis]
Timer trap words are in the UPT, and we can't change UPTs at UUO level.

[Cure]
Move the timer trap values to the PDB.

[Keywords]
JBSET.
Page fault
Virtual timer traps

[Related MCOs]
None

[Related SPRs]
33439

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	VMSER	SETVTM,VIRC22,TIMFLT,TIMFL1,RMVPF2,PAGEB
702A		S	.USTMC,.USTMI
701B		COMMON	.PDTMC,.PDTMI,.PDLEN
		CLOCK1	INCTM4,INCTM5
		COMCON	USAVE2,USVFIN,SVABRU,SGIO2


[End of MCO 11142]
MCO: 11144		Name: RCB		Date: 29-Mar-84:12:10:36


[Symptom]
DEVCHR UUO returns wrong status for RSX20F lines which have done a
SET HOSTESS command.

[Diagnosis]
No check made for VTM status.

[Cure]
Add code.

[Keywords]
set host
RSX20F lines

[Related MCOs]
10646, 10802

[Related SPRs]
34288

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	UUOCON	DVCH2
702A	
701B	


[End of MCO 11144]
MCO: 11145		Name: TARL		Date: 30-Mar-84:08:57:05


[Symptom]
If a user does a .STPGM for a program that isn't on SYS:
(doesn't exist, or he is mistaken about where it is, or he is
just hacking), his job loops forever.

[Diagnosis]
No code to handle this case. It seems unreasonable to let
something as blatant as this eat up your system.

[Cure]
New bit in .PDDFL, PD.PGR, ".STPGM run" in progress. If
this bit is set when the run fails, change .PDPGM to LOGOUT,and 
let the job die gracefully.

[Keywords]
 .STPGM
User error

[Related MCOs]
None

[Related SPRs]
34114, 34065

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMCON	RUNCM,URUN3,SGRELE
702A	


[End of MCO 11145]
MCO: 11146		Name: RCB		Date:  1-Apr-84:19:59:47


[Symptom]
New:  Add the following functions to the RECON. UUO for CONFIG-in-OPR:

	.RCDET	Detach a CPU or device
	.RCATT	Attach a CPU or device
	.RCMON	Set memory on-line
	.RCMOF	Set memory off-line

Calling sequence for .RCDET and .RCATT:
	ac/	function,,addr
	addr/	2
	addr+1/	sixbit CPU name or sixbit device name

Calling sequence for .RCMON and .RCMOF:
	ac/	function,,addr
	addr/	3
	addr+1/	first page in affected range
	addr+2/	first page beyond affected range (last page number + 1)

[Diagnosis]

[Cure]

[Keywords]
CONFIG
OPR
DETACH
ATTACH
SET MEMORY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	UUOCON	RECON,RCNDET,RCNATT,RCNMON,RCNMOF
		CPNSER	CPUDET,CPUDE0,CPUDE4,CPUDTU,CPUATU
		LOKCON	MEMOFL,MEMOFU
		COMCON	MEMONL,MEMONU
		FILIO	DSKCSC
		COMMON	CPUATU,MEMOFU,CPUDTU
		UUOSYM	RECON.


[End of MCO 11146]
MCO: 11147		Name: KBY		Date:  2-Apr-84:09:14:43


[Symptom]
Random stopcodes?  MM hang?

[Diagnosis]
Calling USCHD1 with T1 not set up.

[Cure]
ANDCAM-->ANDCAB

[Keywords]
HPQ
reschedule

[Related MCOs]
10889

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOCON	USRXNT
702A	


[End of MCO 11147]
MCO: 11149		Name: RCB		Date:  2-Apr-84:14:43:16


[Symptom]
Batch PTYs get handed to unsuspecting users when connecting a PTY to
an MPX channel.

[Diagnosis]
The batch PTY bit is not cleared before assigning the PTY to the user's
MPX channel.

[Cure]
Clear the bit.

[Keywords]
Batch PTY
CNECT. UUO

[Related MCOs]
None

[Related SPRs]
34446

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	MSGSER	CNDDBI
702A	
701B	


[End of MCO 11149]
MCO: 11150		Name: RCB		Date:  2-Apr-84:14:50:40


[Symptom]
Error return from FILOP. function .FOMTP (MTAPE) is confusing.

[Diagnosis]
When we determine (from DEVIOS) that an error has occurred, we return
ERIPP% (No such PPN on structure).

[Cure]
Return the status bits instead.  This makes .FOMTP consistent with the
other I/O functions to FILOP.

[Keywords]

[Related MCOs]
None

[Related SPRs]
34242

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	UUOCON	DOMTAP
702A	
701B	


[End of MCO 11150]
MCO: 11151		Name: RCB		Date:  2-Apr-84:16:46:25


[Symptom]
Monitor too big.

[Diagnosis]
We clear P3 for privilege checking in TRMOP. UUOs when we only need
to do so once.

[Cure]
Yes.

[Keywords]
TRMOP.
Priv checking

[Related MCOs]
None

[Related SPRs]
33127

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	SCNSER	TOPRSQ,TOPRED
702A	
701B	


[End of MCO 11151]
MCO: 11152		Name: RCB		Date:  2-Apr-84:17:46:59


[Symptom]
If all CPUs get a KAF stopcode at about the same time, they will
all loop, and the system must be reloaded by hand.

[Diagnosis]
The non-policy CPUs just went on ahead and jumped into their ACs, but
they never told the policy CPU that they died.  Thus, the policy CPU
is waiting for a role switch to occur, so that it can die as a slave
CPU as well.

[Cure]
 Have the slave CPUs tell the policy CPU that
they died, and have the loop for the policy CPU in
CPUSTP in ERRCON check occasionally to see if it is now the last
CPU and should do the reload. Have MONBTS check this
condition , so that we don't get two dumps for the same crash on
the same CPU.

[Keywords]
KAF
No auto reload

[Related MCOs]
None

[Related SPRs]
34301

[MCO status]
None

[MCO attributes]
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	S	DF.RAD
702A		MONBTS	SETUP,RLDMO3
701B		ERRCON	CPUSTP


[End of MCO 11152]
MCO: 11153		Name: RCB		Date:  2-Apr-84:18:10:20


[Symptom]
New: Allow PSISER to work with extended addressing. This
implements the PIINI.UUO bit PS.IEA to allow PSI vectors and 
interrupts in non-zero section.

[Diagnosis]

[Cure]

[Keywords]
PSI trapping
User-mode extended addressing

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	PSISER	LOTS
		UUOCON	PIFLG.
		S	JBTPIA
		UUOSYM	PIFLG.


[End of MCO 11153]
MCO: 11154		Name: RCB		Date:  2-Apr-84:18:30:20


[Symptom]
Node 0 means the central node in many places, but not everywhere.

[Diagnosis]
Yes.

[Cure]
Rather than keep the confusion of needing to know when it is or isn't
the central site, make it always mean it.

[Keywords]
node 0
node. uuo

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMDEV	LOCATE,CLOCAT
		NETSER	NODE.A,SRCND0,SRCND1


[End of MCO 11154]
MCO: 11157		Name: DPM		Date:  4-Apr-84:02:59:17


[Symptom]
"?Illegal data mode for device ..." error message can contain
no device name if the device is a TTY.

[Diagnosis]
Routine CHKMOD calls TTYKLQ before dispatching to ERRCON
to type the error message.

[Cure]
Call TTYKLQ after the error message is printed.

[Keywords]
TTY DDB

[Related MCOs]
None

[Related SPRs]
33924

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	ERRCON	DEVEXC
		UUOCON	CHKMOD,UOPE53

702A	

701B	


[End of MCO 11157]
MCO: 11158		Name: DPM		Date:  4-Apr-84:04:07:10


[Symptom]
     A user types SET BREAK <address> where address is in the ACs.  No
address break occurs.

[Diagnosis]
     The monitor allows the SET BREAK command to set address breaks in
the ACs although the hardware ignores these addresses.

[Cure]
Do not allow addresses in the range of 1 to 17 . Note that since
an address of 0 turns off address break but leaves the condition set,
0 must be excluded from the range check.

[Keywords]
ADDR BREAK

[Related MCOs]
None

[Related SPRs]
33403

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMCON	SETBR1

702A	

701B	


[End of MCO 11158]
MCO: 11161		Name: NT		Date:  9-Apr-84:15:16:05


[Symptom]
Terminals with TERMINAL STOP and a non-zero PAGE lenght will go
into pause as though the monitor page limit had run out, even though
it has gone into terminal input wait less than the page limit
number of lines ago.

[Diagnosis]
The monitor will only clear the page count if there is no output to be done
before it goes into input wait. Often, it will go into input wait in
the code, while there are still characters to be output to the terminal.

[Cure]
At TWAITL, have the terminal wait until all characters have been sent,
then let it go into input wait.

[Keywords]
PAGE COUNT, TTY STOP

[Related MCOs]
None

[Related SPRs]
32136, 34477

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		SCNSER	TWAITL
702A	
703	


[End of MCO 11161]
MCO: 11162		Name: NT		Date:  9-Apr-84:17:01:47


[Symptom]
The .TOHPS TRMOP. function does not work for DN20 terminal lines.

[Diagnosis]
The routine TOPHPS in SCNSER sets its internal horizontal
position counter, but does not tell the front end about
the change.

[Cure]
After we set the new position internally, call SETCHP before returning
from TOPHPS to tell the front end the new horizontal position
of the cursor.

[Keywords]
TERMINAL COLUMNS HORIZONTAL POSITION

[Related MCOs]
None

[Related SPRs]
33936

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		SCNSER	TOPHPS
702A	
703	


[End of MCO 11162]
MCO: 11163		Name: DPM		Date: 10-Apr-84:01:18:53


[Symptom]
Paranoia, fright, swear words, and disgust (usually in
that order).

[Diagnosis]
ONCMOD takes it upon itself to initialize the BAT blocks.

[Cure]
Make it always ask the obvious question.

[Keywords]
OHMYGOD
WHAT HAPPENED
DAMNIT
STUPID ONCMOD

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	ONCMOD	CHKBAT,ASKBLP,INTBAT


[End of MCO 11163]
MCO: 11167		Name: DPM		Date: 17-Apr-84:02:54:00


[Symptom]
SET WATCH FILES returns junk error codes for partial
allocation errors.

[Diagnosis]
M doesn't point to UUXEXT.

[Cure]
Adjust M on partial allocation errors.

[Keywords]
WATCH FILES
PARTIAL ALLOCATION

[Related MCOs]
None

[Related SPRs]
32012

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	FILUUO	ENTXIT

702A	

701B	


[End of MCO 11167]
MCO: 11169		Name: JMF		Date: 18-Apr-84:05:07:37


[Symptom]
Gfloat simulation doesn't work.

[Diagnosis]
Results get stored in the wrong AC.

[Cure]
 .UPMUO=>.USMUO.

[Keywords]
Gfloat

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Field service attention
HOSS attention
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		KLSER	GFLT0

703	211	KLSER	GFLT0


[End of MCO 11169]
MCO: 11172		Name: JMF		Date: 20-Apr-84:05:36:48


[Symptom]
System dies in many obscure ways when coming up dual (much more
likely in 7.03, but a bug in 7.02 as well).

[Diagnosis]
Several CPUs can potentially try to do simultaneous core allocation
during ONCE only.

[Cure]
Have all non-boot CPUs stay in their ACs until ONCCOM goes non-zero.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	213	COMMON	SPRIN1
702A	


[End of MCO 11172]
MCO: 11174		Name: DPM		Date: 24-Apr-84:07:06:55


[Symptom]
No CTX. UUO symbols in UUOSYM.

[Diagnosis]

[Cure]
Update UUOSYM.

[Keywords]
CTX. UUO

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	213	UUOSYM	CTX.


[End of MCO 11174]
MCO: 11176		Name: ERS		Date: 24-Apr-84:07:27:51


[Symptom]
Using the SCHED. UUO to set the job class for a list of jobs, if
one of them disappears (logs out) then any jobs after the offending job
don't get into their new job class.

[Diagnosis]
We abort with an error if we can't find the job.

[Cure]
If the job number is legitimate but the job is no longer around just
move on to the next job and change it's job class.

[Keywords]
SCHED.

[Related MCOs]
None

[Related SPRs]
32262

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		SCHED1	SCHWJ1
702A	
703	


[End of MCO 11176]
MCO: 11177		Name: ERS		Date: 24-Apr-84:07:37:48


[Symptom]
SCHED. UUO fails unless JACCT or [1,2].

[Diagnosis]
That's all that is checked for.

[Cure]
Allow the read funtions to work if the user has SPY privs and allow
the write functions to work if he has POKE.

[Keywords]
SCHED.
Privs

[Related MCOs]
None

[Related SPRs]
31764

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		SCHED1	SCHED.
703	


[End of MCO 11177]
MCO: 11179		Name: RDH		Date: 26-Apr-84:01:52:44


[Symptom]

DH11s and DZ11s don't mix.

[Diagnosis]

DDBGEN macro confuses assignment of LCBs.

[Cure]

Offset the DZ11<=>LCB correlation by any preceding DH11 lines.

[Keywords]
dh11
DZ11

[Related MCOs]
None

[Related SPRs]
32916

[MCO status]
Checked

[MCO attributes]
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		DNTTY

703		DNTTY


[End of MCO 11179]
MCO: 11181		Name: JMF		Date: 26-Apr-84:06:51:20


[Symptom]
Bits in .CPRUN not defined in UUOSYM.

[Diagnosis]

[Cure]
Define them.
	CV%RMV==1B1	;CPU HAS BEEN REMOVED
	CV%DET==1B2	;CPU HAS BEEN DETACHED
	CV%SPD==1B3	;CPU HAS BEEN SUSPENDED

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	214	UUOSYM


[End of MCO 11181]
MCO: 11184		Name: TARL		Date: 30-Apr-84:03:49:45


[Symptom]
WHO doesn't.

[Diagnosis]
JBTIMI isn't gettabable.

[Cure]
Gettab table 176, .GTIMI. While we're at it, Gettab table 177, .GTIMO.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	214	UUOCON	GETTAB
		UUOSYM


[End of MCO 11184]
MCO: 11191		Name: DPM/RCB		Date:  3-May-84:08:18:46


[Symptom]
New:  Make IPCSER run in section 1.  For now, all data will remain
in section 0.  IPCFR., IPCFS., IPCFQ., and QUEUE. UUOs dispatch in
section 1.

[Diagnosis]

[Cure]

[Keywords]
IPCF

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	COMMON	IPCADR,GFRADR
		IPCSER	LOTS
		MOSSER	SNDTGH
		UUOCON	CHKTBC


[End of MCO 11191]
MCO: 11192		Name: DPM		Date:  4-May-84:03:59:50


[Symptom]
WHO doesn't.

[Diagnosis]
I/O wait DDB was moved out of JBTPC.  There's
no GETTAB for JBTDDB.

[Cure]
Add .GTDDB, table 200, indexed by job number.

[Keywords]
I/O WAIT DDB

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	UUOCON	NUMTAB
		UUOSYM	.GTDDB


[End of MCO 11192]
MCO: 11194		Name: TARL		Date:  7-May-84:04:01:35


[Symptom]
New: Six character STOPCD names.

This makes four major changes:
1) The code generated by the stopcd macro is now
	XCT [
   name::	PUSHJ P,DIE
		SIXBIT /name/
		XWD bits,cont addr
		EXP typeout address
	    ]

2) DIE handles the above format. DIE also now has an entry point PERISH
   which handles the above format with a XPCW .CPSPC instead of PUSHJ DIE.
   This could be used in cases where the stack pointer is suspect. (The
   cases which come to mind are IME and KAF)

3) %SYSPC (prev. name,,pc) now contains a fullword PC. %SYSCD (new entry in
   .GTSYS) contains the full stopcode name.

4) Location CRSWHY is now a fullword stopcode name, and the date/time/name
   checksum has moved to the right half of CRSCHK in location 26.

Comment: With (2), it is possible to get into DIE without having pushed
the return address on the stack. To keep most of the code common (and to
fix some races), DIE now pops the STOPCD address off the stack early
in the game, so you can no longer say P/<Tab><backspace> to find the
stopcode. Currently, the way to find the stopcode is %SYSPC/<tab><backspace>.

a) Is it acceptable to have P look the way it is BEFORE calling the stopcode,
b) If (a), is %SYSPC a good enough location to look at? (if not, what?)

[Diagnosis]

[Cure]

[Keywords]
DIE
STOPCD
PERISH
SIX CHARACTER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	ERRCON	DIE
		COMMON	REBOOT
		UUOSYM	%SYSPC,%SYSCD
		S	STOPCD


[End of MCO 11194]
MCO: 11200		Name: SMW		Date:  8-May-84:14:21:23


[Symptom]

1. I'm tired of use count crashes being mis-diagnosed.

2. A frequent failure mode (which used to be an IME in 7.02) is
now a KAF in 7.03. I liked it better back when it was a job
stopcode instead of a CPU stopcode.

[Diagnosis]
Attempt to CLOSE a file when the access table is
already on the free list.

[Cure]
Create a new stopcode: ALW (Access table Linked Wrong).
Make it a JOB stopcode.

[Keywords]
IME
KAF
use count
CLOSRN+7

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		FILUUO	CLOSRN


[End of MCO 11200]
MCO: 11203		Name: KBY		Date:  9-May-84:09:55:51


[Symptom]
Too hard to use PAGE. UUO function to manipulate sections.

[Diagnosis]
No symbols in UUOSYM

[Cure]
Add symbols:

	.PAGSC==12		;Function 12, manipulate section maps
				;Delete if PA.GAF=1, else create

		PA.GSF==1B0	;If set, destroy sections, else create
		PA.GMS==1B1	;Map sections together
		PA.GSS==37777B17 ;Source section
		PA.GDS==37777B35 ;Destination section

[Keywords]

Symbols
NZS
FOROTS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	216	UUOSYM


[End of MCO 11203]
MCO: 11204		Name: LWS		Date:  9-May-84:11:28:02


[Symptom]
ORION can't find out where a 'SEND OPR' command came from
when the sender wasn't logged in.

[Diagnosis]
By the time the IPCF packet gets to ORION the sender's
job is gone or has been given to someone else.

[Cure]
Add a new QUEUE. UUO arg block, .QBTTY, and include it in the
IPCF message the monitor sends to ORION for a 'SEND OPR' command.
Put the SIXBIT TTY name of the sender in the block. This new arg
block should be reserved for the monitor's use only -- ORION
will only accept it if it comes from SYSTEM[GOPHER].

[Keywords]
SEND OPR

[Related MCOs]
None

[Related SPRs]
34442, 34540

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A	

703	216	S	.WTNAM
		UUOSYM	.QBAET
		COMCON	SENDT1,SENDT2,SENDHD


[End of MCO 11204]
MCO: 11206		Name: RCB		Date: 10-May-84:07:52:43


[Symptom]
Uniqueness bits too confusing and obfuscatory.

[Diagnosis]
It is far from obvious (and also sometimes annoying) that
UNIQ.1 implies UNIQ.2, etc.

[Cure]
Make each uniqueness bit only affect its exact length, not its length
and all those greater.

[Keywords]
DECLAR/UNIQ

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	216	COMMON	COMTAB,UNQTAB
		COMCON	FNDABV


[End of MCO 11206]
MCO: 11209		Name: DPM		Date: 11-May-84:03:55:08


[Symptom]
Can only type ^D to enter EDDT on the boot CTY.

[Diagnosis]
Yes

[Cure]
Allow it to work on any CTY.

[Keywords]
EDDT
CONTROL-D

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	216	SCNSER	RICD


[End of MCO 11209]
MCO: 11213		Name: JAD/SMW		Date: 12-May-84:17:37:27


[Symptom]
Monitor too small

[Diagnosis]
Doesn't support CI

[Cure]
Support CI

[Keywords]
CI
HSC50
RA60
RA81
RA80

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		LOTS


[End of MCO 11213]
MCO: 11215		Name: TARL		Date: 14-May-84:20:47:17


[Symptom]
WEM stopcodes are too generic.

[Diagnosis]
Person who wrote a lot of anf code was too lazy to think up
a lot of 3 character stopcode names, so he didn't bother.

[Cure]
Replace a large number of PUSHJ P,NTDSTP's with STOPCD's. The
generic rule was:
	NETSER stopcodes became ANFxxx (where xxx relates to the comment)
	NETMCR stopcodes became MCRxxx
	NETTSK stopcodes became TSKxxx
	NETDDP stopcodes became DDPxxx

The WEM stopcode still exists, and will continue to exist as a filler
location for dispatch tables and the like.

Also, while we're at it, change some other stopcode names. The specific
other cases are 6xx becomes DN60xx, 5xx becomes DC75xx, and 4xx becomes
RS04xx.

[Keywords]
STOPCD
WEM
ANF
NTDSTP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	216	D6DINT
		D6SINT
		D76INT
		D85INT
		FSXKON
		DTESER
		PFH
		NULFEK
		NETDEV
		S
		ONCE
		UUOSYM
		KLSER
		COMMON
		ERRCON
		NETSER


[End of MCO 11215]
MCO: 11218		Name: SMW		Date: 16-May-84:16:35:44


[Symptom]
     KAF while formating a disk with DDRPI.

[Diagnosis]
     Super I/O causes the  disk  cache  to  be  swept.   The
number  of blocks to sweep is computed by dividing DEVDMP by
200.   This  is  not  correct  as  the  block   size   isn't
necessarily  200  words  (headers  and trailers are included
during formatting).

[Cure]
     Don't sweep cache  if  the  pack  isn't  mounted  as  a
structure.  Don't sweep for negative block numbers.

[Keywords]
DDRPI
KAF
DISK CACHE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A	217	FILIO	CSDELI

703	


[End of MCO 11218]
MCO: 11220		Name: TARL		Date: 16-May-84:22:45:16


[Symptom]
If you have EDDT loaded, and you happen to be so unfortunate
as to get your symbol table blown away, and then take a stopcd,
your monitor bites it off.

[Diagnosis]
DIE goes into DDT at the end of a STOPCD, and the only
way back out is via GOBACK$G, which won't work if you don't
have symbols.

[Cure]
Make DIE enter DDT via breakpoint with an XCT .CPDDT instead
of XCT SYSDDT. This means you can now say $P to continue your
monitor in the above tragedy.

[Keywords]
DIE
SYSDDT
DDT
GOBACK
DIECON

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	ERRCON	DIECON


[End of MCO 11220]
MCO: 11225		Name: TARL		Date: 17-May-84:23:40:18


[Symptom]
Hung system.

[Diagnosis]
Someone had the absolutley terrible luck of getting
a PDL overflow in SVPPC, which caused a PIP stopcode,
which tried to enter secondary protocol by calling SVPPC.

Unfortunatley, SVPPC notices primary protocol isn't running,
and does nothing. THe original SVPPC never quite got around
to starting secondary protocol after breaking primary.

[Cure]
In SVPPC, if we decide we aren't in primary protocol,
enter secondary protocol anyway, just for paranoia's sake.

[Keywords]
DTESER
SVPPC
PRIMARY
SECONDARY

[Related MCOs]
None

[Related SPRs]
32510

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		DTESER	SVPP2
703	217


[End of MCO 11225]
MCO: 11237		Name: TARL		Date: 22-May-84:05:27:13


[Symptom]
?PSI Interrupt vector at xxx is illegal for ...

[Diagnosis]
User gave a bum address to the PIINI. uuo 14 hours ago,
and when he finally got the interrupt his program blew up.

[Cure]
Range check the address when doing the PIINI. uuo.

Note that this means giving a ?Illegal address in UUO.

[Keywords]
PIINI.
Address check

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		PSISER	PIINI

703	217


[End of MCO 11237]
MCO: 11239		Name: DPM		Date: 22-May-84:07:46:55


[Symptom]
No way to interlock races when saving contexts.

[Diagnosis]
Known bug.

[Cure]
Add a new resource CX.  This will be used to insure that
VIRTAL won't go negative when more than one job attempts
to do some flavor of a save context.  Since there is no
room left in the wait state field in JBTSTS, delete a bunch
of DECtape codes (D4, D5, D6, D7, and D8).

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	S	RWAITS


[End of MCO 11239]
MCO: 11240		Name: TARL		Date: 22-May-84:07:48:56


[Symptom]
INITIA and SYSJOB logins pick their own privs when logging
in prived jobs.

[Diagnosis]
Hardwired defaults because we used to think it sufficient.

[Cure]
New gettab %CNPRV, which states the default privs to use for
monitor created (or INITIA created,or...) prived jobs. This defaults
to <-1,,0>, but can be set in HDWCNF by defining M.JEW.

[Keywords]
Privs
FRCLIN
REFLAG
SYSJOB
INITIA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	COMCON	LOGRF1
		UUOSYM	%CNPRV
		COMMON	PRVPRV,CNFPRV


[End of MCO 11240]
MCO: 11245		Name: LWS		Date: 24-May-84:11:28:01


[Symptom]
1. After MCO 11204, 'SEND OPR' from a TTY/PTY controlled by
another TTY results in no text being passed to ORION.

2. MCO 11204 not complete. Node and line number of sender not
passed to ORION.

[Diagnosis]
1. LDB of the sender is not always the LDB of the controlling
terminal. Call to SENDHO returned U pointing to LDB of controlling
terminal. We need U pointing to the LDB of the sender when trying to get
characters he typed.

2. Yes.

[Cure]
1. Preserve U across call to SENDHO and GTNTSO.

2.Add code to pass node and line number of sender to ORION.

[Keywords]
SEND OPR

[Related MCOs]
11204

[Related SPRs]
34442, 34454

[MCO status]
Checked

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	COMCON	SENDT1,SENDT2
		UUOCON	GTNTN
		UUOSYM	.QBTTY

702A	

701B	


[End of MCO 11245]
MCO: 11247		Name: KBY		Date: 25-May-84:08:45:29


[Symptom]
IME in SYSINI if NXMTAB gets filled in.

[Diagnosis]
Junk PAGTAB bits in the left half of T3 cause illegal section
faults.

[Cure]
Clear the bits before indexing.

[Keywords]

NXMTAB
IME

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	SYSINI	KIINI6
702A	


[End of MCO 11247]
MCO: 11248		Name: KBY		Date: 28-May-84:15:24:41


[Symptom]
New:  (Begin to) implement the "Don't care" bit for the
PAGE.UUO.

[Diagnosis]
This bit,if set,will cause the following effects:
1.  For create/destroy,will cause NOOPs on pages that already
exist (create) or don't exist (destroy).

2.  For page in/out,will cause NOOPs for those pages already
in (page in) or out (page out).

3.  Exchange becomes a move in the appropriate direction if one
of the pages doesn't exist and a NOOP if both don't.

4.  Move destroys the target page if it exists and is a NOOP if
the source page doesn't.

5.  SPY page create/destroy will act akin to create/destroy.

6.  REMAP will destroy target pages if they are in the way.

7.  Create/destroy sections will act like create/destroy pages.


[Cure]
New bit is PG.IDC (100000 in the left half).

[Keywords]
PAGE. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	VMSER	PLTSN,PAGIMT,PAGOMT,CHGPGS


[End of MCO 11248]
MCO: 11250		Name: DPM		Date: 29-May-84:04:48:33


[Symptom]
Ill mem ref when starting DDT if /USE:n was typed.

[Diagnosis]
DDT is correctly merged into the section specified by
the last /USE switch, but we try to start it in section 0.

[Cure]
Use the right section.

[Keywords]
DDT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	COMCON	CHKPCM,STARTU


[End of MCO 11250]
MCO: 11253		Name: DPM		Date: 29-May-84:05:52:48


[Symptom]
Monitor too slow.

[Diagnosis]
Several routines need to know the JCH for the current job
and we have to look it up every time.

[Cure]
Add a new CPU variable .CPJCH.  This will NOT be GETTABable
as we don't want any user mode program to know the format of
(or how to decode) a JCH.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	COMMON	.CPJCH
		CLOCK1	CIP70


[End of MCO 11253]
MCO: 11255		Name: RCB		Date: 29-May-84:07:55:44


[Symptom]
Appearance of edited text on video terminals is seldom right.

[Diagnosis]
Mixing of input and output functions in interrupt level routines.

[Cure]
Don't mix them that way.  This changes the chunks to use 12-bit bytes,
along with several other internal changes, which I'll write up this week.

[Keywords]
Echoing

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change
Field service attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	COMMON
		COMCON
		NETSER
		NETDEV
		COMDEV
		S
		TTDINT
		NRTSER
		SYSINI
		SCNSER
		PTYSER
		UUOCON


[End of MCO 11255]
MCO: 11258		Name: DPM		Date: 30-May-84:03:15:51


[Symptom]
New:  Add a new IPCF message from the gopher to MDA.  This
message will inform QUASAR that a structure has been mounted
by a job other than PULSAR.  The new IPCC function is .IPCST
(function 47).

[Diagnosis]


[Cure]


[Keywords]
MDA
STRUCTURES
KLEPTO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	FILFND	DEFS13
		IPCSER	STRMPA
		UUOSYM	.IPCST


[End of MCO 11258]
MCO: 11265		Name: JMF		Date:  1-Jun-84:09:23:53


[Symptom]
Monitor is brought up with less memory on-line than MONGEN was
told about. ONCE complains to the operator and the operator fixes it. Later
on a STOPCD occurs and MONBTS only dumps core through the amount of memory
origionally on-line.

[Diagnosis]
MONBTS uses NXMPTR to decide how much to dump, but NXMPTR gets
setup before the dialogue complaining about off-line memory.

[Cure]
Setup NXMPTR in SYSINI.

[Keywords]
NXMPTR

[Related MCOs]
None

[Related SPRs]
32470, 32340

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	SYSINI	SYS4
702A		ONCE	HIDONE
701B	


[End of MCO 11265]
MCO: 11267		Name: JMF		Date:  3-Jun-84:07:06:10


[Symptom]
SET WATCH FILES is supposed to cause an ENTER done as a result of
a SAVE command or UUO to be reported. It doesn't.

[Diagnosis]
Not picking up the UUO opcode correctly.

[Cure]
MOVS=>HRRZ

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	UUOCON	WCHFIL


[End of MCO 11267]
MCO: 11268		Name: JMF		Date:  4-Jun-84:09:07:51


[Symptom]
"?Illegal address in UUO" after an I/O error on an LP100.

[Diagnosis]
EVM not returned on errors.

[Cure]
Return EVM on errors.

[Keywords]

[Related MCOs]
None

[Related SPRs]
30914

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	LPTSER	LPTIOE
702A	
701B	


[End of MCO 11268]
MCO: 11271		Name: PMV		Date:  4-Jun-84:17:45:09


[Symptom]
ENQ. deadlock detection is broken.

[Diagnosis]
It was purposely broken by MCO 11226.  Deadlock detection
involves tracing down queue chains for different contexts, but
QUESER doesn't know that jobs can have more than one context.

[Cure]
Teach QUESER about JCHs.  The two job bit maps used by QUESER
are now replaced by two linked lists of JCHs.  Restrict users from
ENQing any locks on files opened on channels 775, 776, or 777.
[This should not be a very important restriction, I assume.]

This MCO also adds a new routine CTXWAK to CTXSER.  It claims to
wake up any context for any job, but really only wakes up a current
context for a job, and is a no-op for a not current context.

While we are at it, make all ENQ stop codes six characters long.
For the record, they are: ENQLNF, ENQDNL, ENQAVE, ENQCWD, ENQCWJ,
ENQIJC, ENQATA, and ENQQFU.

An interesting side-effect of this MCO is that job-wide locks are
actually useful for sharing resources between contexts of a job.

[Keywords]
ENQ/DEQ
QUESER
DEADLOCK DETECTION

[Related MCOs]
11102, 11226

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	QUESER	LOTS
		CTXSER	CTXENQ,CTXWAK
		COMMON	CTXENQ,CTXWAK,ENQZER
		UUOSYM	EQ.CFC,EQ.DCN


[End of MCO 11271]
MCO: 11276		Name: RCB		Date:  5-Jun-84:04:39:41


[Symptom]
New:  Add some hooks for Local-Area Terminals (LATs).

New values:	LPLLXF	remembered XOFF for LAT
		LDLLAT	This is a LAT
		LDBLAT	Overlap LDBTTD and LDBNRT, used by LAT service
		LDPLXF	Pointer to LPLLXF
		APCLAT	APC code to identify a LAT

[Diagnosis]

[Cure]

[Keywords]
LAT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	SCNSER	LDBLAT,LDBPAG,RECPTY


[End of MCO 11276]
MCO: 11278		Name: WXD		Date:  5-Jun-84:06:00:22


[Symptom]
Unable to converse with DECnet nodes in other
areas of the engineering network.

[Diagnosis]
Monitor doesn't know anything about those nodes.

[Cure]
Add support for DECnet phase IV.  This includes support
for naming nodes in other areas and for routing to those nodes.

[Keywords]
DECnet Phase IV
Area Routing

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	MACSYM
		LLINKS	LOTS
		SCPAR	LOTS
		SCLINK	LOTS
		NTMAN	LOTS
		D36COM	LOTS
		D36PAR	LOTS
		ROUTER	LOTS
		SCMUUO	LOTS
		MONGEN	ASKNNM
		COMNET	DCNGTB,NODE.D,D36LIN,NOBDSP
		DTESER	TYPE11,DTUSLM,DTEDSP,DTEDST,DECEVT
		CLOCK1	STOPAT
		NETDEV	DDPDSP,DDPDST
		DTEPRM	ETDSTS
		UUOSYM
		DNADLL


[End of MCO 11278]
MCO: 11282		Name: TARL		Date:  6-Jun-84:11:29:40


[Symptom]
Hung system trying to do an EPO stopcode.

[Diagnosis]
PI's are off, and we requested a channel seven interrupt, and
we are now waiting for it.

[Cure]
Remove all the ancient code left over from KA days which did different
things for EPO's at interrupt level than for uuo level. Make them all
do an EPO JOB stopcode. The place the stack is saved is in all cases
PIPPDL.

[Keywords]
EPO
PIP
HUNG

[Related MCOs]
None

[Related SPRs]
32409

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	ERRCON	S..PIP
702A		KLSER	SEPDL3


[End of MCO 11282]
MCO: 11285		Name: JMF		Date:  7-Jun-84:08:21:18


[Symptom]
Occasional LOOKUP error 1 on a run of a program with a sharable
high segment.

[Diagnosis]
LOOKUP done with junk in the ppn word.

[Cure]
Restore the ppn word from the user specified/implied argument.

[Keywords]

[Related MCOs]
None

[Related SPRs]
33913

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	SEGCON	SHARE
702A	
701B	


[End of MCO 11285]
MCO: 11287		Name: JMF		Date:  7-Jun-84:10:34:38


[Symptom]

1)	CPU and device status blocks don't get read and/or reported on a
	parity error on a single CPU system.
2)	CPU and device status blocks get read and reported on all CPUs
	except the one that had a parity error on an SMP system
3)	CPUSTS clobbers SBUS errors when called.

[Diagnosis]

1)	No code to do it.
2)	All other CPUs call CHKDIE which calls RCDSTB in case we are DIEing.
3)	Call is to REDSBC instead of REDSBD.

[Cure]

1)	Add code.
2)	Leave this the way it is since it might be useful but document it.
3)	Call REDSBD.

[Keywords]
CPU status block
Parity errors

[Related MCOs]
None

[Related SPRs]
31841

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
Field service attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	CLOCK1	APRSUB
702A		COMMON	CPUSTS,RCDSTB
		KLSER	PRTRP


[End of MCO 11287]
MCO: 11288		Name: WXD		Date:  7-Jun-84:16:04:43


[Symptom]
Use of a one word global byte pointer where the P&S
field is 77 causes a "KA10 floating point instruction" error
message.

[Diagnosis]
The code to handle illegal instructions is lazy in
testing for KA10 floating point instructions.  It believes all
instructions between UFA (130) and FDVRB (177) are KA10 floating
point instructions.  The byte instructions fall right in the
middle of that range.

[Cure]
Test for the byte instructions before the KA10 floating
point instructions.  If the instruction is a byte instruction,
just give an "Illegal instruction" error message.

[Keywords]
OWGBP
Illegal instruction

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	ERRCON	ILLINS


[End of MCO 11288]
MCO: 11289		Name: PMV		Date:  7-Jun-84:18:01:16


[Symptom]
1.  IME while doing an ENQC. status function.
2.  Occasionally an unowned long-term lock will never, ever go away.
3.  Some locks don't get their date-time stamp fixed up on a SET DATE
    or SET DAYTIME command.
4.  It is possible for a job to log off with a permanent lock still
    active, contrary to documentation.
5.  The number of queued requests for a lock (returned by the ENQC.
    status function) is always zero.

[Diagnosis]
1.  The ENQC. status function didn't allow for the possibility that
    a long-term lock might not have any owners or queued requests at
    all.  The code simply treated the lock block as a queue block entry,
    and things went downhill from there.
2.  Off-by-one bug in ENQMIN (once-a-minute code).
3.  Off-by-one bug in ENQSDT (set date-time code).
4.  Off-by-one bug in ENQNDR ("no delete on reset" code).
5.  After carefully storing the count of queued requests in the left
    half of P2, QUESER does a LOAD of a half word quantity into P2.
    The LOAD assembles to an HLRZ, which will zero the left half of P2.

[Cure]
1.  If there are no owners or queued requests, return -1 in the
    right half of the first status word, and zero for everything else.
2.  SOJG ==> SOJGE
3.  SOJG ==> SOJGE
4.  SOJG ==> SOJGE
5.  This last bug is very interesting.  I suspect no one has ever
    used this field.  However, instead of fixing it to correspond to the
    documentation, change the documentation and then change the code to
    reflect the new documentation.  The documentation will now state
    that the ENQC. status function returns the number of sharers of
    the resource in the left half of the third status word.

[Keywords]
ENQ/DEQ
LONG-TERM LOCKS

[Related MCOs]
None

[Related SPRs]
33629

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	QUESER	QC0.0,GOTHIM,COUNTQ,ENQMN4,ENQSD3,ENQND4
702A	

701B		QUESER	QC0.0,GOTHIM,COUNTQ,ENQMN4,QNDRC4


[End of MCO 11289]
MCO: 11292		Name: WXD		Date:  8-Jun-84:15:12:33


[Symptom]
SETUUO functions to set the date (.STDAT), the current
time (.STDAY, .STTMS), and to set the KSYS timer (.STKSY) can
fail to perform their function on an SMP system.

[Diagnosis]
The code which sets up the new date and time isn't
interlocked from the updating of those values by CLOCK1.  The
code which sets the KSYS timer isn't interlocked from the code
which tests and decrements it in CLOCK1.  When setting a new
date or time, we aren't clearing the remainder from the last
universal data time computation.

[Cure]
Have these SETUUO functions run only on the policy CPU
so they are interlocked from CLOCK1's updating.  When setting
a new date or time, clear the remainder left from the last
calculation.

[Keywords]
SETUUO
SET DATE/TIME/KSYS

[Related MCOs]
None

[Related SPRs]
34226

[MCO status]
Checked

[MCO attributes]
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		COMCON	SETDA0,SETDA1,SETDT1,SETKSY
702A		CLOCK1	SUDATE
703	222


[End of MCO 11292]
MCO: 11294		Name: JMF		Date: 10-Jun-84:07:09:12


[Symptom]
New: make the CORE command with no argument report the contents of
the address space. The format is as follows:

Page number	Page status	Data on page(s)
n or n-m	accesibility	contents
Total of i page(s)

where n or n-m is the page number or page range in octal, accessibility is
EX for executable, RD for readable, WR for writable, AZ for allocated but zero,
and SH for sharable, contents is "Private page(s)", "Spy page(s)", or the
file spec if pages are sharable. i is the total number of "real" pages in the
address space.

[Diagnosis]

[Cure]

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	COMCON	CORE
		VMSER	GETPAC


[End of MCO 11294]
MCO: 11296		Name: KBY		Date: 11-Jun-84:09:00:59


[Symptom]
Stopcode NFS most common; other scenarios possible.

[Diagnosis]
MAPSLT still isn't right.  Since MAPSLT must now scan the
map for the starting page, it must be able to distinguish a disk address
from a core address.

[Cure]
Invent bit PM.COR as part of the map entry.  This bit is turned on
when a disk address is translated to a core address and off when the
address is turned back into a disk address.

[Keywords]
NFS
IPM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	VMSER	LOTS
		CORE1
		S
		SWPSER	SWPIN7


[End of MCO 11296]
MCO: 11297		Name: KBY		Date: 11-Jun-84:09:08:58


[Symptom]
Not enough free wait state codes.

[Diagnosis]
DECtapes still use up too many wait state codes, particularly
for an "unsupported" device.

[Cure]
Multiplex the DECtape wait state codes through an interlock word
in the master DECtape DDB.  The word formerly was the routine to call
to wait (DnWAIT), so we don't need any more words in the DDB.  The word
now contains the job number of the owning job.
	Also add JBT table JBTDTC (see also MCO 11298) which contains
which master DECtape DDB the job is waiting for so the schedular can
unwind the resource properly.
	The new wait state code is DT.

[Keywords]
DECtape

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	DTASER	LOTS
		SCHED1	SCHEDB,UNWND0,UNWNDS
		COMMON
		COMDEV
		S	RWAITS
		CLOCK1	SRFREE


[End of MCO 11297]
MCO: 11298		Name: KBY		Date: 11-Jun-84:09:14:25


[Symptom]
Too many free wait state codes.

[Diagnosis]
MCO 11297, as you remember, freed up some wait state codes.
Since entropy must always increase on a universal scale, it's now time
to make the IPCF interlock into a real wait state code (incidentally, the
^C code for the IPCF interlock was broken recently anyway).

[Cure]
	The new wait state code is IP.
	This code uses the other (right) half of JBTDTC (called JBTIPC here)
which contains the JCH of the job we wish to interlock, so that the
schedular can unwind the resource properly.

[Keywords]
IPCF interlock

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	IPCSER	IPCLOK,IPCULK
		SCHED1	SCHEDB,UNWND0,UNWNDS
		COMMON
		CLOCK1	SIMCHK,SRFREE
		S	RWAITS


[End of MCO 11298]
MCO: 11310		Name: JMF/TARL		Date: 14-Jun-84:07:46:55


[Symptom]
New: Implement multi-section FILOP. dump mode I/O. See extended
addressing spec for details.

[Diagnosis]

[Cure]
Well,let me put a little of it here, just for the fun of it.
This new form dump mode I/O uses an IOWD list composed of word pairs
instead of IOWDS.  The word pairs are
        1) Positive count of words to read/write
        2) Address of first word touched by IO

If word (1) is zero, the pair is a goto, and word (2) is the 30 bit
address to go to.  If a goto is to 0, that terminates the iowd list.

This is implemented by calling the PFH IOWD breakdown code from DMPIO,
and he will call filser (or whomever) with old-fashioned IOWDS of
128k or less.  The reason for 128K limit is that under 7.03 positive IOWDS
don't work (cause unknown) - The limit is easy to change.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	S
		PFH
		UUOCON
		KLSER


[End of MCO 11310]
MCO: 11311		Name: SMW		Date: 14-Jun-84:01:38:26


[Symptom]
     Monitor too big.

[Diagnosis]
     The size of the disk cache hash  table  isn't  settable
via  MONGEN.   The default is way too big (one hash slot per
block of cache).

[Cure]
     Make it settable (via MONGEN symbol M.CBHS).  Make  the
default be one hash slot per two blocks of cache.

[Keywords]
DISK CACHE
HASH TABLE
CBHSHL

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		COMMOD	CBHSHL


[End of MCO 11311]
MCO: 11312		Name: NT		Date: 14-Jun-84:01:48:14


[Symptom]
No way to specify font name for print request from a QUEUE. UUO.

[Diagnosis]
New functionality.

[Cure]
Add new function block to QUEUE. called .QBFNT with a maximum
of 6 word arguement block containing an ASCIZ string which is the
font name that LPTSPL will use to locate the font file. For the record,
the arguement words are called .QBFN0 to .QBFN5.

[Keywords]
LASER PRINTER FONT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOSYM	.QBTTY


[End of MCO 11312]
MCO: 11313		Name: NT		Date: 14-Jun-84:02:33:22


[Symptom]
No place to put the billions and billions of soft fonts which
the LN01 and subsequent printers can use.

[Diagnosis]
Never needed a place before.

[Cure]
Create a new library ersatz device FNT:. The PPN is [5,36]. This
device will have a set of SFDs where the font files will be placed. The
names of the SFDs will be the names of the devices the fonts are for.
Example: All the fonts for the LN01 will live on [5,36,LN01]. This
scheme will therefore allow the addition of other devices as time goes
by.

[Keywords]
LASER FONT FILE DEVICE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOSYM	%LDSEB
		COMMOD	ROODRB,LIB


[End of MCO 11313]
MCO: 11318		Name: KBY		Date: 17-Jun-84:14:00:22


[Symptom]
Hard to know which section to create pages in

[Diagnosis]
If thre is more than one section mapped together, we don't
do the right things when one tries to create pages in the "dependent"
section.  This is particularly siginificant when the independent section
is section 0.

[Cure]
Allow users to create/destroy pages in the dependent section, just
do the real work in the independent section.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	VMSER


[End of MCO 11318]
MCO: 11323		Name: RDH		Date: 17-Jun-84:18:29:03


[Symptom]

Add UUOSYM symbols for RUN/GETSEG/etc. block.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	123	UUOSYM


[End of MCO 11323]
MCO: 11329		Name: SMW		Date: 18-Jun-84:19:55:15


[Symptom]
     Spurious IO.IMP error while  doing  output  to  spooled
device.

[Diagnosis]
     The first output to a spooled device  forces  an  ENTER
UUO.   The monitor makes up a filename that it hopes will be
unique.  If it is not unique (i.e.  the ENTER returns  error
code   4)  then  the  monitor  tries  for  a  new  filename.
Unfortunately, the error code is only 18 bits wide  and  the
code does a 36 bit compare.

[Cure]
     Do 18 bit compare.  Check for both error codes 3 and  4
(file    being    modified,   and   file   already   exists,
respectively).

[Keywords]
IO.IMP
SPOOL

[Related MCOs]
11328

[Related SPRs]
34261

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		FILUUO	SPTST6
702A	
703	


[End of MCO 11329]
MCO: 11330		Name: RDH		Date: 18-Jun-84:22:47:12


[Symptom]

New:

	Expand DSKCHR to return all the juicy tidbits that SYSDPY wants
	to display. This adds entries 34 to 71 (see UUOSYM for definitions)

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	FILFND
		UUOSYM


[End of MCO 11330]
MCO: 11334		Name: SMW		Date: 20-Jun-84:14:23:30


[Symptom]
New: allow words 22-25 in the RIB to be multiplexed
(.RBQTF,.RBQTR,.RBQTO,and .RBUSD). If the file is not a 
directory then the user is allowed to set these words to 
anything he wants. The words will be used for access 
method parameters. The parameters will not be enforced
by the monitor. The monitor will totally ignore these words.
Programs that use them do so by mutual consent.

[Diagnosis]
     Yes.

[Cure]
     Yes.

[Keywords]
ACCESS METHOD

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		FILUUO	SETVA1
703	


[End of MCO 11334]
MCO: 11348		Name: TL		Date:  5-Jul-84:11:17:10


[Symptom]
DZ based dataset lines behave VERY slowly on a KS10.
It may take tens of seconds for the autobaud character to be recognized.

[Diagnosis]
DZ dataset timing is based on being called once/tic.  If M.STOF
is non-zero, it won't be.  So with M.STOF=7 (a typical value for the KS), 
it takes 16 seconds for carrier stabilization to time out.  (Instead of 2)

[Cure]
Teach DZQADD to allow for M.STOF.  Make STOPAT global - this makes
it easier for those folks who like to patch this on the fly as well.

[Keywords]
AUTOBAUD
DATASET
TIMING
SLOW

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
HOSS attention
KS10 only
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		CLOCK1	STOPAT
703		DZINT	DZQADD


[End of MCO 11348]
MCO: 11350		Name: KBY		Date:  6-Jul-84:15:26:36


[Symptom]
Now that we're going to support the CI disks, there's too
much free disk space per square inch of machine room.

[Diagnosis]
Since, as we learned back in MCO 11298, entropy must always
increase on a universal scale, it's time to use up the disk space.

[Cure]
Teach the swapper to use 21-bit (including unit #) disk addresses.
This divides into 3 bits of unit # and 18 bits of unit-relative address.
Changes of interest to others:

1.  PM.ZER is now 21 bits wide, no longer less than a half word.
2.  The address portion of page map entries, PM.ADR, is now no longer
    less than a half word.
3.  Symbol PM.NAD refers to all bits of a page map entry not part of the
    address field.
4.  Internal format of an IPCF packet header has been changed; the user's
    format remains unchanged.  The new internal format uses word .IPCFI
    instead of .IPCFP (although when mapping from the internal to the
    external format, it is the same word relative to the beginning of the
    packet header).  The "disk address" bit, formerly bit 18, is now
    bit zero.  The length, formerly the high order 18 bits is now 10
    bits starting at bit 1.  The address portion is the low order 21 bits.
    Byte pointers PKLNxx where "xx" is the AC name to index off of (base
    address of the packet header) will load the length.  Length of 1000
    is now used internally for page mode packets (along with the IP.CFV bit)
    instead of -1.
5.  JBT table rearrangement:  NZSICN and NZSSCN (# of non-zero section
    maps desired and have, respectively) are now six bit fields in the left
    half of JBTIMI.  JBTSWP is now 36 bits wide, right justified, except
    that the fragmentation bit is still the sign bit.

[Keywords]
BIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	225	VMSER	CAST,OF,1000S
		SWPSER	FXSAT1,SWPSPC,OTHERS
		FILFND	SENDFD
		COMCON
		UUOCON
		SCHED1
		COMMON
		PFH
		IPCSER
		COMMOD
		SEGCON
		S


[End of MCO 11350]
MCO: 11357		Name: RDH		Date:  9-Jul-84:21:13:57


[Symptom]

MCO 11330 didn't quite go far enough - add DSKCHR values for returning
unit hung error counts:

	.DCNHG		Transfer-hung errors, not recoverable
	.DCTHG		Transfer-hung errors
	.DCPHG		Position-hung errors
	.DCSHG		Software-hung errors

[Diagnosis]

[Cure]

[Keywords]
DSKCHR

[Related MCOs]
11330

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	225	FILFND	ARGTAB
		UUOSYM	DSKCHR


[End of MCO 11357]
MCO: 11358		Name: JMF		Date: 10-Jul-84:06:24:12


[Symptom]
Performance problem.

[Diagnosis]
"KEEP ME" bit doesn't get turned on in section 0 and 1 map pointers.

[Cure]
Turn it on.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A	11	COMMON	SYSTR3
703	225
MCA	


[End of MCO 11358]
MCO: 11363		Name: TARL		Date: 14-Jul-84:07:33:43


[Symptom]
File is left in FILE BEING MODIFIED state when a get 
of PFH fails and the file is open on channel zero.

[Diagnosis]
GETXXX pushes USRJDA+0 and then uses channel zero for it's
own purposes. Unfortunatley, there are many ways that GETXXX can
bomb out that do not return via POPJ, so we never restore USRJDA+0.
Even RESET and CORE 0 never fix this, because there are no pointers
to the DDB, and thus to the access tables.

[Cure]
Don't just push and pop USRJDA+0. Allocate an extended channel,
copy USRJDA+0 to this place, and then move it back when we are done.
This way, when MERGE blows up, the pointer to the DDB is left in
a channel that IOALL can blow away.

Note that in 7.03 this is less critical, since we no longer read
in a PFH.EXE - The only thing we use GETXXX for is getting VMDDT.

[Keywords]
GETXXX
FILE BEING MODIFIED
?1P OF CORE NEEDED

[Related MCOs]
None

[Related SPRs]
32633, 32452

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	226	VMSER	GETXXX,GETXXC
702A	
701B	


[End of MCO 11363]
MCO: 11369		Name: DPM		Date: 24-Jul-84:03:54:24


[Symptom]
New: Add PID for [SYSTEM]CATALOG, the STRLST processor.
This MCO adds a couple of new items in UUOSYM:

	%SICAT==16,,126	;PID OF [SYSTEM]CATALOG
	.IPCPV==16	;SYSTEM PID INDEX FOR THE CATALOG

[Diagnosis]

[Cure]

[Keywords]
IPCF
STRLST

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	COMMON	%SICAT
		UUOSYM	%SICAT,.IPCPV


[End of MCO 11369]
MCO: 11370		Name: RCB		Date: 24-Jul-84:06:37:07


[Symptom]
Too hard to deal with 30-bit addresses in UUO arguments.

[Diagnosis]
No handy routines to fetch them.

[Cure]
Add GETEWD, GETEW1, SSPCS, STPCS, and SXPCS.  For examples of their use,
see the code in UIPCFM in IPCSER.

[Keywords]
User extended addresses

[Related MCOs]
11371, 11372

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	DATMAN	GETWED,GETEW1,SXPCS
		KLSER	SSPCS,STPCS


[End of MCO 11370]
MCO: 11371		Name: RCB		Date: 24-Jul-84:06:37:18


[Symptom]
PID quota enforcement in [SYSTEM]INFO is useless, but some form of quota
enforcement is desired.

[Diagnosis]
[SYSTEM]INFO is the wrong place for the quota and its enforcement.

[Cure]
Move it into IPCSER.  The CREATE function to [SYSTEM]IPCC is now unprivileged,
and will check against the invoker's PID quota, unless a privileged message was
sent.  Not checking on a privileged send makes this case compatible with the
old scheme of PID creation.

This also adds the [SYSTEM]IPCC functions .IPCQS and .IPCQR to set and read
the PID quota.

[Keywords]
PID quota
[SYSTEM]INFO

[Related MCOs]
11372, 11370

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	IPCSER	BADCOD,CREATE,SPQTA,RPQTA
		COMMON	%CNIPD
		UUOSYM	.IPCQS,.IPCQR


[End of MCO 11371]
MCO: 11373		Name: JMF		Date: 24-Jul-84:06:55:57


[Symptom]
Virtual memory performance isn't as good as it could be.

[Diagnosis]
Too much paging I/O and when paging I/O is done ,its not as 
efficient as it could be.

[Cure]
Implement an in-core cache of "paged out" pages including IPCF pages.
There are 4 new linked lists in PAGTAB. Two are lists of pages which have
been "paged out" via the PAGE. UUO, but have yet to be written to the
swapping space (one keeps track of IPCF pages and pages to go to the slow
swapping space, the other keeps track of normal paged out pages). The third
list is to keep track of pages which are being written to the disk and pages
migrate from the first two lists to this list when core is needed. Swapping
space is allocated contigously so the swap out is fast and before the
swapout begins, disk addresses are moved to the maps of all jobs which
have "paged out" pages. When the I/O completes, the pages are moved to the
fourth list. If core is needed, allocation can be done from the fourth list,
but only if there are no pages on the free core list.

When a "page in" is requested via a PAGE. UUO, if the page in question is
on the first two or the fourth list, it is simply given back to the job
giving back swapping space if necessary. If the page is on the I/O in progress
list, the job must block until the I/O completes.

[Keywords]
page cache

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	S
		COMMON
		CORE1
		SEGCON
		SCHED1
		VMSER


[End of MCO 11373]
MCO: 11375		Name: NT		Date: 26-Jul-84:11:08:20


[Symptom]
PTYs go into TO wait state at end of page (sometimes.)

[Diagnosis]
MCO 11161 didn't take PTYs into account when it checked
to see if the page counter should be cleared.

[Cure]
If no characters have to be output, clear the line counter
always. If there are characters to be output, check to see if the
terminal is a PTY and if it is, always clear the page counter.

[Keywords]
TERMINAL PTY PAGE STOP

[Related MCOs]
11161

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		SCNSER	TWAITL
703	


[End of MCO 11375]
MCO: 11376		Name: CJA		Date: 27-Jul-84:14:47:25


[Symptom]
     When a file is RENAMEd or updated, it is impossible  to
change the existing account string for the file, even from a
privileged program.  This is contrary to documentation.

[Diagnosis]
     No code to do so.

[Cure]
     Add code to enable a privileged user to specify  a  new
account  string on an extended RENAME or update operation on
a file.  If no account string is specified, the existing one
will be unchanged.

[Keywords]
ACCOUNT
RENAME

[Related MCOs]
None

[Related SPRs]
31293

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		FILUUO	SETVAL
703	


[End of MCO 11376]
MCO: 11378		Name: DPM		Date: 30-Jul-84:01:34:12


[Symptom]
Customer QUEUE. UUO functions are rejected by IPCSER.

[Diagnosis]
Incorrect range checking.

[Cure]
CAIL T1,.GTQFT##-.GTQFC##  ->  CAML T1,[.GTQFT##-.GTQFC##]

[Keywords]
QUEUE. UUO
CUSTOMER FUNCTION

[Related MCOs]
None

[Related SPRs]
34631

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	230	IPCSER	GLXINF

702A	


[End of MCO 11378]
MCO: 11379		Name: DPM		Date: 30-Jul-84:01:58:59


[Symptom]
New:  Add QUEUE. UUO block types to support the Event Queue
stuff in QUASAR.  New symbols are:

 .QBEVT==55	;EVENT TYPE (SEE QSRMAC)
	.QBEV0==0	;EVENT TYPE CODE

 .QBREP==56	;REPEAT FLAGS FOR EVENTS
	.QBRP0==0	;REPEAT FLAG WORD
		QB.NOW==1B0	;NOW
		QB.DLY==1B1	;DAILY
		QB.WKY==1B2	;WEEKLY
		QB.TIM==1B3	;USE SPECIFIED TIME
		QB.DAY==0,,-1	;DAY OF THE WEEK
				;WEDNESDAY = 0, THURSDAY = 1, ETC.

[Diagnosis]

[Cure]

[Keywords]
EVENT QUEUE
QUEUE. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	230	UUOSYM	QUEUE.


[End of MCO 11379]
MCO: 11380		Name: FAIRBANKS		Date: 30-Jul-84:16:55:19


[Symptom]
BUILDING AN ANF FRONT END WITH NLINES=0 CAUSES UNDEFINED
SYMBOL LB.SCB IN MODULE DNDCMP.P11

[Diagnosis]
NTLINES CONDITIONAL DOESN'T INCLUDE ENOUGH

[Cure]
MAKE THE CONDITIONAL INCLUDE ROUTINE DDDGIV

[Keywords]
LB.SCB
NLINES

[Related MCOs]
None

[Related SPRs]
34793

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		DNDCMP	DDDGIV
702A	
701B	


[End of MCO 11380]
MCO: 11381		Name: FAIRBANKS		Date: 30-Jul-84:17:04:46


[Symptom]
MONITOR WILL NOT ASSEMBLE WITH FTCMSR=0

[Diagnosis]
MISSING A FEATURE TEST IN NETSER

[Cure]
ADD CONDITIONALS AROUND %NTBYO AND %NTBYI CODE

[Keywords]
FTCMSR
%NTBYO
%NTBYI

[Related MCOs]
None

[Related SPRs]
32517

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		NETSER	NTSC.O
702A		NETSER	NTSC.I
701B	


[End of MCO 11381]
MCO: 11383		Name: RCB		Date: 31-Jul-84:04:20:14


[Symptom]
Add the rest of the IPCFM. UUO:
Enable the code to talk to INFO as well as IPCC.  There is no INFO that
understands this currently, but that's coming.

Updated description is as follows:


CALLI 217		IPCFM. UUO

Call:		XMOVEI	ac,addr
		IPCFM.	ac,
		  <error return>
		<success return>

	addr/	flags!dest,,len
	  +1/	pointer to message block
	  +2/	optional in-your-behalf PID
	+3 and beyond: Reserved

word 0	.IPCMF	Flags and length.

flags:
1B0	IP.CMP	Privileged invoking privileges.  If the job does
		not have IPCF privileges enabled, this bit will be
		ignored.

1B1	IP.CMI	Indirect sender's PID.  Word 2 (.IPCMI) contains the address
		(30-bit or IFIW) of the PID to use, rather than the PID itself.
		See .IPCMI for more information.

1B2-1B14 --	Reserved.  Must be zero.

dest field:
7B17	IP.CMD	Destination process id.  May be any of the following:
			(0)	Default INFO process
			.IPCCC	[SYSTEM]IPCC
			.IPCCF	[SYSTEM]INFO
			.IPCCP	[local]INFO
		Any other value in this field will result in the IPCUF% error.

len field:
777777	IP.CML	Total length of argument block, including this word.
		May be 2 or 3.  Any other value in this field will result
		in the IPCUF% error.

word 1	.IPCMP	Pointer to message block (detailed below).  This pointer
		can be either a 30-bit address or an IFIW.  If it is an IFIW,
		it is evaluated in the same section as that of the argument
		block itself (i.e., the same section as that from which it
		was fetched). No indexing or indirection allowed.

word 2	.IPCMI	In-your-behalf word.  PID on whose behalf to perform this
		operation, or 0 to do it for the user's own job.  If this
		value is specified, then either the PID given must belong
		to the user's current JCH, or the user must have IPCF
		privileges enabled.  If the PID belongs to someone else,
		and the user does not have IPCF privileges enabled, the
		IPCPI% error will result.


The message block for [SYSTEM]IPCC:

word 0	.IPCS0	xwd length,function
		where length includes this word, and function is
		the [SYSTEM]IPCC function desired to have performed.

word 1	.IPCS1	As documented for [SYSTEM]IPCC data packets.
word 2	.IPCS2
word 3	.IPCS3


The message block for [SYSTEM]INFO:

word 0	.IPCI0	xwd length,function
		where length includes this word, and function is
		the [SYSTEM]INFO function desired to have performed.

word 1	.IPCI1	As documented for [SYSTEM]INFO data packets.
word 2	.IPCI2
word 3	.IPCI3


Any data that the system process would return in a packet for the same function
will be returned in the user's message block.

Any of the errors that can be returned from the process, either on the send
or in the returned packet, can be returned by this UUO (with the exception of
those relating to page mode).  Any error code returned by this UUO will be
returned in the user's AC.

[Diagnosis]

[Cure]

[Keywords]
IPCFM
[SYSTEM]INFO

[Related MCOs]
11372

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	230	IPCSER	UIPCFM
		UUOSYM	IPCFM.


[End of MCO 11383]
MCO: 11386		Name: CJA		Date:  3-Aug-84:13:05:13


[Symptom]

"?Job capacity exceeded" message appears when there are still
plenty of job slots left.

[Diagnosis]
This message is printed for three different reasons:

1) The maximum job capacity has really been exceeded.
2) There are no free TTY DDBs to allocate to a new job.
3) There is not enough free core to allocate a PDB for a new job.

Case 2) can occur rapidly if there are a lot of slave TTYs on
the system.

[Cure]
Append more informative error messages in cases 2 and 3

"?Job capacity exceeded (No free TTY DDBs)"
"?Job capacity exceeded (No core for a PDB)"

A naive user can either ignore extra info or tell his system programmer
what the specific error message is.

Redefine parameter TTXTRA to include the number of slave lines which
the monitor dedicates to DTEs on a KL10.  This will increase the
number of TTY DDBs available.

[Keywords]
NEWJOB
LOGIN

[Related MCOs]
None

[Related SPRs]
32651

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		COMCON	NEWJER
703		COMMON
		COMDEV


[End of MCO 11386]
MCO: 11387		Name: TARL		Date:  3-Aug-84:17:08:28


[Symptom]
Part of NOTICE.TXT gets typed on running a program
after ^C out of INITIA.

[Diagnosis]
INITIA does asynch i/o to TTY and JS.NTO gets lit. WHen
we ^C, the SCNSER chunks get cleared (CLRBFO type) but there
is still part of the incomplete TTY buffer left to be output.

[Cure]
Clear JS.NTO in TSETBO to indicate that we toss the current
TTY buffer when we do a CLRBFO.

[Keywords]
CLRBFO
TSETBO
INII

[Related MCOs]
None

[Related SPRs]
33994

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		SCNSER	TSETB2
703	231


[End of MCO 11387]
MCO: 11390		Name: PMV		Date:  6-Aug-84:16:38:33


[Symptom]
1) Cannot clear the aborted status of a lock by using the ENQ. modify function.

2) Cannot change the status of a lock from shared to exclusive by using the ENQ.
   modify function, even when the user is the only sharer of a lock.

3) [1,2] jobs requesting shared global locks instead get exclusive global locks.

[Diagnosis]
1) The documentation clearly states that the aborted status of a lock
   can be cleared by issuing an ENQ. modify function with EQ.FAB clear,
   but the code also clearly never implemented this case.

2) For the second case, the documentation states this is possible, and
   there is much code to support it.  However, this code must never have 
   been tested, because it cannot possibly work as coded.

3) The third case is reasonably obscure.  It requires having a [1,2] job that
   doesn't have the JP.ENQ privilege.  The subroutine that causes the problem
   is documented as saving all the ACs, but it calls PRVBIT which normally
   will preserve all ACs, except in this very case.

[Cure]
1) Add code to handle clearing the abort status with an ENQ. modify function.

2) Add missing instruction to skip over the lock block in a queue block chain.

3) Call SAVT to preserve all the temp ACs, before calling PRVBIT.

[Keywords]
ENQ.
 .ENQMA
Aborted locks

[Related MCOs]
None

[Related SPRs]
31862

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	QUESER	DOFC3F,CKONL1,OKNDR1
702A	
701B	


[End of MCO 11390]
MCO: 11391		Name: WXD/DF/CJA		Date:  7-Aug-84:06:07:28


[Symptom]
New:  Add support for the KLNI and LAT.  Upgrade DECnet
sources to more recent TOPS-20 sources.

[Diagnosis]
Yes

[Cure]
Yes

[Keywords]
DECnet Phase IV
KLNI
LAT

[Related MCOs]
11278

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	SCPAR	LOTS,OF,PLACES
		D36PAR
		NIPAR
		D36COM
		LLINKS
		NTMAN
		SCMUUO
		NETDEV
		MACSYM
		CORE1
		ONCE
		CLOCK1
		NISRV
		COMNET
		SCLINK
		DNADLL
		SYSINI
		ROUTER
		DTESER
		LATSRV
		MONGEN
		PHYKNI
		COMMON
		COMDEV


[End of MCO 11391]
MCO: 11392		Name: FAIRBANKS		Date:  8-Aug-84:10:01:03


[Symptom]
DATASET LINES INTO AN ANF FRONT END CAN GET HUNG UP
RIGHT AWAY.

[Diagnosis]
IF A FRAMING ERROR OCCURS BEFORE MODEM CONTROL STATES ARE
COMPLETELY DONE, THE CONTROL STATES CAN BECOME CONFUSED AND THE
STATE BECOMES AUTOBAUD. A SUBSEQUENT <CR> BY THE USER SUCCEEDS IN
MAKING A CONNECTION TO THE 10. THE DEC-10 STATES ARE NOT CLEVER
OR FLEXIBLE AT THIS POINT AND SUBSEQUENT MODEM CONTROL STATUSES
CAUSE HANG-UP.

[Cure]
IGNORE FRAMING ERRORS UNLESS THE LINE IS IN "RUNNING
UNCONNECTED" THROUGH "RUNNING CONNECTED" MODE. THE CHECK FOR
THIS IS ALREADY THERE BUT IT IS TOO FAR DOWN IN THE TTY
INTERRUPT CODE. MOVE IT UP.

[Keywords]
AUTOBAUD
MODEM
DN8X

[Related MCOs]
None

[Related SPRs]
34219

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		DNTTY	TTDHIN
702A	
703	


[End of MCO 11392]
MCO: 11395		Name: JMF		Date: 10-Aug-84:05:28:18


[Symptom]
User ACs get clobbered if an E, D, or VERSION command requires that
a page be paged in or have access allowed set for it.

[Diagnosis]
Previous job run ACs get stored when the command completes.

[Cure]
Save/restore user ACs in/from .USUAC.

[Keywords]
user ACs

[Related MCOs]
None

[Related SPRs]
34782

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	COMCON	PAGIA
702A	


[End of MCO 11395]
MCO: 11396		Name: SMW		Date: 10-Aug-84:19:01:45


[Symptom]
     In the sequence OPEN-LOOKUP-USETI, the USETI takes  the
block number as being relative to the file.  In the sequence
OPEN-USETI, however, the block  number  is  taken  as  being
relative  to  the  structure  (super I/O).  The question is,
what should the sequence OPEN-ENTER-USETI do?  (presently it
does super I/O).

[Diagnosis]
     This is not the expected sequence.  The  user  probably
made  a  mistake,  and  it  would  be  dangerous  to let him
continue.

[Cure]
     Make the sequence OPEN-ENTER-USETI be illegal.  It will
return an IO.IMP error.  Likewise, OPEN-LOOKUP-USETO will be
illegal.

[Keywords]
SUPER I/O

[Related MCOs]
None

[Related SPRs]
34657

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		FILIO	SETSUP
702A	
703	


[End of MCO 11396]
MCO: 11397		Name: TL		Date: 12-Aug-84:13:46:24


[Symptom]
Too much funny space used for spool parameter messages.  QUASAR
crashes.

[Diagnosis]
IPCSER computes a value for the length of a SPB which is one word
too long.  This causes QUASAR's template not to match.  If a customer
adds a word to the SPB, the only rational place is at the end of the standard
block - Since the format must match SPPRM.  Result is first customer word
gets garbage.

[Cure]
+1 becomes +0

[Keywords]
QUASAR
SPB

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		IPCSER	SPBMAX
702A	


[End of MCO 11397]
MCO: 11398		Name: TARL		Date: 13-Aug-84:01:15:02


[Symptom]
No room for symbol table.

[Diagnosis]
Let's move directly onto the cure.

[Cure]
Move funny space back to below the monitor hiseg, so that the
symbol table can overlap funny space again. After doing this, we have
about 12 pages left for symbol table. The current origins of funny space
and the hiseg are: FYSORG==334000, HIORG==374000.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	S	FYSORG,HIORG


[End of MCO 11398]
MCO: 11399		Name: TARL		Date: 13-Aug-84:06:50:06


[Symptom]
No gettab for total number of CPU stopcods

[Diagnosis]
Noone ever wanted one.

[Cure]
Add it, %SYNCS==16,,51, total number of CPU stopcodes since reload.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	UUOSYM	%SYNCS
		COMMON	%SYNCS
		ERRCON	CPUSTP


[End of MCO 11399]
MCO: 11400		Name: WXD		Date: 13-Aug-84:16:59:58


[Symptom]
Set up KNILDR to run automatically on FRCLIN when'
the KLNI needs reloading.

[Diagnosis]

[Cure]
This adds KNILDR to PRVTAB, and allows the DIAG. function
to set USRIOT when a job has JACCT.

[Keywords]
KLNI

[Related MCOs]
11391

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	COMDEV
		CLOCK1
		COMMON
		S
		UUOCON
		KNISER


[End of MCO 11400]
MCO: 11402		Name: KBY		Date: 13-Aug-84:20:46:04


[Symptom]
CORE UUO doesn't work in non-zero sections.

[Diagnosis]
VIRCHK doesn't know about sections.

[Cure]
	Make VIRCHK use the PAGE UUO code for all CORE UUOs.  Note that a CORE UUO behaves slightly
different in a non-zero section, since .UPREL, .UPMEM, etc. do not exist.
In particular, all a CORE UUO really guarantees in a non-zero section is
that all pages up to the given address exist.  Pages which existed below
the given address are unaffected, as are pages above the given address.
	In order for this code to work, new functionality has been added
to the .PAGCH (used to be "create high-seg", now "change high-seg") (aka
 .PAGRM) function.  If only one arg is now given (which used to be
illegal), then that arg is the number of pages to delete off of the
end of the high seg.  If a negative number of pages is given, then the
specified number of pages is remapped from the low seg location into
the high seg.

[Keywords]
VIRCHK
CORE UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	VMSER	LOTS,CORE1,SEGCON,COMMON


[End of MCO 11402]
MCO: 11406		Name: RCB		Date: 14-Aug-84:00:00:45


[Symptom]
Too much overhead incurred in trying to find out if a given PID
is in the System PID table.

[Diagnosis]
IPCSER has a routine to do the check, but it won't let us call it.

[Cure]
Add function 23, .IPCLP, to [SYSTEM]IPCC, to look up the PID in argument
1, and return its index in the System PID table in arg 2 (if present).

[Keywords]
System PIDs
GLXIPC
INFO

[Related MCOs]
11383

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	IPCSER	FNDSID


[End of MCO 11406]
MCO: 11407		Name: RCB		Date: 14-Aug-84:00:03:24


[Symptom]
Users can't destroy the PIDs that they can create.

[Diagnosis]
MCO 11371 didn't go far enough in making IPCF usage friendlier.
While creating a PID had its restrictions relaxed, destroying one did not
enjoy the same spirit of freedom.

[Cure]
Remove the privilege restriction from .IPCSZ, and have it check
PID ownership to determine if the unprivileged user can delete the specified
PID.

[Keywords]
INFO

[Related MCOs]
11371, 11383

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	IPCSER	DESTRY


[End of MCO 11407]
MCO: 11412		Name: PMV		Date: 14-Aug-84:01:22:43


[Symptom]
Various problems with eternal and aborted locks:

1)  Eternal locks held by a context go into limbo when the context is
    POPped.  They can never be dequeued by any process, ever.
    The same problem could potentially happen with a LOGOUT UUO.

2)  Eternal locks cannot be made uneternal by an ENQ. modify function.

3)  Locks do not become eternal or aborted if the resource requested
    is owned by another context and the request must be queued.

4)  A shared lock that is modified by one owner to become eternal
    makes the lock eternal for all other sharers even though the
    sharers never originally requested an eternal lock.

5)  If contexts are queued for a resource, and the current owner
    of the lock aborts the resource, the contexts queued for the
    resource never get informed that the resource was aborted.

[Diagnosis]
Eternal and aborted locks were never completely thought out.

[Cure]
1)  We could disallow popping a context that holds eternal locks,
    but this adds unnecessary clutter to CTXSER.  Instead, give
    the eternal locks to whichever context we are popping to.  This
    still satisfies the requirement that eternal locks never go away.
    If we ever get as far as a LOGOUT UUO, just delete the locks.

2)  Change the ENQ. modify function so that a request with EQ.FEL
    clear will now make a lock not eternal.

3)  Move the eternal and abort flags from the lock block to the queue
    block.  This will insure that the flags are associated with the
    current owner of the resource.

4)  Only consider the lock to be eternal for the context that 
    requested it that way.

5)  When a resource is aborted, wake up all waiters for the resource.
    The waiters then check to see if they were woken up because the
    resource they were waiting for was aborted.  If so, return ENQAB%.
    In the case that the waiters were expecting a PSI interrupt, give
    them the interrupt, but set the sign bit in the status word to
    indicate that at least one of the context requests was aborted.

[Keywords]
ENQ/DEQ
Eternal locks
Aborted locks

[Related MCOs]
11409

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	COMCON	JOBKL
		COMMON	ENQRST
		CTXSER	CTXPOP
		DATMAN	CREPD1
		PSISER	PSICND,GETQUE
		QUESER	LOTS


[End of MCO 11412]
MCO: 11414		Name: TARL		Date: 14-Aug-84:05:47:25


[Symptom]
Mco 11385 didn't go far enough.

[Diagnosis]
BUGINFs still do typeout in secondary protocol with
PI's off, which causes all -20F terminals to make a terrible
racket. It also causes our CI disks to go offline when
stephen gets tired of his terminal going bonkers.

[Cure]
In the definition for BUG., make BUGINF call SICK instead
of DIE, which will put stuff in normal SCNSER tty chunks for
OPR0. The format this stuff will type out on the CTY is:
	%% BUGINF xxxxxx FOO: 0,0    BAR: 1,1

where FOO and BAR are the additional data fields (if any). This
still calls DAEMON for a stopcode, and (since DAEMON uses them)
still stores the ACs in .CPCAC.

[Keywords]
BUGINF
Primary protocol
PI's off

[Related MCOs]
11385

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	ERRCON	SICK
		S	BUG.


[End of MCO 11414]
MCO: 11420		Name: DPM		Date: 20-Aug-84:07:02:04


[Symptom]
ONCCOM mechanism to request I/O on non-boot CPUs during once-only
doesn't work.

[Diagnosis]
For reasons unknown, the AC loop used by CPUs to wait for the boot
CPU to start was changed to use the once-only AC loop.  Non-boot
CPUs spin their wheels waiting to autoconfigure.  By the time ONCMOD
runs, it expects AUTCON to have finished.  When ONCMOD AOS'ed the
non-boot's OK word, it ran AUTCON instead.  Hence, a bunch of new
UDBs were built, but their structures were never mounted.

[Cure]
Change to use the correct AC loop.

[Keywords]
ONCCOM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	COMMON	SPRINI


[End of MCO 11420]
MCO: 11422		Name: LWS		Date: 20-Aug-84:07:33:01


[Symptom]
New: Need another QUEUE. UUO arg block for EVENT queue
entry creation. New arg block is .QBESW, Event switch block.
 .QBESW contains 2 data words, .QBESD and .QBESI, event dependent
and event independent switch value words , respectively.

[Diagnosis]

[Cure]

[Keywords]
Event queue

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	UUOSYM	.QBREP


[End of MCO 11422]
MCO: 11423		Name: CJA		Date: 20-Aug-84:15:32:00


[Symptom]
LAT-10 doesn't have latest TOPS-20 changes

[Diagnosis]
Yes

[Cure]
Merge latest stuff in.

[Keywords]
LATSRV

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		LATSRV


[End of MCO 11423]
MCO: 11425		Name: KBY		Date: 20-Aug-84:17:02:33


[Symptom]
Stopcode IME in AUTCON.

[Diagnosis]
Trying to build a 0 length KDB with 1000+ words in it.

[Cure]
Don't build zero length KDBs.

[Keywords]
IME
autcon

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	AUTCON	BLDKDB

702A		AUTCON	KDB1


[End of MCO 11425]
MCO: 11438		Name: SMW		Date: 28-Aug-84:00:53:15


[Symptom]
     A PATH UUO of device SSL:  returns your default PPN but
doesn't tell you the SFD.

[Diagnosis]
     Device SSL:  should work just  like  device  ALL:.   It
should  return  the  default path (including SFDs) but leave
PT.IPP zero (i.e.  no implied path).

[Cure]
     Make SSL:  work like ALL:.

[Keywords]
SSL
SFD

[Related MCOs]
9813

[Related SPRs]
31696

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		FILUUO	PTHU25
703	


[End of MCO 11438]
MCO: 11439		Name: DPM		Date: 28-Aug-84:03:11:39


[Symptom]
Stopcode UOF when RAX units come online.

[Diagnosis]
When a media format error occurs, we stopcode instead of
ignoring the unit in question.

[Cure]
Yes.

[Keywords]
CI DISKS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	RAXKON	RAXUO1

702A	


[End of MCO 11439]
MCO: 11441		Name: RCB		Date: 28-Aug-84:03:23:49


[Symptom]
Auto-push commands are not available to users via the CMAND. UUO.

[Diagnosis]
Missing code.

[Cure]
Add code.
This adds bit CM.AUT to the .CMFLG word of a CMAND. argument block.
The impact of this bit is documented under the /AUTOPUSH switch in
DECLAR.HLP.

[Keywords]
AUTO-PUSH COMMANDS
DECLARED COMMANDS

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	COMMON	APPFLG
		COMCON	FNDABV,COM11C,COM1E
		UUOSYM	CM.AUT
		UUOCON	CMAND


[End of MCO 11441]
MCO: 11443		Name: RCB		Date: 28-Aug-84:03:39:56


[Symptom]
New: Add the M.RCMP Remote Command Monitor Paranoia feature.

[Diagnosis]

[Cure]

[Keywords]
Security
remote access

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	COMMON	NAMES,SNAMES,M.RCMP
		COMCON	LOGPLE
		UUOSYM	%CNST2


[End of MCO 11443]
MCO: 11444		Name: RCB		Date: 28-Aug-84:05:30:41


[Symptom]
Extended addressing support for the PIINI. UUO was broken by MCO 11237.

[Diagnosis]
Yes.

[Cure]
Fix it.  Introduce error codes for the PIINI. UUO:
	PIIBC%, Illegal bit or section number given
	PIADC%, Address check
	PINFS%, No monitor free space.
These error codes, plus the ability to give 30-bit vector addresses or
IFIW pointers, should be good enough for most people.  See the section on
the software interrupt system in the user-mode extended addressing spec.

[Keywords]
Extended addressing
PI system

[Related MCOs]
11237

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	PSISER	PIINI
		S	PS.IEA
		UUOSYM	PS.IEA,PS.UCS


[End of MCO 11444]
MCO: 11448		Name: RDH		Date: 31-Aug-84:00:29:31


[Symptom]

1)      If a remote node crashes (or the path to the  remote  node  is
othewise  lost)  whilst  a  CONNECT  to  that node is pending then the
program or job that issued the CONNECT (e.g.,  OPEN  monitor  call  or
ASSIGN monitor command) is stuck in network Event Wait.

2)      Programs using PSI trapping  are  not  informed  when  network
devices (especially TSK devices) go "offline" due to the remote node's
having crashed (or otherwise become inaccessible).


[Diagnosis]

1)      The code to handle "Node Down" in NETSER was  overly  paranoid
about  not  NETWAKing a job when it shouldn't.  In particular, for the
case of a CONNECT awaiting confirmation, the DDB will NOT have  either
ASSCON  or ASSPRG set for the device.  These flags won't get set until
NETSER has successfully connected the device and returned it to UUOCON
for active use.

2)      This is essentially the same as "1" above, aggravated  by  the
general  lack  of  consistency of handling of this case by the various
device-type-specific service routines in NETDEV.


[Cure]

Both problems  are  fixed  via  a  general  cleanup  of  the  "Network
Disconnect"  and  "Node  Down"  processing.

This fix implements a new extended I/O status  code  IONDD%  which  is
returned when a network device initiates a disconnect (rather than the
owning job).  This error code distinguishes a  "Node  Down"  condition
(extended  error  code  IONND%) from a disconnecting device (currently
only TSK can initiate a disconnect).


[Keywords]
EW
PSI

[Related MCOs]
None

[Related SPRs]
31123, 34674

[MCO status]
Checked

[MCO attributes]
Documentation change
PCO required
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		S
		NETSER
		NETDEV
		RDXSER
		TSKSER

703	235	S
		NETSER
		NETDEV


[End of MCO 11448]
MCO: 11451		Name: RCB		Date:  4-Sep-84:03:09:53


[Symptom]
CONFIG needs help.

[Diagnosis]
Too hard to figure out what CPUs own which devices and when I/O is complete
for the system as a whole.

[Cure]
Add two new RECON. functions:
	.RCCPU		Return CPU accessibility mask
		Call:	MOVE	ac,[.RCCPU,,addr]
		addr/	2
		addr+1/	SIXBIT/device/

		Return:	ac/ Bit mask (1B35=CPU0, etc.)


	.RCIOW		Wait for active I/O to finish on the system
		Call:	MOVSI	ac,.RCIOW

		Return:	After I/O is complete

Both of the returns mentioned above are the skip returns.  Normal failure
returns also exist, with the usual RECON. error codes possible.

[Keywords]
CONFIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	UUOCON	RECON
		UUOSYM	.RCMOF


[End of MCO 11451]
MCO: 11456		Name: DPM		Date:  4-Sep-84:07:01:01


[Symptom]
Stopcode ALW

[Diagnosis]
JCHs not storred in the DDBs

[Cure]
Yes

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	QUESER	GETLK2,ENQCLS


[End of MCO 11456]
MCO: 11459		Name: DPM		Date:  4-Sep-84:07:02:54


[Symptom]
Context WATCH stuff piggybacked on WATCH VERSION.

[Diagnosis]
Yes

[Cure]
Make SET WATCH CONTEXT as described by the spec.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	COMCON	WCHTAB
		CTXSER	WCHCTX
		S	JW.WCX
		UUOSYM	JW.WCX


[End of MCO 11459]
MCO: 11461		Name: DPM		Date:  4-Sep-84:07:07:35


[Symptom]
DDB cleanup following a swap read error, or similar
catastrophic condition doesn't release an MPX DDB
correctly.

[Diagnosis]
Bypassing the checks for a dead CPU.

[Cure]
Yes.

[Keywords]
MPX

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	ERRCON	ZAPUSR
		UUOCON	RELEAS


[End of MCO 11461]
MCO: 11468		Name: TL		Date: 10-Sep-84:16:48:39


[Symptom]
CMU on KS after removing once-only structure

[Diagnosis]
CHKTAL checks for free pages starting at SYSSIZ.
ONCE-only core is below syssiz.  MCO 11182 allows this core
to become free, as intended.

[Cure]
Don't.  Check all memory instead.

[Keywords]
KS
CMU

[Related MCOs]
11182

[Related SPRs]
34805

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		SEGCON	CHKTAL

703		SEGCON	CHKTAL


[End of MCO 11468]
MCO: 11474		Name: RDH		Date: 13-Sep-84:01:48:45


[Symptom]

IME using DCP

[Diagnosis]

OneWordGlobalBytePointeritis

[Cure]

Revamp EBI2BI routine in NETSER

[Keywords]
IME
OWGBP


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	NETSER	EBI2BI

702A		NETSER	EBI2BI


[End of MCO 11474]
MCO: 11477		Name: DPM		Date: 17-Sep-84:06:20:30


[Symptom]
DN60 On CPU1 doesn't:
1. Clobbering the LH of FEKUNI which contains the CPU number.
2. Using FEKUNI as a full word address when only the RH is the FEK.

[Diagnosis]
Yes.

[Cure]
Yes.

[Keywords]
DN60

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	D60SER	D60SUP
		D6DINT	LOTS
		D6SINT	LOTS


[End of MCO 11477]
MCO: 11478		Name: DPM		Date: 17-Sep-84:00:29:43


[Symptom]
CTX. UUO address checking doesn't work right.

[Diagnosis]
Should call TRNGE, but that halts the job if a bad address is
given.  The CTX. UUO has an address check error code and I'd
like to use it.

[Cure]
Add a new UUO level address checking routine called ARNGE. It
takes two arguments:  T1 has a user specified address and T2
a length.  The address can be a full 30-bits or an IFIW word.
ARNGE has three returns:

	1. CPOPJ if any address in the range is illegal
	   (i.e. non-existant, bad section number, etc.).
	2. CPOPJ1 if the address is OK but illegal for I/O.
	3. CPOPJ2 if the address is OK.

Addresses are allowed to cross section boundries only if a global
address was given.  Attempts to span more than one section with
an IFIW will give the address check return.

The range of addresses is considered illegal for I/O if any page
is not marked as writeable in a page map.  Also, if any section is
mapped to section zero and the target address is less then JOBPFI,
the range of addresses will be considered illegal for I/O.

ARNGE preserves PCS and all ACs.  It resides in DATMAN.	  Eventually,
all calls to LRNGE and TRNGE should be replaced by calls to ARNGE so
that UUOs which are capable of returning address check error codes
may do so instead of halting the job as is currently done.  ARNGE
supersedes routines RRNGE and WRNGE used only by QUESER.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	CTXSER	CTXUUO,MADRCT
		DATMAN	ARNGE


[End of MCO 11478]
MCO: 11479		Name: DPM		Date: 17-Sep-84:00:37:26


[Symptom]
Range checking routines PRNGE and QRNGE don't deal with one word
global byte pointers, plus they call LRNGE and TRNGE which will
halt the user job if a bad address is encounterd.

[Diagnosis]
OWGBPs are new stuff and TRNGE was all we had.

[Cure]
Remove QRNGE altogether.  Teach PRNGE about OWGBPs and have it call
ARNGE.  While we're at it, VMSER is too big and DATMAN isn't big
enough, so move PRNGE into DPRNGE into DATMAN.

[Keywords]
ADDRESS CHECKING

[Related MCOs]
11478

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	DATMAN	PRNGE
		SCNSER	IMGSTR,TYICC6
		VMSER	PRNGE,QRNGE


[End of MCO 11479]
MCO: 11481		Name: FAIRBANKS		Date: 17-Sep-84:16:27:24


[Symptom]
A few ANF-10 MCO's didn't make it into the 7.02 sources.

[Diagnosis]

[Cure]
Put them in now.

[Keywords]
ANF-10
MISSING
MCO'S


[Related MCOs]
11034, 11039, 11046, 11047, 11048, 11055

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	


[End of MCO 11481]
MCO: 11483		Name: DPM		Date: 18-Sep-84:06:36:42


[Symptom]
Wrong density reported for TU78 drives.

[Diagnosis]
T78KON only sets the density in the TUB when the tape is at BOT
since that's the only time it can be set in the hardware.

[Cure]
Read status register on all interrupts.  Set WLK, BOT and
density on all functions except rewind and unload.

[Keywords]
DENSITY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	T78KON	ATTEN2,ATTEN5,NOATT2,T78STS

702A	

701B	


[End of MCO 11483]
MCO: 11484		Name: DPM		Date: 18-Sep-84:07:26:18


[Symptom]
New:  Make HELP command do an auto-push.

[Diagnosis]

[Cure]

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	COMMON	UNQTAB


[End of MCO 11484]
MCO: 11485		Name: RCB		Date: 18-Sep-84:07:58:50


[Symptom]
Echo incorrect.

[Diagnosis]
SCNSER has to guess whether characters have been echoed by front ends.

[Cure]
Make them tell SCNSER whether they've echoed their characters when they
deliver them.  Change CK.NTE (Need-to-echo) to CK.FDE (Front-end-echoed)
and change all references accordingly.

[Keywords]
CTERM
MIC

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	SCNSER
		S	CK.NTE,CK.FDE
		D76INT
		DLSINT
		CCIINT
		NETDEV
		DZINT
		DTESER
		TTDINT


[End of MCO 11485]
MCO: 11486		Name: RCB		Date: 18-Sep-84:08:07:00


[Symptom]
Command prompts often don't appear right, especially after auto-pop.

[Diagnosis]
Nobody ever taught COMCON how to prompt.

[Cure]
Add a routine for COMCON prompting to call to ensure that we're at
the left margin (COMFLM).

[Keywords]
CTXSER

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	SCNSER	COMFLM,METABL
		COMCON	SEND2,PCRLF2,PRPER
		CLOCK1	SAVCT2
		COMMON	UNQTAB,NAMES


[End of MCO 11486]
MCO: 11488		Name: RCB		Date: 18-Sep-84:08:11:20


[Symptom]
"?Illegal UUO at user PC 236" (or the like) doing a RUN UUO via auto-push
or by program when the current core-image was run with /USE:n.

[Diagnosis]
Not resetting .USUSN

[Cure]
Fix the way save/get UUOs handle .USUSN.

[Keywords]
Extended addressing

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	237	COMCON	GETARG
		SEGCON	UGETHI


[End of MCO 11488]
MCO: 11491		Name: DPM		Date: 24-Sep-84:08:43:15


[Symptom]
CTX. UUO doesn't deal with 30-bit addresses and IFIWs
as advertised.

[Diagnosis]
Yes.

[Cure]
Fix.  Requires PUTEWD/PUTEW1 routines to go along with
Spider's GETEWD/GETEW1 routines.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	240	CTXSER	CTXUUO
		DATMAN	PUTEWD,PUTEW1


[End of MCO 11491]
MCO: 11499		Name: NT		Date: 25-Sep-84:00:44:27


[Symptom]
One too many POKE.s in CONFIG.

[Diagnosis]
CONFIG still has to store the MONBTS area address into
MBTCOM with a POKE. when it must suspend the system.

[Cure]
Pass the address into the right half of the AC along with the
suspend function code in the left half. Have UUOCON store the address
into MBTCOM.

[Keywords]
CONFIG SUSPEND MONBTS RECON

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOCON	RCNSPN


[End of MCO 11499]
MCO: 11503		Name: DPM		Date: 25-Sep-84:02:42:14


[Symptom]
1. BUGINF's behavior unpredictable during once-only startup.
2. The word BUGINF is offensive to a true blue person.

[Diagnosis]
1. The contents of .CPTOA is not guaranteed and ONCTYO is not
   an acceptable typeout routine given the varying amounts of
   data that could be produced by a BUGINF.
2. BUGINFs were not designed with TOPS-10 in mind.

[Cure]
1. Preserve .CPTOA over calls to SICK and use CTYWAT for typeout
   if DINITF is non-zero.
2. Change %% BUGINF to %% Event.

[Keywords]
BUGINF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	240	ERRCON	SICK


[End of MCO 11503]
MCO: 11514		Name: KBY		Date:  1-Oct-84:22:55:34


[Symptom]
Stopcode SRO.

[Diagnosis]
There really is a lot of swap space available, but it is all
tied up in dormant high segs.  The actual amount of
swap space immediately available is very small.  The swap space
allocator calls IFDELE, finding it could make enough space available
by deleting dormant segments, causing it to call DODELE.  DODELE's
function is to make available the desired amount of swap space by
deleting dormant high segs.
	Unfortunately DODELE only guarantees that the prerequisite
amount of space is available, and makes no claims as to the
fragmentation pattern of said swap space.  It can happen that
the order in which the space appears is such that the UPT and
MAP pages would be split across a fragment boundary.  This
is not allowed, hence we go to look for more space elsewhere
(at this point it must be immediately available, not tied up
in dormant segments) and find none, hence the SRO.
	An equivalent, although much more unlikely scenario is
that the swap space is so badly fragmented that the UPT and MAP
pages would be split across a fragment boundary no matter what
order the swap space were allocated in.

[Cure]
Remove the restriction on having the UPT and MAP pages
in the same fragment.The disk address of the MAP page is stored
in JBTAD2 (reference by byte pointer JBYMAP)on swap out; the address of the UPT is in JBTSWP as usual.

[Keywords]
SRO
fragmented swap space

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	241	VMSER	THIS,BUSLST
		SWPSER	SWPINT,FND13,FND14,OTHERS
		COMMON	JBYLSA


[End of MCO 11514]
MCO: 11515		Name: KBY		Date:  1-Oct-84:22:58:00


[Symptom]
Stopcode KAF.

[Diagnosis]
Code in VALSEG has a T1 instead of a T2 in chasing
fragment pointers.

[Cure]
T2.

[Keywords]
KAF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	241	SEGCON	VALSG1
702A	


[End of MCO 11515]
MCO: 11516		Name: KBY		Date:  1-Oct-84:23:01:31


[Symptom]
MAPBAK doesn't.

[Diagnosis]
Code at THIS tries to keep the map pointer slot for
 .UPMAP from being clobbered on a swapout, but it doesn't work
if the MAP page is the first page after crossing a cylinder
boundary.

[Cure]
Change MAPBAK to use the SECTAB pointer for section 0 to
reset the .UPMAP pointer; the SECTAB pointer is never translated.

[Keywords]
MAPBAK

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		VMSER	MAPBAK,THIS4
702A	


[End of MCO 11516]
MCO: 11524		Name: JMF		Date:  2-Oct-84:11:25:44


[Symptom]
Typing DDT after an address break occurs executes instructions
after the break instruction until a UUO is executed.

[Diagnosis]
Confusion about whether the PC is in user mode when the DDT
command is executed after the address break occurs. Specifically,it
isn't since it is somewhere in the middle of SEILM.

[Cure]
Clean up the stack and call the scheduler with the user mode
continue PC in .CPPC.

[Keywords]
address break
DDT

[Related MCOs]
None

[Related SPRs]
34866

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	KLSER	SEILM1
702A	


[End of MCO 11524]
MCO: 11528		Name: DPM		Date:  4-Oct-84:02:56:05


[Symptom]
Output to a write-locked tape on a DX20 return IOIMPM+IODERR

[Diagnosis]
DX20s return long word count error plus write-locked error

[Cure]
Ignore channel errors if tape write-locked

[Keywords]
WRITE-LOCKED

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	TD2KON	CHKWLK,DONE

702A	


[End of MCO 11528]
MCO: 11531		Name: TARL		Date:  5-Oct-84:08:39:19


[Symptom]
New command: .SET PASSWORD

This command will run PSWCHG, which will prompt for old and new
passwords, and the request ACTDAE change it.

[Diagnosis]


[Cure]

[Keywords]
password

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	COMMON	PSWCHG


[End of MCO 11531]
MCO: 11536		Name: RDH		Date:  8-Oct-84:20:46:01


[Symptom]

New:	7.03 sources for DN8x.

	There is no new functionality in this MCO, just a slight
rearrangement and cleanup of some code.

	The DNCDDH and DNDM11 modules are now defunct, and are
superseded by (included within) the DNDH11 module, anyone using
DH11-based datasets or DDCMP links should change their control
files accordingly (i.e., remove the DNDM11 and DNCDDH modules).
The DNCDDH and DNDM11 modules are still physically extant, and
if assembled will PRINTX that they shouldn't be assembled any-
more (but will not error/abort the batch job).

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	DNCNFG
		DNCOMM
		DNDH11
		DNCDDH
		DNDM11
		DNDZ11
		DNDEV
		DNTTY


[End of MCO 11536]
MCO: 11539		Name: DPM		Date:  9-Oct-84:06:31:46


[Symptom]
QUEUE. UUO argument fetching doesn't work correctly in a non-zero
section using indexing and indirection.  Likewise, G-floating point
instruction simulation doesn't work either.

[Diagnosis]
Routine CHKIND doesn't know about NZS and global indirect pointers.

[Cure]
Let the hardware resolve addresses.  Add a new routine called EACALC.
It takes a user virtual address of a word containing possible
indirection and indexing.  PCS must be set up.  IFIWs are respected.
A non-skip return indicates the EA calculation referenced an illegal
address.  Skip return have the respolved address in T1.  No legality
checks are made on the address.  GETWRD or PUTWRD will handle that.

[Keywords]
XADDR

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	CLOCK1	CLKINT
		DATMAN	EACALC
		IPCSER	NXTARG
		KLSER	GFLT0


[End of MCO 11539]
MCO: 11540		Name: DPM		Date:  9-Oct-84:06:39:11


[Symptom]
QUEUE. UUO not as useful as it could be.

[Diagnosis]
Immediate arguments are limited to a single word.

[Cure]
Allow multiple immediate arguments.  No length given defaults to
one word for compatibility with old programs.

[Keywords]
QUEUE. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	IPCSER	GLXIN1,GLXIN4,GLXIN5,GLXIN6,NXTARG


[End of MCO 11540]
MCO: 11548		Name: DPM		Date: 16-Oct-84:06:51:11


[Symptom]
Random IPCF screwups using contexts.

[Diagnosis]
No way to interlock a context's data base.  The CX
resource exists but it's system wide.  It's also not
being used right now.

[Cure]
Change the CX resource to be job specific.  This adds
word .PDCTO to the PDB.  It contains the JCH of the job
whose interlock is desired in the LH and the JCH of the
job who owns this job's interlock.  The new CX resource
management behaves like the AU, DA, and IP resources.
That is, code exists to unwind the scheduler, etc.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	243	CTXSER	CTXCXW,CTXCXA,CTXCXF,GETCX,GIVCX,TSTCX,SCDCX


[End of MCO 11548]
MCO: 11564		Name: DPM		Date: 22-Oct-84:06:39:40


[Symptom]
No way to find out the contexts owned by a job.

[Diagnosis]
The spec implied there would be some way, but at the time it
was written, we didn't know what we wanted.

[Cure]
Add function .CTDIR which will return a directory of all contexts
for the specified job in the data buffer.  The first word contains
the job number or -1 for the current job.  The second word is filled
in with the number of words required or returned with directory
information by the monitor.  The third word is the start of the
actual data containing byte-streams of context numbers.  Each stream
represents one context chain and is terminated with a null (since
context #0 is illegal, this is OK).  The byte pointer to the byte
stream can be GETTAB'ed (%CTBDM).

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	COMMON	CTXMAX,CTXBPW
		CTXSER	CTXUUO,DIRECT
		UUOSYM	CTX.,.GTCTX


[End of MCO 11564]
MCO: 11566		Name: KBY		Date: 22-Oct-84:17:03:32


[Symptom]
DET CPUn where the CPU has a unit which is in the ASL and single-ported
to that CPU does the wrong thing.

[Diagnosis]
Never removes the unit from SWPTAB, never does anything about
jobs out there.

[Cure]
Set SWPTAB slot to -1 so it won't be recycled.  New functionality to
the DISK. UUO function .DUSWP (which already exists):  If the specified
unit is zero instead of a unit name, all jobs which have pages on the
the above mentioned units will get ?Swap read error and the SWPTAB
slot will be recycled.

[Keywords]
migrate

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	VMSER	LOTS
		SWPSER
		FILFND
		SCHED1
		SEGCON
		CPNSER


[End of MCO 11566]
MCO: 11567		Name: RDH		Date: 22-Oct-84:22:26:22


[Symptom]

The DN8x TROLL is an unwieldy glutton.

[Diagnosis]

The troll gets hungry based on the bit pattern of the -11's uptime,
so it tends to be hungry about half of the time, thereby feasting
on about half of the hapless NCL messages passing through that -11,
thus starving anyone downwind of him.

[Cure]

Base the troll's appetite on the amount of traffic rather than on a
percentage of elapsed time (i.e., eat every n'th message).

[Keywords]
TROLL

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	DNCNFG
		DNNCL


[End of MCO 11567]
MCO: 11570		Name: DPM		Date: 23-Oct-84:07:39:24


[Symptom]
CTX. UUO not as useful as it could be.

[Diagnosis]
Often, a program will create an inferior context and run a program
at the CCL entry point.  Usually, a TMPCOR file will be written.
Writing TMPCOR prior to issuing the CTX. UUO isn't impossible to do,
but it involves saving any existing file, writing a new one, doing
the CTX. UUO and finally putting the old TMPCOR file back again.  It
would be desirable if the CTX. UUO would write the TMPCOR file in the
new context's funny space, thus eliminating the need for the user
program to save and restore the state of TMPCOR himself.

[Cure]
Add a new bit (CT.TCR) to the CTX. UUO flag word which indicates the
first two words of the data buffer contain the standard TMPCOR UUO two
word pointer to a user buffer to be copied into the inferior context's
funny space.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	CTXSER	UUO1,MDUECT,WRTTCR
		TMPUUO	TMPCTX
		UUOSYM	CT.CTR


[End of MCO 11570]
MCO: 11572		Name: FAIRBANKS		Date: 23-Oct-84:15:12:44


[Symptom]
Incorrect TAB simulation for ANF10 terminals.

[Diagnosis]
The column counter can become negative if the first character
on a line is a backspace. If the next character is a horizontal Tab,
it will be simulated by only one space.

[Cure]
Check the column counter when outputting a backspace. If it
is negative, put it back to zero.

[Keywords]
TABS
BACK
SPACE

[Related MCOs]
None

[Related SPRs]
33187

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		DNTTY	TYPE81
702A	
701B	


[End of MCO 11572]
MCO: 11584		Name: DPM		Date: 29-Oct-84:06:17:20


[Symptom]
No way to tell if all CPUs are running at startup time without
looking at each CTY and seeing if the CPU startup message was
typed.

[Diagnosis]
Yes.

[Cure]
Add a routine in ONCMOD to called ONCCPU to be called prior to the
startup option question.  It will check to see if each CPU is running
and if not output %% CPUn serial# nnn is not running".

[Keywords]
STARTUP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	ONCE	LOADMS
		ONCMOD	ONCCPU


[End of MCO 11584]
MCO: 11586		Name: RCB		Date: 30-Oct-84:01:27:26


[Symptom]
MONGENed datasets don't work anymore.

[Diagnosis]
Broken by changing LINTAB to move LDBs to section 4.

[Cure]
Fix them up.  This removes the TTY dialog of MONGEN, keeping only the
hardware, OPR terminal, and dataset portions.  The parts which have been
kept were moved to appear just before the 'number of jobs' question.

[Keywords]
ttycnf

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	SCNSER	LDBCLR
		COMDEV	DSCTAB,LINTAB,DSDTAB
		COMMON	M.TTY
		MONGEN	ASKJOB,TTYGEN,ETC.


[End of MCO 11586]
MCO: 11589		Name: TL		Date: 30-Oct-84:07:22:29


[Symptom]
KS Networks Don't.
In Particular:
1. Mongen defined line uses get ignored; people run crocks like ANF and 
   DECnet.EXE.
2. DDCMP doesn't meet corporate spec.  Confuses others, and ourself.
3. %Unexpected restart on ... messages unexpectedly restart, producing
   a black, illegible mess.
4. Adjacent node congestion.
5. Adjacent node remote reply timeouts.
6. Sundries.

[Diagnosis]
We're VERY confused.
1. BLTing zero over line user in KDL
2. Was coded to match ANF, almost.  DECnet expects otherwise.
3. When we get a START on a running line, we don't halt DDCMP, we just
   try and restart it.
4. Data messages aren't ACK'd until the other end sends a REP5. We idle REPs on DECnet lines.
6. Of course.

[Cure]
Of course.
1.Don't
2.Change to conform to spec
3.Halt DDCMP before restarting. Eg, send a STRT, not a STACK.
4.Always ACK data messages immediately. Note that this may not be
  a seperate message; it can be piggybacked if the phase of the moon is OK.
5.Don't. ANF will continue to idle REPs, as this is how it determines line
  down. This change causes the line timer to have a "stopped" state, per
  the spec.
6.yes.

[Keywords]
KS
NETWORKS
DECNET
ANF
DDCMP
UNEXPECTED RESTART
Sigh

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KS10 only
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		KDPINT	LOTS

703		KDPINT	LOTS


[End of MCO 11589]
MCO: 11590		Name: NT		Date: 30-Oct-84:14:47:24


[Symptom]
No post dispatch bit reserved for customer in UNQTAB.

[Diagnosis]
Yes.

[Cure]
Add bit PSTCST as bit 11 in UNQTAB.

[Keywords]
CUSTOMER COMMAND DISPATCH BIT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	246	COMMON	NOFLM


[End of MCO 11590]
MCO: 11592		Name: LWS		Date:  1-Nov-84:13:59:42


[Symptom]
Output to a -20F LP20 printer succeeds even though the
VFU is bad and -20F had previously told us of this.

[Diagnosis]
If an idle -20F LP20 printer is powered off and then on,
-20F informs us that the printer is back online (after telling us it went
offline, of course) and that the VFU is not loaded. DLPSER carefully
sets the extended error code and lites the IO.ERR bits in S, but if
IOACT is not lit in S, these bits are never put in DEVIOS(F). Subsequent
OUTs to the printer succeed which can cause LPTSPL's headers and trailer
pages to look quite strange.

[Cure]
Make sure the error status in S gets stored in DEVIOS(F) regardless
of whether or not IOACT is lit in S. At DLPTK3+0, insert a MOVEM S,DEVIOS(S).

[Keywords]
LP20
PRINTER
LP200

[Related MCOs]
None

[Related SPRs]
34952

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	246	DLPSER	DLPTK3

702A	

701B	


[End of MCO 11592]
MCO: 11593		Name: NT/DPM		Date:  2-Nov-84:03:22:44


[Symptom]
RECON. to detach a disk unit doesn't work for seconday ports.

[Diagnosis]
When searching for the unit in DEVPHY, secondary ports are
ignored.

[Cure]
Add a flag DD%ALT to tell DEVPHY to search for the secondary port in
TSTDSK. This flag is set at DEVPSN.

[Keywords]
RECON PHYSICAL UNIT SEARCH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	246	UUOCON	DEVNFS,RCNCP2,RCNCP6
		FILUUO	TSTDSK


[End of MCO 11593]
MCO: 11594		Name: TL		Date:  2-Nov-84:14:48:38


[Symptom]
If DECNET.EXE or other user of KDP. fcn 104 creates a new
DECnet line, ROUTER's circuit database is trashed, and NML can't
talk to the line.

[Diagnosis]
MOVE should be MOVEI, off by 1, reversed test, code too
big, and SUB should be SUBI.  

[Cure]
I hope so.

[Keywords]
ks
decnet
kdp.
line user

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KS10 only
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		D8KINT	KDLSUD,KDLSD1
703	


[End of MCO 11594]
MCO: 11600		Name: TL		Date:  4-Nov-84:07:51:09


[Symptom]
TMR and other STOPCDs when OPR defines a large disk and
believes the MAX value for # SATs/unit.  Observed on RP07.

[Diagnosis]
ASKSPU tries to figure out how many retrieval pointers
(= SAT clusters) will fit in the RIB it builds.  It cleverly allows
for all the change of unit pointers, and the prime RIB.  

It fails to allow for the redundant RIB and the possible EOF pointer.

The TMR happens when we try to add the spare RIB pointer.  
Because TMR is a HALT STOPCD, 20F tries to help things go further
downhill.

[Cure]
Account for worst case when computing what to let the
OPR say.  
	ASKSPU+8.	SUBI	T2,RIBLEN##-1 -> RIBLEN##-3

[Keywords]
HALT
TMR
ONCE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		ONCMOD	ASKSPU
702A	
703	


[End of MCO 11600]
MCO: 11603		Name: RDH		Date:  5-Nov-84:23:06:17


[Symptom]

Bizarre crashes from DN8X nodes, possibly implicating the DTE driver.

[Diagnosis]

Not checking to see if call to allocate chunk really returned a chunk,
or failed (returning "0" as the chunk address).

[Cure]

Check for valid chunk address returned.

[Keywords]
DTE
 ..ALOW

[Related MCOs]
None

[Related SPRs]
32507

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	246	DNDTE	..ALOW

702A		DNDTE	..ALOW


[End of MCO 11603]
MCO: 11606		Name: MJM		Date:  8-Nov-84:11:03:27


[Symptom]
JBTSWP is described incorrectly.

[Diagnosis]
Code development left code documentation behind.

[Cure]
Fix code documentation.  Comment describing fields of
JBTSWP in COMMON must be fixed to reflect new values.  
JBYSUN is in bits 2-4, JBYLKN is in bits 5-17.

[Keywords]
JBTSWP
JBYSUN
JBYLKN

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		COMMON	JBTSWP

703	


[End of MCO 11606]
MCO: 11607		Name: JMF		Date:  9-Nov-84:07:24:21


[Symptom]
Put MONGEN questions about unsupported devices under FTUNSUPPORTED.
This includes DX10s, DECtapes, CDRs, CDPs, PTRs, PTPs, and PLTs.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	MONGEN


[End of MCO 11607]
MCO: 11614		Name: JMF		Date: 13-Nov-84:05:32:58


[Symptom]
Can't tell if a stopcd caused a reload from CRSCPY output.

[Diagnosis]

[Cure]
Lite a bit in DEBUGF when the monitor gets reloaded. CRSCPY can look
at this bit and flag the crash as having caused a reload in CRASH.SYS.

[Keywords]
reload

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	ERRCON	RELOAD


[End of MCO 11614]
MCO: 11617		Name: JMF		Date: 14-Nov-84:04:38:06


[Symptom]
Reserve virtual (and for the time being physical) locations 50-57
for fault insertion.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	COMMON


[End of MCO 11617]
MCO: 11619		Name: JMF		Date: 14-Nov-84:07:18:32


[Symptom]
Undeserved I/O error on the disk.

[Diagnosis]
If the monitor runs out of low core 4 word blocks while building
an IOWD list, PUNTB causes CHNNUM to be wrong.

[Cure]
SUBI P4,(W) => SUBI T1,(W).

[Keywords]
IODERR
PUNTB

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	FILIO	PUNTB
702A	


[End of MCO 11619]
MCO: 11620		Name: CJA		Date: 14-Nov-84:08:22:32


[Symptom]
Potential race in LATOP. if 2 users want access to database.

[Diagnosis]
LAT database is not interlocked.

[Cure]
Only let LATOP. UUO run on CPU0 so only 1 user can get to
it at a time.

[Keywords]
LAT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	UUOCON


[End of MCO 11620]
MCO: 11622		Name: DPR		Date: 14-Nov-84:15:42:13


[Symptom]
If the new FILOP. function RENAME with allocation given
in words can truncate a file incorrectly.  If the word count is
on a block boundary, the file become one block too small.

[Diagnosis]
If the file is being truncated to a block boundary, the
last block in the file is full (128 words) not empty (as currently
coded).

[Cure]
In FILUUO at RENA35-4 change:

	TRNE	P4,BLKSIZ-1
	TRZ	P4,BLKSIZ

TO

	TRNN	P4,BLKSIZ-1	;BLOCK BOUNDARY?
	TROA	P4,BLKSIZ	;YES -- LAST BLOCK IS FULL
	TRZ	P4,BLKSIZ	;NO -- COMPUTE REMAINDER

[Keywords]
RENAME
TRUNCATE

[Related MCOs]
None

[Related SPRs]
34826

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A	250	FILUUO	RENA35

703	


[End of MCO 11622]
MCO: 11623		Name: DPR		Date: 14-Nov-84:15:46:47


[Symptom]
The DIU-10 slave jobs will be created not LOG'd in.  They
will then LOGIN under the PPN of the requestor.  Since DIU will
be a very large program it would be nice if it could run virtual.
Currently, the DIU slave job has no VM quota, so it can not run
virtual.  If DIU could set it's MAXIMUM VIRTUAL LIMIT the job
could run virtual.

[Diagnosis]
Allow a non-logged-in job to set it's maximum virtual
limits.  DIU will then set these limits before the slave job is
logged in.

[Cure]
In COMCON at SETTBL + 24 change

	XWD	NEDPRV,SETUVL##

to

	XWD	NEDPRV+NLOGOK,SETUVL##


[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	COMCON	SETTBL

702A	


[End of MCO 11623]
MCO: 11624		Name: RDH		Date: 14-Nov-84:23:54:47


[Symptom]

The KL10 can fail in such a way that the DN8X doesn't detect it, thus
essentially hanging the -11 since the -11 will wait indefinitely for
the -10 to respond. Note that most normal failues will result in clearing
the DTE, thus informing the -11 that the -10 has died.

[Diagnosis]

The -11 only looks for "E-bus parity error" to decide if the -10 has
kroaked off, leaving open such things as the -10 has simply HALTed.

[Cure]

Nominally the current operation is the desired operation. However, for
those "high-availability" sites that might want the -11 to immediately
reroute terminal/et al connections if the KL stops running in any
fashion, add a new feature test FTKLKR to the DN8X code which, if
enabled (non-zero) will abort DTE protocol if the KL goes into the
HALT loop, gets a Clock Error Stop, or clears the RUN flop (something
only 20F is alleged capable of doing).

[Keywords]


[Related MCOs]
None

[Related SPRs]
33073

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	DNDTE	WFED


[End of MCO 11624]
MCO: 11625		Name: RDH		Date: 15-Nov-84:00:26:40


[Symptom]

DN8X terminals (and RDAs) can hang, especially on a heavily-loaded
-11.

[Diagnosis]

Improper error checking in the DH11 interrupt service routine, leading
the -11 to ignore NXM errors (the -11 tested for NXM by seeing if the
DH11 had transmit done set, and if so, assuming all was ok with the
DH11).

[Cure]

Check for NXM error explicitly, and take the appropriate error recovery
action.

Note that this problem doesn't arise with DZ11 lines, as the DZ11
doesn't care about such minutiae as NXM errors.

[Keywords]
TERMINAL
RDA
HUNG

[Related MCOs]
None

[Related SPRs]
33331

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	DNDH11	DHOINT

702A		DNDH11	DHOINT

701B		DNDH11	DHOINT


[End of MCO 11625]
MCO: 11628		Name: PMV		Date: 17-Nov-84:22:50:21


[Symptom]
NEW: Change the behaviour of deadlock detection when a time limit is
specified on the ENQ. request.  Currently, deadlock detection is performed
when a request cannot be granted.  If the request will not cause a deadlock,
the job HIBERs until the request is granted or the time limit expires.

The behaviour will now be:  if a request cannot be granted, HIBER the job
first, until the request is granted or the time limit expires.  If the time
limit expires, then do deadlock detection to see if that is the real cause.
However, the default case of a time limit of 0 (meaning HIBER forever),
will always check for deadlock before HIBERing the job.

This change has the effect of reducing the overhead cost of deadlock
detection.  In most cases, if a request is not available, it will shortly
be freed by the owner.  Deadlock is a very rare case, and will only be
checked for if a reasonable amount of time has passed.

Another bonus is that a form of deadlock priority can be implemented.
Batch jobs could specify a long wait time, while interactive jobs could
specify a short wait time.  The interactive job, which wants quick response,
will time out first, and back out of the transaction because of deadlock.
The batch job, which probably has more time invested in its transaction,
can afford to wait longer, and therefore gets to continue processing.

[Diagnosis]

[Cure]

[Keywords]
DEADLOCK DETECTION
ENQ/DEQ

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	QUESER	ENQFAI,BLKHIM


[End of MCO 11628]
MCO: 11632		Name: TL		Date: 19-Nov-84:11:38:44


[Symptom]
KDP ANF lines don't start per MONGEN if not a DECnet system.

[Diagnosis]
We outsmarted ourself in D36LIN

[Cure]
Don't.

[Keywords]
ks
anf
kdp

[Related MCOs]
11589, 11594

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Field service attention
HOSS attention
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	COMNET	DEFKDP,D36LIN
		COMMON	KDLDEF


[End of MCO 11632]
MCO: 11634		Name: TL		Date: 19-Nov-84:12:01:19


[Symptom]
Almost every customer adds words to the PDB.  Since we do too,
it's hard to soup.

[Diagnosis]
We could be kinder.

[Cure]
Add MONGEN symbol M.PCST (Number of PDB words reserved for customer use.
If defined, and non-zero, will allocate that number of words at symbol .PDCST.

The value of .PDCST is not fixed; it should be the last entry in the PDB.
If zero, .PDCST will not be defined.  Customers can equate their words to
 .PDCST+nnn.

[Keywords]
customer
pdb

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	COMMON	PDBPRO


[End of MCO 11634]
MCO: 11635		Name: TL		Date: 19-Nov-84:12:47:41


[Symptom]
No free core.  TGHA conquers system.

[Diagnosis]
MOSSER is very happy to send ever MOS error that occurs to TGHA
for analysis.  Each is an IPCF packet.  When 17,000 (decimal) errors happen
in one metered minute, free core goes away.  If things are this bad, TGHA
isn't doing much good anyhow.

[Cure]
Limit the maximum number of MOS errors /minute to some rational number.
Currently that's 5, but it can be patched at MOSMEM in MOSSER.

Add the following items to the PARITY subtable:
	.CPMET	- MOS errors this minute
	.CPMEC	- MOS errors that we tried to send to TGHA
	.CPTME	- Total MOS errors - filtered or not.


[Keywords]
mos
error
tgha

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
Field service attention
KL10 only
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	COMMON	.CPPRL,SETIME
		CLOCK1	CPUMIN
		MOSSER	SBERR,SBERR4
		UUOSYM	PARITY


[End of MCO 11635]
MCO: 11636		Name: TL		Date: 19-Nov-84:13:00:12


[Symptom]
KS disks don't always.

[Diagnosis]
NXD handling needs to clear RH11, but doesn't.
RPXCPY tries hard, but doesn't preserve bus address increment inhibit.

[Cure]
Do.

[Keywords]
ks
disk
nxd
bai

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Field service attention
HOSS attention
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	RHXKON	RPXCPY,NOATTN


[End of MCO 11636]
MCO: 11646		Name: KBY		Date: 19-Nov-84:23:06:35


[Symptom]
Cntrl-T lies, limits could never be checked, etc.

[Diagnosis]
No real virtual size stored anywhere

[Cure]
JBTVRT was 2 nine-bit size fields and a half word paging rate.
Move the paging rate to the left half of .PDVRT in the PDB (new word).
JBTVRT is now 21 bits for the low seg virtual size (bits 15-35) and nine
bits for the high seg (bits 6-14).  The paging rate GETTAB is altered to
get the .PDVRT word.

[Keywords]
virtual

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	VMSER	STVSIZ,OTHERS
		COMCON
		COMMON
		SEGCON
		CTXSER


[End of MCO 11646]
MCO: 11656		Name: DPM/JAD		Date: 27-Nov-84:03:55:44


[Symptom]
TU78 tape drives hang during rewind.

[Diagnosis]
MCO 11483 removed a seemingly useless instruction which prevented
T78KON from updating the density in the IORB twice.  Doing this
saved about 10 instructions.  Now rewinds hang until the rewind
hung timer expire.

[Cure]
If setting the density once is good, then doing it twice must be
better.  It's cheaper to waste a few instructions than to spend a
couple of hours trying to understand this one.

[Keywords]
REWIND HUNG
TU78

[Related MCOs]
11483

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	251	T78KON	ATTEN4

702A	


[End of MCO 11656]
MCO: 11657		Name: DPM		Date: 27-Nov-84:04:11:58


[Symptom]
New:  Add symbols for PIJBI. UUO fields in the AC.

	PS.CTX==777B8		;CONTEXT NUMBER
	PS.JOB==777B17		;JOB NUMBER
	PS.STS==777777B35	;STATUS

[Diagnosis]

[Cure]

[Keywords]
PSI

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	251	UUOSYM	PIJBI.


[End of MCO 11657]
MCO: 11658		Name: DPM		Date: 27-Nov-84:05:47:20


[Symptom]
New:  Add support for new bootstrap.  This MCO eliminates the monitor
resident bootstrap (MONBTS) and the need to assemble microcodes into
the monitor.  The BOOT loaded by RSX-20F or the KS10 will be mapped
into the monitor's virtual address space, thus allowing the monitor to
call it as a subroutine or to access data such as the microcodes with
little effort.  From now on, the monitor will be dependent on BOOT
version 3(22) or later to provide the following functions:

	1. Dump crashes.
	2. System sleep dump.
	3. Memory parity error page replacement.
	4. Microcode storage for:
	     A. DX20/TX02 tape controllers.
	     B. DX20/RP20 disk controllers.
	     C. KLIPA/CI20 controllers.
	5. The storage of vital information across monitor crashes,
	   necessary for auto-reload with no operator in attendance:
	     A. System search list.
	     B. Active swapping list.
	     C. System dump list.

The new BOOT is completely self contained, and has no knowledge of
monitor addresses.  All commumications between the monitor and BOOT
are done through an entry vector which contains actual data or pointers
to data inside BOOT.

BOOT resides in section 6.  Originally, it was to be put in section 7
with the NZS high seg code, but section 7 address space usage depends
on assembled-in addresses in the source code.  Since BOOT is relocatable,
it made more sense to put it in another section.  If desired, it could
be moved into sections 2 or 3 with no effort.

For the time being, MONBTS will exist as a collection of subroutines
used to interface to the new BOOT.  This may change in the near future.

Support for the old BOOTS and the monitor resident bootstrap is no
longer an option, as the code has been completely removed.  This
caused COMMON.MAC to shrink by about 15 blocks.

[Diagnosis]

[Cure]

[Keywords]
BOOTSTRAP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	251	CLOCK1	CIP8
		COMMON	LOTS
		DX2COM	DXLOAD
		ERRCON	CRSDMP
		KLPSER	KLPLOD,RLDKLP
		LOKCON	SETM12
		MONBTS	ALL
		ONCE	LOTS
		RNXKON	DXFTAB
		S	LOTS
		SYSINI	IOGO,KIIN5


[End of MCO 11658]
MCO: 11659		Name: JMF		Date: 27-Nov-84:06:42:15


[Symptom]
Hard to upgrade an SMP system with MCA25s. Must buy as many MCAs as you have
CPUs. Also, since all of the new CPUs we make have MCA25s, all existing CPUs
would have to be upgraded to add a new CPU. This could all be quite expensive
and doesn't allow as graceful incremental growth.

[Diagnosis]

[Cure]
Turn on the "keep me" bit in all maps, but  if a particular CPU
doesn't have an MCA25, don't turn it on in the section pointers. Since the
access bits get anded together, the "keep me" bit won't get propagated to
the pager thus causing page table parity errors. Thus CPUs with the MCA25
can take advantage of "keep me" without causing CPUs without it to get page
table parity errors.

[Keywords]
MCA25

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
KL10 only
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	251	CPNSER	MAPINI
		ONCE	HIGHIN
		ONCMOD	NZSCGT


[End of MCO 11659]
MCO: 11661		Name: RDH		Date: 28-Nov-84:17:45:47


[Symptom]

DZ11 terminal speeds can be left in the wrong state  (i.e.,  the  true
terminal speed is not what the user specified).

[Diagnosis]

A program must issue two TRMOP.s in order to  set  both  transmit  and
receive  speeds  for the DZ11.  If the program is (e.g.,) scheduled or
otherwise interrupted  between  the  two  TRMOP.s,  the  -11  will  be
notified  of  the  partial  speed  change, and will reject it since it
appears to be an attempt to set the DZ to split-speed, which the  DZ11
does  not  support.   The  -11  will  then  send  back  to the -10 the
"correct" (i.e., unaltered) speed.  The user program  then  continues,
setting  the other speed, which again sends a partial (or split) speed
request to the -11, which is also rejected.  The end  result  is  that
both  TRMOP.s appear to succeed (take the skip return) but in fact the
-11 did not change the terminal's speed.

[Cure]

For DZ11 lines, rather than ignoring/rejecting  split-speed  requests,
just  ignore  the terminal receive speed and believe only the terminal
transmit speed.

[Keywords]
TERMINAL
SPEEDS
DZ11

[Related MCOs]
None

[Related SPRs]
32506

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	251	DNTTY	SETSPD
		DNDH11	DHSPD
		DNDZ11	DZSPD

702A		DNTTY	SETSPD
		DNDH11	DHSPD
		DNDZ11	DZSPD


[End of MCO 11661]
MCO: 11664		Name: WXD		Date:  3-Dec-84:09:43:54


[Symptom]
Combinations of TRPSET and RECON function .RCROM (run only me)
can succeed and still allow more than one job to run.

[Diagnosis]
Nobody interlocks the code which checks if timesharing has
stopped with the code that stops timesharing.

[Cure]
Use the schedular interlock to interlock the checking/setting
of the stopped timesharing flag.

[Keywords]
TRPSET
RECON
 .RCROM

[Related MCOs]
None

[Related SPRs]
33919

[MCO status]
Checked

[MCO attributes]
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	UUOCON	RCNROM,TRPSTU

702A	


[End of MCO 11664]
MCO: 11667		Name: DPM		Date:  4-Dec-84:04:42:35


[Symptom]
	The FILE and LABEL commands are of no use on a system without
DECtape support.

[Diagnosis]
	The commands exist in all DECsystem-10 configurations.

[Cure]
	Over the years, a precident has been set whereby commands
which perform no useful function have not been removed, but instead
dispatch to an error message type out routine.  Therefore, the FILE
and LABEL commands will be made to generate an error message if there
is no DECtape controller present.

[Keywords]
DECtapes

[Related MCOs]
None

[Related SPRs]
11667

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	COMCON	MNTCOM,RECALL

702A	


[End of MCO 11667]
MCO: 11668		Name: DPM		Date:  4-Dec-84:05:28:34


[Symptom]
Range checking backwards for customer defined QUEUE. functions.

[Diagnosis]
Typo.

[Cure]
Yes.

[Keywords]
QUEUE. UUO

[Related MCOs]
None

[Related SPRs]
34631

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		IPCSER	GLXINF

703	252	IPCSER	GLXINF


[End of MCO 11668]
MCO: 11669		Name: DPM		Date:  4-Dec-84:07:06:57


[Symptom]
No symbol defined for TM78 tape controllers in UUOSYM

[Diagnosis]
We've done this at least twice before, maybe this time it will stick

[Cure]
Define a new symbol .TFK78==7

[Keywords]
TM78

[Related MCOs]
None

[Related SPRs]
34947

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	UUOSYM	.TFK78

702A	


[End of MCO 11669]
MCO: 11671		Name: WXD		Date:  4-Dec-84:07:53:31


[Symptom]
New:  Add support for multiple KLNIs under SMP.

[Diagnosis]

[Cure]

[Keywords]
Ethernet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	COMMON
		CPNSER
		DATMAN
		ETHPRM
		ETHSER
		KNIPRM
		KNISER
		NIPAR
		S
		UUOCON
		UUOSYM


[End of MCO 11671]
MCO: 11673		Name: RCB		Date:  4-Dec-84:09:46:59


[Symptom]
New:

Implement PSI on character input, and some other character control, for
CTERM/NRT.

New PSI condition .PCOOB, returns status of
	XWD	character,udx

New TRMOP.s, .TOGCS & .TOSCS to read and set the special characer status.

Format for .TOGCS:
	addr1/	.TOGCS
	...+1/	udx
	...+2/	len,,addr2

	addr2+/	character to read

The len words starting at addr2 will have the TC.VAL field filled in from the
current settings.

Format for .TOSCS:
	addr1/	.TOSCS
	...+1/	udx
	...+2/	len,,addr2

	addr2+/	mask ! values ! character

The field TC.MOD is a bit-mask of the values to change, TC.VAL is the new
values, and TC.CHR is the character to which they apply.

Bits which can appear in TC.VAL or TC.MOD:
	TC.BRK			;This is a line break character
	TC.NSA			;No special action (disable normal monitor action)
	TC.OOB			;Out-of-band (receipt of this character causes
				; an interrupt)
	TC.DFR			;This character's interrupt type is deferred
	TC.CLR			;The input buffer is cleared when posting the
				; interrupt for this character (meaningful only
				; for control characters)

The remainder of these fields is reserved for future development.

[Diagnosis]

[Cure]

[Keywords]
PSI on character
CTERM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	SCNSER
		PSISER
		S
		UUOSYM


[End of MCO 11673]
MCO: 11674		Name: RCB		Date:  4-Dec-84:09:47:03


[Symptom]
New:

Add lots of CTERM support code.

Spec is forthcoming.

[Diagnosis]

[Cure]

[Keywords]
CTERM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	NRTSER
		SCNSER
		NETDEV
		S
		PSISER
		UUOSYM


[End of MCO 11674]
MCO: 11677		Name: DPM		Date: 11-Dec-84:02:17:59


[Symptom]
CPYNAM macro to define program name to copy crashes doesn't work.

[Diagnosis]
1.  No one uses it correctly.
2.  It should have been an M.xxx symbol to allow defining at MONGEN time.

[Cure]
Default M.CRSH to be SIXBIT/CRSCPY/.  Allow it to be defined in the sixbit
section of MONGEN.

[Keywords]
CRSCPY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	253	COMMON	CCPNAM
		SYSINI	IOG5


[End of MCO 11677]
MCO: 11678		Name: DPM		Date: 11-Dec-84:02:21:29


[Symptom]
Lost crashes

[Diagnosis]
No code to twiddle the SDL in the bootstrap vector.

[Cure]
Add some so BOOT can access the SDL.

[Keywords]
DUMP LIST

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	253	COMMON	M.CRSH
		FILFND	LOCSDL
		FILUUO	SDLADD,SDLREM
		MONBTS	ADDSDL,FNDSDL,REMSDL
		ONCMOD	DEPSDL
		S


[End of MCO 11678]
MCO: 11679		Name: DPM		Date: 11-Dec-84:02:41:44


[Symptom]
New: Remove FTMBTS conditionals leaving the code turned on.

[Diagnosis]

[Cure]

[Keywords]
FTMBTS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	253	CLOCK1	CIP2
		COMMOD	STRSDL,STRCRS
		ERRCON	BUGCHK,CPUSTP,CRSDMP,ZAPJOB
		FGEN	FTMBTS
		FILIO	ATTUN4,XCHUN2
		MONGEN	ASKMBT


[End of MCO 11679]
MCO: 11681		Name: RDH		Date: 11-Dec-84:08:54:39


[Symptom]

DN8X assembly options confusing, hard to document, etc.

[Diagnosis]

My guess is that it just grew up that-a-way.

[Cure]

Change the async line configuration instructions as follows:

DH11-based systems use the DHCNFG and DHUSE macros as currently documented
with the exception that the arguments to the DHUSE macro are ***NOT*** to
be enclosed in parenthesis as shown in the examples.

DZ11-based systems no longer use the DHCNFG and DHUSE macros but instead
use the DZCNFG and DZUSE macros, which are invoked exactly as the DHCNFG
and DHUSE macros are.

DN20 systems now assume DZ11s and TTY support as the default case (this is
easy to change back, but I think the majority of DN20s are configured
with TTYs).

While it was reccommended that the TTYN parameter be supplied explicitly
in the DN8X control file, that parameter is no correctly defined by the
DHUSE/DZUSE macros.

*ALL* arguments to the DHUSE/DZUSE macros must be supplied correctly
(and in particular - for emphasis - NO PARENTHESIS!!!).

To suppress TTYs set FTDH11=0 or FTDZ11=0 depending on the class of -11
(DN8? or DN2? respectively). To force TTY support, set the corresponding
symbol non-zero and invoke the appropriate D?CNFG and D?USE macros.

The DZSPD macro has been added to correspond to the DHSPD macro,but for
DZ11-based systems.

Two new assembly macros are added - DHSET and DZSET, to be invoked within
the DHCNFG or DZCNFG macros respectively. DHSET/DZSET must be invoked before
the DHUSE/DZUSE macros. Each takes four arguments, physical line number,
line class ("TTY", "RDA", etc.), receive speed and transmit speed. These
macros look like DHSPD but use the physical line rather than logical line
with specified class of lines, and set the class of the line.

The FT.RDE assembly parameter has been removed. Use only FT.RDM for
multi-point DDCMP RDX device support, or FT.RDP for point-to-point DDCMP
RDX device support. FT.RDA continues to be used for ASCII RDA.


[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	253


[End of MCO 11681]
MCO: 11682		Name: RCB		Date: 11-Dec-84:09:08:29


[Symptom]
Add yet more CTERM-related code.  This time, it's the following commands:
	TTY [NO] UNPAUSE [o]
	TTY [NO] ESCAPE [o]
	TTY [NO] EIGHTBIT
and the new I/O mode .IOAS8 (4) for 8-bit ASCII.  This mode uses 8-bit bytes
and keeps an accurate byte count, in the same fashion as mode 2 (PIM).

The use of TTY UNPAUSE and TTY ESCAPE is either as
	TTY NO word		;to go back to using only the normal character
or
	TTY word octal		;to specify that the given octal character code
				; be used as an additional escape or ^Q.

If TTY EIGHTBIT is enabled, the full 8-bit ASCII character set will be
transferred to and from the terminal.  If disabled, the 7-bit character set
will be used.

The following (corresponding) TRMOP.s are also implemented:

	.TOUNP			;read/set the extra unpause character
	.TOESC			;read/set the extra escape character
	.TO8BT			;read/set the 8-bit terminal characteristic.

[Diagnosis]

[Cure]

[Keywords]
CTERM
8-bit ASCII

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	253	SCNSER
		COMCON
		NRTSER
		NETMCR
		NETVTM
		S
		UUOSYM
		UUOCON


[End of MCO 11682]
MCO: 11683		Name: NT		Date: 11-Dec-84:09:29:15


[Symptom]
Customer commands not always accessible.

[Diagnosis]
The SPCCMD macro is expanded too far down in the tables.
If a DEC command is found that exactly matches the customer one,
it will be executed, and the customer one won't be looked at.

[Cure]
Move the SPCCMD macro up in the NAMES macro so that it expands
right after the HALT command. If the customer wants more flexibility
he can use the uniqueness bits.

[Keywords]
CUSTOMER COMMAND SCANNING

[Related MCOs]
None

[Related SPRs]
34767

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		COMMON	NAMES

703	253	COMMON	NAMES


[End of MCO 11683]
MCO: 11686		Name: CTK		Date: 17-Dec-84:10:16:21


[Symptom]
The QUEUE. UUO lacks the ability to set the OPR
intervention bit or the IBMCOM processing node field.

[Diagnosis]
The are no symbols in UUOSYM or code in QUASAR.

[Cure]
Add the .QBAST symbol for the OPR intervention bits
and .QBPRC for the IBMCOM processing node field.

[Keywords]
/ASSIST
/PROCESSING

[Related MCOs]
None

[Related SPRs]
35766

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		UUOSYM


[End of MCO 11686]
MCO: 11687		Name: CJA		Date: 17-Dec-84:12:58:19


[Symptom]
No way to find out anything about LAT terminals via GETTAB
tables.

[Diagnosis]
No code

[Cure]
Put location LAHNDB, which contains the address of the LAT
Host Node Data Base at the end of CNFTBL in COMMON.  Make it
global, so LATSRV can access it, and add GETTAB entry %CNLHN
to configuration table (11) so the outside world can see the start
of the trail.

[Keywords]
LAT
GETTAB

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	COMMON	CNFTBL
		LATSRV	LAHNDB


[End of MCO 11687]
MCO: 11688		Name: RDH		Date: 17-Dec-84:15:46:28


[Symptom]

New:	Expand ANF LN01 support:

	Add I/O status flag IO.SVF (bit 25) to suppress DN8x VFU/etc.
	(as in LN01 graphics where font files or the like are being
	loaded).

	Add 8-bit ASCII support. Any attempt to use a non-703 ANF LPT
	or a 703 LPT that doesn't support 8-bit ASCII will return IO.IMP
	error status (but the OPEN will always work, you won't get the
	error until actual I/O is attempted).

	Add new DN8X assembly parameter LPn8BT to specify that the
	designated LPT supports 8-bit mode. (Note that the actual
	utilization of 8-bit is controlled by STATUS messages from the
	-10, so that 703 8-bit DN8x LPTs will work correctly with
	7.02 7-bit monitors! And vice-versa! Boy, what a pain!)

	This is speced out in more detail in LN01NT.MEM.

[Diagnosis]

[Cure]

[Keywords]
LN01
8BIT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	COMNET
		NETPRM
		NETDEV
		MACROS
		DNTTY
		DNDZ11
		DNCNFG
		DNLPT
		DNLP20
		DNCTAB


[End of MCO 11688]
MCO: 11689		Name: NT		Date: 17-Dec-84:16:10:16


[Symptom]
Tarl picked very good names for some of the functions of the CMAND. UUO.

[Diagnosis]
Unfortunately they were already in use for the COMND JSYS
simulator in GLXMAC.

[Cure]
Redefine some symbols and have the old ones do a warning PRINTX
to tell they will soon be obsolete. The new symbols, along with their
corresponding old ones are:

		  New:			  Old:
		.CMINT			.CMINI
		.CMFLA			.CMFLG
		.CMDVC			.CMDEV
		.CMFLE			.CMFIL
		.CMCOU			.CMCNT

[Keywords]
COMMAND FUNCTION REDEFINITIONS

[Related MCOs]
10248

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	UUOSYM	CMAND.


[End of MCO 11689]
MCO: 11690		Name: RCB		Date: 18-Dec-84:06:22:12


[Symptom]
Add further code for CTHNRT.  This week's command/TRMOP. pair:
	TTY [NO] QUOTE
	.TOQOT
Enable/disable the action of ^V (control-V) as a super-quote character.
When TTY QUOTE is enabled, the ^V-<any character> combination will behave in
nearly all respects as a single character.  A single rubout will delete the
pair.  Also, they will not echo separately.  I may do something about the
echoing aspect if it seems too disturbing.

[Diagnosis]

[Cure]

[Keywords]
CTERM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	SCNSER
		COMCON
		NRTSER
		NETDEV
		UUOSYM


[End of MCO 11690]
MCO: 11692		Name: RCB		Date: 18-Dec-84:06:22:18


[Symptom]
Add missing code to generate 8-bit terminals.  In the terminal definition
section of the HDW dialog in MONGEN, add the new 8BIT characteristic.  This
is to be placed just after the XON keyword.

[Diagnosis]

[Cure]

[Keywords]
8-Bit

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	COMDEV	TCRTAB
		MONGEN	ASKTRM
		SCNSER	SETTTC


[End of MCO 11692]
MCO: 11693		Name: RCB		Date: 18-Dec-84:06:22:22


[Symptom]
INITIA and the monitor can't agree as to who is using FRCLIN.

[Diagnosis]
Interlock is only per character.

[Cure]
Change the interlock to be per call to FRCSET or to the .TOTYP TRMOP.
Now, once INITIA starts sending multiple (but related) lines, it and
the monitor will be protected from each other.

This MCO also adds a range check to the .TOTYP TRMOP., such that if the
user tries to send more than TTIMAX (300) characters, we will return
error code 2 (range error).  It seems better to inform the user of the
impossibility of success than to claim to have done the impossible.

[Keywords]
FRCLIN
KNILDR
CRSCPY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	SCNSER	FRCSET,TOPMTY
		UUOCON	CKSTR,CKSTRL


[End of MCO 11693]
MCO: 11694		Name: DPM		Date: 18-Dec-84:06:34:24


[Symptom]
New: Preserve SSL, ASL, and SDL across reloads of the monitor and BOOT.
At startup, the monitor will first try to use the preserved data, and
if it can't, a message will be output saying the SSL, ASL, or SDL will
be rebuilt from this disk data base.  This adds three new startup option
switches (/NOSSL, /NOASL, and /NOSDL) to override the preserved data and
do things the old way.

UDB location UNISWA is timeshared by ONCMOD (called UNISID) and contains
a copy of HOMSID, the swapping ID of the next unit in the ASL.

[Diagnosis]

[Cure]

[Keywords]
BOOTSTRAP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	FILFND	LOCSDL,REMSTR,SLSTRR
		S	.BTSSL,.BTASL,.BTSDL
		FILUUO	SDLADD,SDLCHK,SDLFRE,SDLREM
		COMMOD	UNISWA
		ONCMOD	LOTS
		ONCE	BOOTSZ,BOOTMP,BOOTFX,BLDSSL,BLDASL,BLDSSL,LOTS,MORE,ETC.
		MONBTS	BTADDR,RLDMON,SSLBLD,ASLBLD,SDLBLD,MORE,HERE,TOO


[End of MCO 11694]
MCO: 11696		Name: DPM		Date: 18-Dec-84:08:28:42


[Symptom]
Missing PAGE. UUO bit.

[Diagnosis]
Yes

[Cure]
Add PA.GDC to indicate one's indifference towards a page's existance
on create and destroy operations.

[Keywords]
XADDR

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	UUOSYM	PAGE.


[End of MCO 11696]
MCO: 11705		Name: BAH		Date: 20-Dec-84:10:58:32


[Symptom]
The NETGEN dialogue of MONGEN asks the superfluous question
about the number of CPUs.

[Diagnosis]
The question was used to ask about DL10-based network front ends on each
CPU.  These are unsupported with 7.03.

[Cure]
Put the question under the FTUNSUPPORTED conditional.  MONGEN generates
the necessary symbols for the maximum number of CPUs.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	255	MONGEN	ASKNET


[End of MCO 11705]
MCO: 11706		Name: JMF		Date: 21-Dec-84:04:00:34


[Symptom]
Use of a one word global byte pointer (OWGBP) in an EXTEND instruction
results in an Illegal UUO at user xxxxxx.

[Diagnosis]
Tables used by the microcode for advancing byte  pointers not setup
in the EPT.

[Cure]
Set them up.

[Keywords]
OWGBP
EXTEND

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	255	COMMON	EPT


[End of MCO 11706]
MCO: 11707		Name: DPM		Date:  4-Jan-85:08:19:19


[Symptom]
New:  Make SET PASSWORD command run LOGIN.  This obsoletes the PSWCHG program.

[Diagnosis]

[Cure]

[Keywords]
PASSWORD

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	257	COMMON	SNAMES,PSWCHG
		COMCON	RUNLGN


[End of MCO 11707]
MCO: 11715		Name: RCB		Date:  8-Jan-85:01:16:15


[Symptom]
People get confused as to what the 'TTY [NO] ECHO' command really does.

[Diagnosis]
It was misnamed.

[Cure]
Fix it by renaming the command to TTY [NO] LOCALCOPY.  Then, because so many
people have requested it, add a TTY [NO] ECHO command that really controls
echoing.  If TTY NO ECHO has been typed, the monitor will echo no characters,
no matter what the user's setting of IO.SUP.  If TTY ECHO is in effect, echoing
will be controled by IO.SUP as before.

New read/set TRMOP.:  .TOCLE (command-level echo enable)


GETLCH bits of interest:
	GL.CNE,1B4	;Command-level no echo (TTY NO ECHO in effect)
	GL.8BM,1B10	;Terminal is open in 8-bit I/O mode
	GL.SLV,1B12	;TTY SLAVE is in effect

Some of these bits are old but never-before documented.  All three are read-only
(that is, they do not apply to SETLCH).

[Keywords]
TTY ECHO
TTY LOCALCOPY
X.25

[Related MCOs]
None

[Related SPRs]
33358

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	257	SCNSER	LDBDCH,TOPCNE,TOPTB1,ECHTST
		COMCON	TTNAME
		NRTSER	CCMCNE
		UUOSYM	TRMOP.,GETLCH
		NETDEV	MCROKE


[End of MCO 11715]
MCO: 11716		Name: RCB		Date:  8-Jan-85:01:20:35


[Symptom]
Monitor typeout gets lost.

[Diagnosis]
Monitor typeout routines don't know how to block for I/O to complete.

[Cure]
Teach them.  If CCTYO gets called at UUO level, it will now block if too few
chunks are available.  If called at interrupt level, it will push closer to
the absolute limits in an attempt to avoid losing the output.

[Keywords]
SET WATCH FILES
CONTEXT COMMAND
CORE COMMAND

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	257	SCNSER	CCTYO


[End of MCO 11716]
MCO: 11718		Name: RCB		Date:  8-Jan-85:01:43:33


[Symptom]
Auto-disconnect timing feature too confusing, and too hard to expand for new
network types.

[Diagnosis]
Implemented on an ad-hoc basis for each new network type.

[Cure]
Make SCNSER's once-a-second code handle the auto-disconnect timer.
This adds the read-set TRMOP. .TOMXT (maximum timeout value), and the read
function .TOADT (remaining time on auto-disconnect timer).

The following symbols can be set by MONGEN:
	IDLSEC	[90]		;countdown timer (in seconds) for idle lines
	M.DIDL	[IDLSEC]	;countdown timer for idle datasets
	M.AIDL	[IDLSEC]	;countdown timer for ANF-10 lines
	M.LIDL	[IDLSEC]	;countdown timer for LAT lines
	M.NIDL	[IDLSEC]	;countdown timer for NRT/CTERM lines

These are the default values, which can be overridden via the .TOMXT TRMOP.

[Keywords]
CTERM
LAT
AUTO-DISCONNECT TIMER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	257	SCNSER	SCNADT,TOPMXT,TORADT,TOPTB1,SCNSIS
		NRTSER	NJFRCR,NRTINA
		LATSRV	GTTDB2,LATREM
		NETDEV	D85REM,GETLD1,NMCSEC


[End of MCO 11718]
MCO: 11720		Name: TL/RCB		Date:  8-Jan-85:02:14:50


[Symptom]
Can't specify how to map customer terminal types to 'standard' types for
exchanging CTERM messages.

[Diagnosis]
No code.

[Cure]
Add code.

Summary of changes:
	1. MONGEN accepts terminal definitions of the form
	   TTY33/LT33,72,0,..... as well as the old
	   TTY33,72,0,...
	2. The TERMCR macro in COMDEV takes an optional second arg, the
	   alias name for the first.  The remaining args follow as usual.
	3. TRMTAB/TRMNAM entries are generated only if the alias name is
	   specified and is different from the TOPS-10 name.
	4. COMDEV is still SOUP compatibile with previous monitors.  Old
	   MONGEN .CTL files need not be changed.

The resulting code is no prettier than previously, but no worse either.

[Keywords]
CTERM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	257	NRTSER	CCOTTT,CCMLTT
		COMDEV	TERMCR,TRMNAM,TRMTAB
		MONGEN	ASKTRA,TRMLOP


[End of MCO 11720]
MCO: 11722		Name: DPM/RCB		Date:  8-Jan-85:07:53:53


[Symptom]
New:  Allow ATTACH job without PPN.  LOGIN will do the
job/PPN checking.

[Diagnosis]

[Cure]

[Keywords]
ATTACH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	257	COMCON	ATTACH


[End of MCO 11722]
MCO: 11724		Name: KBY		Date:  9-Jan-85:11:41:00


[Symptom]
Stopcode UIL on (some) tape interrupts if FTAUTC is off and
FTKLP is on.

[Diagnosis]
Phased code which in this particular instance should not generate
a phased address.

[Cure]
Relocate if IFAUTC=0.

[Keywords]
AUTCON off

[Related MCOs]
None

[Related SPRs]
35042

[MCO status]
None

[MCO attributes]
KL paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	260	COMDEV	GENKDB
702A	


[End of MCO 11724]
MCO: 11725		Name: FAIRBANKS		Date: 10-Jan-85:11:08:53


[Symptom]
The Decnet Compatible Port can lose chunks.

[Diagnosis]
If disconnect confirms are received in certain race
conditions, the link block is freed but the chunks are left around.

[Cure]
Free the chunks also.

[Keywords]
DCP
CHUNK

[Related MCOs]
None

[Related SPRs]
34927

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		DNDCP4	NSPDCX,NSPFGC
703	


[End of MCO 11725]
MCO: 11730		Name: RCB		Date: 14-Jan-85:04:13:58


[Symptom]
NETSER wastes freecore.
NDBSNM (station name pointer) always points to a 4-word block, of which we
use at most one.  NDBSID (software ID pointer) always points to an 8-word
block, which is sometimes not needed.  In fact, it is usually not needed if
your network has a lot of DCPs.  It also points to a date string block, which
is also often not needed.

[Diagnosis]
Inefficient use of space.

[Cure]
Change NDBSNM to point to a new word (NDBSN2) in the NDB, and not allocate
a separate 4-word block to hold the sixbit name.  Only allocate blocks
for NDBSID to point to if strings are supplied by the node.

[Keywords]
ANF-10
Freecore
Bob McQueen

[Related MCOs]
None

[Related SPRs]
34606

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	260	NETPRM	NDBSN2
		NETSER	N13ASZ,CLNND2,NCSOPD,AS2EAZ,EAS2AZ,RDOPDD,RDOPD1,RDOPD2,RDOPD3


[End of MCO 11730]
MCO: 11731		Name: DPM		Date: 14-Jan-85:06:22:21


[Symptom]
New:  Run LOGIN on any ATTACH command not recognized by the monitor.
This lets ATTACH <user-name> work correctly.  There is one restriction
however.  A priv'ed job cannot use this format of the ATTACH command.
This is because he may be trying to attach a device.

[Diagnosis]

[Cure]

[Keywords]
ATTACH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	260	COMCON	ATTACH,DEVATT


[End of MCO 11731]
MCO: 11733		Name: JMF		Date: 14-Jan-85:10:00:45


[Symptom]
?No start address when running a program with a sharable high segment
a second time if FTKLP is turned off.

[Diagnosis]
SVEUB gets called and in previous monitors, when a POPJ occured,
SVEUB would have done a DATAO PAG which would have cleared the paging memory.
However, in 7.02 to try to save the refills, SVEUB only does that DATAO if the
UBR is being changed. Thus, even though the map has been redone, no one told the
paging memory that the mapping had been changed.

[Cure]
CONO PAG,@.CPEBR

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
KI paging only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		CORE1	SETMAP,SCWEXO
703	260


[End of MCO 11733]
MCO: 11744		Name: KBY		Date: 18-Jan-85:11:40:01


[Symptom]
Too hard for programs to find out about what kinds of pages
they have.

New:

1.  Add PAGE. UUO function .PAGBM.  This function will return a bit map
    where the bit being on represents a page which fulfils the specified
    attributes.  The calling sequence is:

		MOVE	AC,[.PAGBM,,addr]
		PAGE.	AC,
		  error return
		normal return

      addr:	EXP	count		;# of args
		EXP	attribute-settings ;same bits as .PAGCA
		EXP	care-mask
		EXP	starting-page-#
		(start of bit mask returned)

	The 'attribute-settings' word specifies the desired state of the
     appropriate page accesibility attribute.  The 'care-mask' word specifies
     which bits of the 'attribute-settings' word should be examined.
     The starting page number specifies which page maps to bit 0 of the
     mask.

2.  Add PAGE. UUO function .PAGAL.  This function will return the same
    information as .PAGCA, but will take a list formatted argument list.
    The calling sequence is:

		MOVE	AC,[.PAGAL,,addr]
		PAGE.	AC,
		  error return
		normal return

	addr:	count			;# of args
		EXP	starting-page
		(start of returned area)

	The bits returned are the same as for .PAGCA

3.  Add new bits to values for the above two functions and .PAGCA:

	PA.GNS		;Page is in a non-existent section
	PA.GVR		;Page is a virtual spy page

    Also, for .PAGCA and .PAGAL, return PA.GPN for spy pages, the virtual
    or physical target page being SPYed upon.

[Diagnosis]
Yes.

[Cure]

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	VMSER	PAGJMP
		S
		UUOSYM


[End of MCO 11744]
MCO: 11746		Name: KBY		Date: 21-Jan-85:10:06:08


[Symptom]
Monitor gets confused if PAGE. UUO tries to munge its arg list.

[Diagnosis]
Shouldn't let user do this

[Cure]
Return illegal arg list error if he tries.

[Keywords]
PAGE.

[Related MCOs]
None

[Related SPRs]
33138

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	VMSER	PLTSN1,CHGSEC

702A		VMSER	PLTSN


[End of MCO 11746]
MCO: 11748		Name: RDH		Date: 21-Jan-85:16:23:18


[Symptom]

ANF network free core is not always returned to  the  general  monitor
free  core  pool,  resulting  in  a  potential  loss of overall system
performance, inability to create new jobs, etc.   due  to  a  lack  of
monitor free core.

[Diagnosis]

Off-by-one  indexing  in  PCBSEC,  so  that  the  maximum-message-size
buffers are never scanned to be deallocated.

[Cure]

Allow for maximum-message-sized buffers.

[Keywords]
FREE
CORE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	NETSER	PCBSEC

702A		NETSER	PCBSEC


[End of MCO 11748]
MCO: 11749		Name: RDH		Date: 21-Jan-85:18:17:04


[Symptom]

The monitor calls manual says a CLOSE to a LPT gives a free <FF> unless
IO.SUP set. ANF network LPTs don't do this. This is especially noticable
on LN01s where the printer hasn't let go of the last page of your file -
the LN01 doesn't have a "page feed" key . . .

[Diagnosis]

No code.

[Cure]

Add code.

[Keywords]
lpt
<FF>

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	NETDEV	L.FRST,L.CLO,L.XFF


[End of MCO 11749]
MCO: 11750		Name: RCB		Date: 22-Jan-85:02:13:46


[Symptom]
New:	Add the CHTRN. UUO (CALLI 223).

CALL:
	XMOVEI	AC,ADDR		-OR-	MOVE	AC,[IFIW ADDR]
	CHTRN.	AC,
	  ERROR RETURN, CODE IN AC
	SUCCESS RETURN

ADDR:	XWD	Flags,Source-count
	EXP	Source byte pointer (word 1)
	EXP	Source byte pointer (word 2)
	XWD	Reserved,Destination-count
	EXP	Destination byte pointer (word 1)
	EXP	Destination byte pointer (word 2)

Flag bits defined:

	CH.FBR==1B0	;Fallback representation (translate 8-bit to 7-bit)
	CH.OVR==1B1	;Include overprinting in fallback representation
	CH.RAI==1B2	;Raise case (fold lower case to upper)
	CH.6BT==1B3	;Convert ASCII to SIXBIT
	CH.IGN==1B4	;Ignore extra bits (do not range-check characters)
	CH.ESC==1B5	;Map 7-bit escape sequences to 8-bit when possible
	CH.X6B==1B6	;Expand SIXBIT source to ASCII destination


Possible error returns:

	CHADC%==1	;Address check reading or writing arguments
	CHBYP%==2	;Illegal byte pointer
	CHINV%==3	;Unknown or reserved flag bit specified
	CHILC%==4	;Illegal character encountered during translation
	CHDCE%==5	;Destination count exhausted prematurely
	CHIBC%==6	;Invalid bit combination specified


All errors will update the argument block appropriately, just like a success
return.  On a success return, the AC is unchanged.  The byte pointers returned
will have any indirection and indexing resolved, and will be expanded from
one-word global format to two-word global format if a OWGBP was specified.

[Diagnosis]

[Cure]

[Keywords]
8-BIT ASCII

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	DATMAN	QRNGE
		S	ERCODX
		COMMON	ECODX
		UUOCON	NAMES
		SCNSER	CHTABL
		UUOSYM	CHTRN.


[End of MCO 11750]
MCO: 11751		Name: DPM		Date: 22-Jan-85:05:11:30


[Symptom]
LOGIN can't always attach to the desired job.

[Diagnosis]
ATTACH UUO fails because LOGIN is running logged-in on a
local terminal trying to attach to a detached job.  The
code to prevent the attach from suceeding is trying to
protect the stupid REATTA program (which is unsupported).

[Cure]
Don't be so paranoid.

[Keywords]
ATTACH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	UUOCON	UATTAC


[End of MCO 11751]
MCO: 11752		Name: DPM		Date: 22-Jan-85:05:16:22


[Symptom]
Surprise:  The REATTA program is unsupported, but is still
documented as a command (??) in the commands manual.

New: Make the REATTA command run LOGIN which is not quite as
stupid as the old REATTA program.

[Diagnosis]

[Cure]

[Keywords]
REATTACH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	COMMON	COMTAB,DISP


[End of MCO 11752]
MCO: 11753		Name: RCB		Date: 22-Jan-85:05:24:33


[Symptom]
New:  Add the TRMOP. function .TOUNR (unread) to allow reading only the
already echoed characters without worrying about allowing further echo.
This is needed for CTHNRT to be able to perform the CTERM UNREAD function.

CALL:	MOVE	AC,[2,,ADDR]

ADDR/	.TOUNR	;(37)
	TTY UDX


Once an unread is done, input will not block (or allow echoing) until
an empty buffer is returned (IN/INPUT UUOs) or a null character is returned
(INCHRW/INCHWL) or the 'no input available' return is taken (INCHSL/INCHRS).
After this termination condition is met, subsequent attempts to perfrom input
will behave normally.

[Diagnosis]

[Cure]

[Keywords]
CTERM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	SCNSER	TOPTB0,TOPUNR,TTYIN0,NXTOOB,RECOB4,CLRUNR,LDBBYT
		NETDEV	MCROKE
		UUOSYM	TRMOP.


[End of MCO 11753]
MCO: 11754		Name: DPM		Date: 22-Jan-85:05:34:42


[Symptom]
CTX. UUO uses 18-bit addresses even though that's not kosher
these days.

[Diagnosis]
Re-organize the UUO argument block as follows:

 .CTFNC==0			;FUNCTION CODE WORD
   CT.PHY==1B0			   ;PHYSICAL ONLY RUN UUO
   CT.LEN==777B17		   ;LENGTH OF BLOCK INCLUDING THIS WORD
   CT.FNC==777777B35		   ;FUNCTION CODE
      .CTSVH==0			      ;SAVE CURRENT CONTEXT, HALT JOB
      .CTSVR==1			      ;SAVE CURRENT CONTEXT, RUN PROGRAM
      .CTSVT==2			      ;SAVE CURRENT CONTEXT, CREATE A TOP LEVEL
      .CTSVS==3			      ;SAVE CURRENT CONTEXT, SWITCH TO ANOTHER
      .CTSVD==4			      ;SAVE CURRENT CONTEXT, RUN PROGRAM
      .CTRDB==5			      ;READ DATA BUFFER
      .CTWDB==6			      ;WRITE DATA BUFFER
      .CTRQT==7			      ;READ QUOTAS INTO DATA BUFFER
      .CTSQT==10		      ;SET QUOTAS IN DATA BUFFER
      .CTDIR==11		      ;RETURN A DIRECTORY MAP OF ALL CONTEXTS
      .CTINF==12		      ;RETURN INFORMATION ABOUT A CONTEXT
 .CTDBL==1			;DATA BUFFER LENGTH
 .CTDBA==2			;DATA BUFFER ADDRESS
 .CTNAM==3			;SIXBIT CONTEXT NAME
 .CTRNO==4			;RUN UUO OFFSET
 .CTRNB==5			;RUN UUO BLOCK ADDRESS
 .CTTMN==6			;TMPCOR LENGTH,,SIXBIT NAME
 .CTTMB==7			;TMPCOR BUFFER ADDRESS
 .CTMAX==10			;LENGTH OF ARGUMENT BLOCK

; DATA BUFFER OFFSETS FOR FUNCTIONS .CTRQT AND .CTSQT
 .CTJOB==0			;JOB NUMBER
 .CTCTQ==1			;CONTEXT QUOTA
 .CTPGQ==2			;SAVED PAGES QUOTA

; DATA BUFFER OFFSETS FOR FUNCTION .CTDIR
;.CTJOB==0			;JOB NUMBER
 .CTWCT==1			;RETURNED WORD COUNT OF BYTE-STREAM DATA
 .CTFDW==2			;FIRST DATA WORD OF DIRECTORY BYTE-STREAM

; DATA BUFFER OFFSETS FOR FUNCTION .CTINF
;.CTJOB==0			;JOB NUMBER
 .CTCNO==1			;THIS CONTEXT'S NUMBER
 .CTCNM==2			;THIS CONTEXT'S NAME
 .CTSNO==3			;SUPERIOR'S CONTEXT NUMBER
 .CTSNM==4			;SUPERIOR'S CONTEXT NAME
 .CTPGM==5			;PROGRAM NAME
 .CTITM==6			;IDLE TIME IN TICKS

; ON ANY RETURN, THE AC WILL CONTAIN THE FOLLOWING
   CT.DAT==1B0			;DATA WORDS RETURNED
   CT.DBT==1B1			;DATA BUFFER TRUNCATED
   CT.ETX==1B2			;ERROR TEXT IN DATA BUFFER
   CT.RUN==1B3			;RUN UUO ERROR
   CT.RDL==777B27		;WORDS IN DATA BUFFER
   CT.ERR==777B35		;ERROR CODE

[Cure]

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	CTXSER
		UUOSYM


[End of MCO 11754]
MCO: 11756		Name: DPM		Date: 22-Jan-85:05:54:22


[Symptom]
New: Define a new file "OTS" type code for MS-formatted mail files.
The new code is .RBOMS in the RB.DTO field of the .RBTYP word.

[Diagnosis]

[Cure]

[Keywords]
MAIL

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	UUOYSM	.RBOMS


[End of MCO 11756]
MCO: 11757		Name: RCB		Date: 22-Jan-85:06:02:15


[Symptom]
New:	Add TRMOP. .TOASO (ASCII string output) to type out a string with
	arbitrary byte size.  The argument block is the same as for the
	image outstr function (.TOISO) except for the function code.  The
	only other difference between the two functions is whether the
	characters are transmitted as normal ASCII or as image.

[Diagnosis]

[Cure]

[Keywords]
DIU

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	261	SCNSER	TOPTB0,TOPASO,TOPISO
		UUOSYM	TRMOP.


[End of MCO 11757]
MCO: 11758		Name: FAIRBANKS		Date: 22-Jan-85:08:46:36


[Symptom]
Add LLMOP code.

[Diagnosis]

[Cure]

[Keywords]
LLMOP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
KL10 only
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		LLMOP
		LLMPRM
		COMNET
		SYSINI
		UUOCON
		UUOSYM


[End of MCO 11758]
MCO: 11759		Name: JAD		Date: 24-Jan-85:13:03:04


[Symptom]
Refresher loses blocks.

[Diagnosis]
REFSTR was changed in 7.02 to allocate UFDs near the center
of the structure.  It does by calling TAKBLK asking for -1 blocks
starting at block <unit size>/2.  REFSTR knows this allocation
will fail, but will leave the correct SAT positioned for future
allocation of the UFDs.  Unfortunately, TAKBL is reducing the
allocation from -1 to <group size> blocks, which causes the
allocation to succeed.  Zap, some lost blocks.

[Cure]
Test for DINITF in TAKBL and don't reduce allocation if set.

[Keywords]
LOST BLOCKS
REFRESHER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	FILIO	TAKBL


[End of MCO 11759]
MCO: 11760		Name: JAD		Date: 24-Jan-85:13:05:10


[Symptom]
ONCE input routine doesn't handle some common editting characters.

[Diagnosis]
Not enough code.

[Cure]
Add code.  ONCE input routine will now accept BACKSPACE equivalent
to DELETE, ^R to retype the current line, and ^U to delete the
entire input line.

[Keywords]
ONCE
INPUT EDITTING

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	ONCE	GETLIN,CNTRLU,RETYPE


[End of MCO 11760]
MCO: 11761		Name: JAD		Date: 24-Jan-85:13:07:08


[Symptom]
AOBJN pointer to TABSTR is one too large, allowing
you to mount 37 file structures if .SLMAX is set to 36.

[Diagnosis]
-.SLMAX-1

[Cure]
-.SLMAX

[Keywords]
STRAOB

[Related MCOs]
None

[Related SPRs]
33868

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	COMMOD	STRAOB


[End of MCO 11761]
MCO: 11764		Name: JAD		Date: 24-Jan-85:16:49:47


[Symptom]
A file may be marked for deletion while FILDAE is
checking access to that file.  We use the old (wrong) A.T.

[Diagnosis]
No code.

[Cure]
Add code.  Check if the A.T. has become unacceptable during
the time we were off letting FILDAE do his thing.

[Keywords]
FILDAE
ACCESS TABLE

[Related MCOs]
None

[Related SPRs]
32761

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	FILFND	ACCLP1

702A		FILFND	ACCLP1


[End of MCO 11764]
MCO: 11765		Name: JAD		Date: 25-Jan-85:15:17:08


[Symptom]
Multiply used clusters and/or RIB errors on multi-unit structures.

[Diagnosis]
If the UFD gets extended, and the file is being created on a
different unit than the UFD, there is no guarantee the SATs will
be written to reflect the extra cluster grabbed for the UFD.  As
soon as file activity occurs on the UFD unit the SATs will be
written, but if a crash occurs before then too bad.

[Cure]
Call WTUSAT after extending the UFD.

[Keywords]
MULTIPLY USED CLUSTERS

[Related MCOs]
None

[Related SPRs]
32557

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	FILUUO	UFDAL9

702A		FILUUO	UFDAL9


[End of MCO 11765]
MCO: 11767		Name: JAD		Date: 26-Jan-85:16:01:13


[Symptom]
Useless dumps when an HSC-50 or one of its units are configured
in the wrong mode to be used with TOPS-10.  Also, we aren't told
which HSC-50 has the problem.

[Diagnosis]
"NODUMP" stopcode option didn't exist when I wrote the code.
I forgot to print the node number for the KN5 stopcode.

[Cure]
"DEBUG" ==> "NODUMP" in KN5 and UN5 stopcodes.  Add a routine to
the KN5 stopcode macro which prints the CI node number.

[Keywords]
KN5
UN5
USELESS DUMPS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	RAXKON	RAXSCC,RAXUO2,DIEKN5


[End of MCO 11767]
MCO: 11777		Name: RDH		Date: 29-Jan-85:01:17:33


[Symptom]

The -10 gets bored on lonely nights when all operators have gone home
and there is no one else with which to talk.

[Diagnosis]

Noone but a bunch of diddlysquat little -11s to talk to (have you
ever tried to carry on an intellectual conversation with an -11? It's
a pretty grim undertaking...)

[Cure]

Introduce the -10 to the blustery new world out there:
Support NCL on the ethernet.

[Keywords]
ANF
Ethernet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	NETPRM
		COMNET
		D85INT
		D8EINT
		D8KINT
		D8RINT
		D8SINT
		NULFEK
		NETDEV
		NETSER


[End of MCO 11777]
MCO: 11778		Name: DPM		Date: 29-Jan-85:07:27:21


[Symptom]
Protected applications are not protected against unpriv'ed users.

[Diagnosis]
Attach to a program with program-to-run set to exclude monitor
mode lets the user get to monitor mode.

[Cure]
Don't.

[Keywords]
ATTACH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	UUOCON	UATTAC


[End of MCO 11778]
MCO: 11796		Name: TL		Date:  1-Feb-85:14:05:48


[Symptom]
MONGEN is an all or nothing proposition.

[Diagnosis]
FTUNSUPPORTED seemed like a good idea at the time.

[Cure]
MUNGEN.
Make MONGEN self-configuring.  Remove FTUNSUPPORTED and FTAUTO.
Add the MONGEN dialog option to 
	Which GEN:
Allow each possible unsupported option to be independently (de)selected.

[Keywords]
MONGEN
MUNGEN
UNSUPPORTED
Hmmmm

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	263	MONGEN	LOTS


[End of MCO 11796]
MCO: 11801		Name: RDH		Date:  3-Feb-85:16:54:35


[Symptom]

	[This MCO superseded by MCO 11819]

[Diagnosis]

[Cure]

[Keywords]
IO.IMP
RDX
MULTIPOINT

[Related MCOs]
None

[Related SPRs]
31910

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	262	NETDEV	R.MXMT

702A		RDXSER	R.MXMT


[End of MCO 11801]
MCO: 11804		Name: DPM		Date:  5-Feb-85:03:14:33


[Symptom]
Can't find CI or NI port control blocks.

[Diagnosis]
No GETTABs

[Cure]
Add %CCCIP (24,,55) to return addr of CI port control block.
Add %CCNIP (25,,55) to return addr of NI port control block.

[Keywords]
CONFIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	263	COMMON	CDB
		UUOSYM	.GTC0C


[End of MCO 11804]
MCO: 11812		Name: RDH		Date:  6-Feb-85:17:30:21


[Symptom]

Output data can  be  lost  on  DN8x  "RDM"  (multipoint  (DDCMP)  RDX)
terminals.

[Diagnosis]

The DN8x tries to avoid "congestion" of DDCMP lines by  throwing  away
"unimportant"  DDCMP  messages  such as REPs, NAKs, etc.  if the DDCMP
output queue for a DDCMP line starts getting backed up  (which  is  to
say has more than 40 messages queued).  Unfortunately, output destined
for a multipoint DDCMP line slips through the check  for  "real  data"
and  can  be  thrown away.  Since the "real data" has already been NCL
ACKed it is irretrievably lost.

[Cure]

If the DDCMP line is a multipoint line then assume that the line is an
RDM terminal line and preserve the data (i.e., assume that the data is
NOT NCL network data and therefore not recoverable).

[Keywords]
MULTIPOINT
RDX
DATA LOST

[Related MCOs]
None

[Related SPRs]
32592

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	DNDCMP	DDQSOL

702A		DNDCMP	DDQSOL


[End of MCO 11812]
MCO: 11815		Name: JMF		Date:  7-Feb-85:19:33:35


[Symptom]
Not enough room in high core to autoconfigure a large system with a monitor
containing service routines for all devices and all software options.

[Diagnosis]

Only 256K of virtual address space in section 0.

[Cure]

Invent a new mechanism which allows intrasection calls between section 0, 1
and higher sections. This mechanism is in the form
	SNCALL	(subr,sn)
where subr is the name of the subroutine to be called, and sn is the section
the subroutine is to be executed in. The code generated has the effect of
doing a PUSHJ P,subr in section number sn. Return is nonskip/skip to the
caller in the section that the call was executed in.

At system startup, move any code located between MONTOP (alias VMEND), and
MONEND to section MS.HGH (currently section 7).

Using the above, put DECnet in section 7 by inserting SNCALLs as appropriate
and loading D36COM, DNADLL, LLINKS, NTMAN, ROUTER, SCLINK, and SCMUUO between
MONTOP and MONEND. Section 0, 1, and 7 are mapped 1:1 but the DECnet code is
only mapped in section 7. This allows the DECnet modules to address anything
between 0 and VMEND, but DECnet itself can only be called via SNCALL and 
section changing calls executed within DECnet must use SNCALL.

The above gives us about 35 pages of high section 0/1 core which can be used
for autoconfiguring and 10-12 pages of symbol table back since the high and
high high (DECnet) segments can be moved to the top of section 0 (reserving
space for autoconfiguration is no longer necessary).

The above means that the load order of monitor modules is important. Anything
loaded between VMSER and the new monitor module MONEND will end up in section
MS.HGH and will not be addressable in section 0/1.

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	NRTSER
		NTMAN
		S
		CLOCK1
		LLMOP
		VMSER
		SCMUUO
		D36COM
		ONCE
		D36PAR
		DNADLL
		COMMON
		SYSINI
		KLSER
		CPNSER
		UUOCON


[End of MCO 11815]
MCO: 11818		Name: KBY		Date:  8-Feb-85:15:54:50


[Symptom]
Undeserved  ?Ill addr in UUO when doing SAVE.

[Diagnosis]
JBTADR for high seg gets trashed with JBTADR for job
going through FIXDSK.

[Cure]
Load JBTADR for high seg instead of that for job if it's a
high seg.

[Keywords]
Ill addr

[Related MCOs]
None

[Related SPRs]
33677

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	VMSER	FIXDS1
702A	


[End of MCO 11818]
MCO: 11819		Name: RDH		Date: 11-Feb-85:00:53:00


[Symptom]

Problems with multipoint RDX output:

     1.  User program gets undeserved IO.IMP error return from OUT  of
         large  (but  not  erroneously  so)  buffers to multipoint RDX
         devices;

     2.  Data requests can be lost;

     3.  Output data is "hung" in the -10 and never gets sent;

     4.  Blocking output doesn't block (i.e., can take a  non-blocking
         return to the user program from the OUT monitor call);

     5.  Possible WEM stopcode;

(Note: this MCO supersedes MCO 11801)

[Diagnosis]

If the buffer is too large to  fit  the  'default'  32-word  PCB  size
allocated  by  the monitor, the user's buffer is split across multiple
PCBs for transmission to the remote.  Unfortunately  RDXSER  needs  to
put  the  multipoint 'DROP' number into each message, so it treats the
first part of each PCB's worth of data as the five-digit drop  number,
usually  finding  'junk'  on  all  but the first segment of the buffer
(where the drop number is supposed to  be),  so  lighting  IO.IMP  and
aborting the OUT monitor call.

Further, if RDXSER cannot get a PCB to send  the  buffer,  it  doesn't
correctly  "back out" of the transmit attempt.  The data request count
has already been decremented, and is  not  re-incremented.   The  drop
number has already been parsed, and is lost.  Also, the "error" (i.e.,
"non-blocking") return to UUOCON is always taken, whether or  not  the
RDM device is OPENed in a non-blocking I/O mode.

Finally, the "drop" number field is not counted  in  the  NCL  "COUNT"
field.

[Cure]

Dynamically calculate the PCB buffer size based on  the  size  of  the
output request from the user.  If the user's buffer contains more data
than either the RDX device's maximum message size (RDEMML parameter in
the DN8x) or the network maximum message size (MSGMAX parameter in the
7.02 monitor) then abort the output and return an IO.BKT error to  the
user.   Note  that this means that the segmenting of user data buffers
over the ANF network is NOT supported for multipoint RDX devices.

When RDXSER is unable to get a PCB, back up the  DEVAXO  byte  pointer
and  counter  to the begining of the drop number so that the next time
through ROLOOP (the RDX output service loop) it can again reparse  the
drop  number.   Take  the  non-blocking  return  to UUOCON iff the RDM
device is OPENed in a non-blocking I/O  mode,  otherwise  call  NETSLP
(i.e.,  block) waiting for a free PCB to do the output.  (Note that in
this hopefully-rare case of non-blocking I/O being unable  to  do  the
output because of the lack of a PCB, the user program cannot depend on
getting an (e.g.,) "output-done"  PSI  interrupt.   Instead  the  user
program  must  have some sort of "hung timer" which will cause the OUT
monitor call to be re-executed at some time in the future if  all  the
output  buffers  have  not  been  sent.   This is not a new condition,
merely a non-obvious one of which the programmer should be cognizant.)
The  data  request count is automatically kept accurate in 7.02 by not
decrementing the count until the PCB  has  been  sent  (This  involved
splitting 7.01's NTDCDQ routine into two routines - NTDCDQ to check if
any data requests are available, and NTDDDQ to actually decrement  the
data request count after the PCB has been queued for output).

Finally, include the drop number in the NCL message "COUNT" field when
building the NCL data message.

[Keywords]
RDX
MULTIPOINT

[Related MCOs]
11801

[Related SPRs]
32842, 31910

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	NETDEV	R.MXMT,R.OBTL

702A		RDXSER	R.MXMT,R.OBTL


[End of MCO 11819]
MCO: 11821		Name: FAIRBANKS		Date: 11-Feb-85:11:26:57


[Symptom]
DTE ANF10 nodes can TRAP unnecessarily on a power fail restart.
	

[Diagnosis]
On a power fail restart TENSCB may be non-zero on entry
to routine DTEINI but the SCB it points to will be zeroed by
routine CLRSCB. When the DTE's are checked at loop level, INTLPS
will be called because TENSCB is non-zero and a TRAP will occur
because .PRDTE (primary DTE) is zero.

[Cure]
Always if .PRDTE is cleared, TENSCB should be cleared since
if there is no DTE functional, there is no DTE route to the ten.

[Keywords]
POWER
FAIL
TENSCB

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
701B		DNCOMM	INI.10
702A	
703	


[End of MCO 11821]
MCO: 11826		Name: TL		Date: 11-Feb-85:17:19:24


[Symptom]
Despite the contrary documentation, you can not supply an
expression to Decimal symbol, value.

If you supply an expression in Octal symbol, value, it may not contain
the * or ! operators, nor nested <>.

Config text may not contain *.

[Diagnosis]
MCO 10954 was a good idea, but it didn't go far enough.

[Cure]
Allow any legal expression in either octal or decimal symbol
definitions.  (SIXBIT expressions are pointless).  Allow * in config.

[Keywords]
expression
widget

[Related MCOs]
10954

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	MONGEN	WIGEXP,DSYLOP,OSYLOP


[End of MCO 11826]
MCO: 11831		Name: JMF		Date: 12-Feb-85:07:25:41


[Symptom]
SCHED. function 32 (set free core goals/limits) requires that the
user provide the number of pages that must be free and potentially free to
cause the swapper to swap out jobs in long term wait. The typical system
adminstrator wouldn't even have any idea how many pages of user core he has
available.

[Diagnosis]

[Cure]
Change the arguments to percentages of free and potentialy free core.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	SYSINI	KIIN10
		SCHED1	SCHWFL
		COMMON	USRCOR


[End of MCO 11831]
MCO: 11832		Name: KBY		Date: 12-Feb-85:08:47:03


[Symptom]
Random stopcodes caused by running a job which is in ^C state.
Usual symptom is an EUE.

[Diagnosis]
The wondrous swapper of 7.02 is multithreaded.  Unfortunately
the background batch variables and their relationship to the rest of
the swapper isn't.  If a background batch job is being fitted in at
the same time a normal job is, and FININ runs across the normal job
first, it will mark the normal job as on the just-in list (for background
batch, that is) and mark it as background batch, even if it isn't.  We
eventually pick the job to run because it's on the just-in list even though
it's in STOPQ or CMQ which don't have runnable jobs in them.
	We can also try to fit more than one background batch
into core at once and we'll only remember the last.

[Cure]
1.  SKIPN-->CAME; SETZM-->CAMN,SETZM.
2.  SKIPN (don't try and fit more than one background batch job in at a time).

[Keywords]
Class schedular
Background batch
Zurich

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	264	SCHED1	BQFOR,FININ3,FININ7
702A	


[End of MCO 11832]
MCO: 11836		Name: KBY		Date: 14-Feb-85:16:33:40


[Symptom]
If a RTTRP interrupt which does a WAKE UUO occurs between the
time a HIBER UUO puts the SLPQ code into JBTSTS and the time SETSLP/SETNAP
put the SLPQ/NAPQ code into JBTSTS (for a HIBER with a non-zero sleep time)
(at SETSTT), then the job stays asleep instead of running immediately on
as should have been the case.

[Diagnosis]
HIBER sets up to sleep, then releases SYSPIF after setting
the SLPQ code.  Unfortunately, if there's a non-zero sleep time,
the MSLEEP is called to set up the clock queue entry and again
jams SLPQ/NAPQ into JBTSTS.  If the WAKE occured between the first
and second settings of JBTSTS, the WAKE gets lost.

[Cure]
Rearrange HIBER to set the queue only once.

[Keywords]
HIBEr
RTTRP

[Related MCOs]
None

[Related SPRs]
33609

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	265	UUOCON	HIBER4,MSLEEP
702A		CLOCK1	SETSTT


[End of MCO 11836]
MCO: 11840		Name: RDH		Date: 15-Feb-85:15:13:37


[Symptom]

Output data can be lost on DN8x "Decnet Compatible Port" lines.

[Diagnosis]

The DN8x tries to avoid "congestion" of DDCMP lines by  throwing  away
"unimportant"  DDCMP  messages  such as REPs, NAKs, etc.  if the DDCMP
output queue for a DDCMP line starts getting backed up  (which  is  to
say has more than 40 messages queued).  Unfortunately, output destined
for a DECnet compatible port DDCMP line slips through  the  check  for
"real data" and can be thrown away.  Since the "real data" has already
been NCL ACKed it is irretrievably lost.

[Cure]

If the DDCMP line is a DECnet compatible port line then  preserve  the
data (i.e., assume that the data is NOT NCL network data and therefore
not recoverable).

[Keywords]
DCP
DDCMP
NSP

[Related MCOs]
11812

[Related SPRs]
34922

[MCO status]
Checked

[MCO attributes]
HOSS attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		DNDCMP	DDQSOL

702A		DNDCMP	DDQSOL


[End of MCO 11840]
MCO: 11842		Name: DPM		Date: 18-Feb-85:03:07:19


[Symptom]
SMP startup problems: apparent off-line disks, unusable kontrollers,
down CPUs, etc. on non-boot CPUs.

[Diagnosis]
1042 is old and doesn't run as fast as it used to.

[Cure]
ONCMOD must be more patient when it queues I/O requestes to CPU1 at
once-only time.

[Keywords]
OLD AGE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	265	ONCMOD	CPUXCT


[End of MCO 11842]
MCO: 11845		Name: DPM		Date: 18-Feb-85:08:20:08


[Symptom]
OPR under MIC doesn't.

[Diagnosis]
MIC doesn't know when a job HIBERs with wakeup on TTY I/O.

[Cure]
Wake MIC when a job HIBERs with HB.RTC or HB.RIO set.  Change the
MIC "get status" TRMOP to return TO.LUM (line wants input).

[Keywords]
MIC
OPR

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	265	SCNSER	TTCCHK,TTLCHK,TOPMGT


[End of MCO 11845]
MCO: 11855		Name: DRB		Date: 20-Feb-85:13:22:40


[Symptom]
Reading SWITCH.INI with big buffers gives mostly empty big buffers.

[Diagnosis]
Code at INPSW7 assumes 200 word buffers.

[Cure]
yes.

[Keywords]
SWITCH.INI
Big buffers

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	FILUUO	INPSW7


[End of MCO 11855]
MCO: 11858		Name: JAD		Date: 21-Feb-85:11:22:43


[Symptom]
Stopcode DHD when structure is yanked

[Diagnosis]
RIBSAT doesn't keep very good track of when it has or
doesn't have the DA.  If the call to NEWUNI fails because the
unit (structure) has been yanked, we call DWNDA without ever
having have called UPDA.  Ding ding ding.

[Cure]
Don't give up DA when we ain't got it.

[Keywords]
DHD STOPCODE
YANK STRUCTURE

[Related MCOs]
None

[Related SPRs]
35106

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	FILUUO	RIBSAT


[End of MCO 11858]
MCO: 11859		Name: KBY		Date: 21-Feb-85:11:49:37


[Symptom]
KAF removing PFH if it has a hole in it.  Not relevant for 7.03,
but might as well have the code right.

[Diagnosis]
Misplaced target of JUMPE.  Note that a "hole" could mean
JOBPFH points to junk.

[Cure]
Fix target.

[Keywords]
PFH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	VMSER	RMVPF1
702A	


[End of MCO 11859]
MCO: 11861		Name: JAD		Date: 21-Feb-85:12:37:52


[Symptom]
Stopcode IME yanking structure

[Diagnosis]
UNISAB isn't zeroed after removing a structure.  If we
wind up at WTUSAT (possible in CLOSE/RELEASE code) we will
attempt to link down SABRNG.  SABRNG for the first SAB will
probably have been clobbered by GVFWDS and things go down
hill when we step to the next SAB.

[Cure]
Have TSTGIV zero UNISAB when it returns SAB core.  TSTGIV already
does this for SPT core.  Change TSTGIV to zero UNISAB and UNISPT
BEFORE returning the core so WTUSAT doesn't think a SAB is still
set up while we're blocked in GVFWDS returning the space.  Also
check in WTUSAT after calling SATWRT to see if UNISAB got zeroed
while we were blocked in UUOPWQ, and exit from WTUSAT if so.

[Keywords]
IME STOPCODE
YANK STRUCTURE

[Related MCOs]
11858

[Related SPRs]
35106

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	FILFND	SSTGV1
702A	


[End of MCO 11861]
MCO: 11864		Name: LWS		Date: 22-Feb-85:15:36:58


[Symptom]
1. WEM stopcodes

2. QUASAR has a hard time mounting (REASSIgning) ANF devices to users who
   request them.

3. Even if (2) above worked, QUASAR still couldn't set the logical
   name of an ANF device for a user before REASSIgnment.

[Diagnosis]
1. DEVOP. code to clear DVCMDA in DDB mistakingly clears
the label status bits in DEVIOS of non-magtape DDBs. When this
happens to network DDBs, NETSER gets upset when attempting to
disconnect the device.

2. After each UUO, network devices (DDBs) that are not assigned are
disconnected via ZAPNET. QUASAR has to do 2 UUOs before the  REASSIgn
UUO (DEVOP to set DVCMDA, and DEVLNM to set logical name), however
after each UUO, the network device is disconnected. This makes it almost
impossible for QUASAR to "mount" ANF devices for users.

3. DEVLNM makes sure the owner of a device is the one trying to set the
logical name, or if it isn't owned, MDA is the one.
The check for MDA is only done if the job number in DEVJOB is zero.
If the DDB was created by MAKDDB when MDA was doing the DEVOP. to lite
DVCMDA, MDA's job number will be in DEVJOB.


[Cure]
1. In DVPMDC, JUMPN T3,CPOPJ1 => JUMPGE T3,CPOPJ1.

2. Don't call ZAPNET to disconnect a network device if DVCMDA is lit in
DEVCHR(F).

3. If the device isn't assigned  and if MDA is doing the DEVLNM and MDA's job
number is also in DEVJOB(F), let the DEVLNM succeed.

[Keywords]
WEM
MDA

[Related MCOs]
None

[Related SPRs]
34895

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	UUOCON	DVPMDC,RELE6A,UUONET,DEVLNM
		COMDEV	CHWERE
		NETSER	NETCT4

702A	


[End of MCO 11864]
MCO: 11865		Name: RDH		Date: 23-Feb-85:18:53:27


[Symptom]

New:

GETTAB table .GTVIR = job's virtual size. Index by job number (not a
segment-table).

GETTAB .GTCNF entry %CNIVM = 'AND' mask for .GTIMI/.GTIMO/.GTVIR.

Documentation: GTIMI is the job's physical memory size while in actual
physical memory. GTVIR is the job's total virtual memory size. Both
GETTABs include 'extraneous' stuff in high order bits, and should be
ANDed with %CNIVM to generate an actual page count (at this writing,
%CNIVM = 7,,777777 = 21-bit's worth of page count[*]). Other quirks:
GTIMI includes non-shareable high segment size (but *NOT* shareable
high segments); GTVIR does *NOT* include non-shareable high segment
size (which is - at this writing - found in bits 6-14 of GTVIR[*]);
GTIMI is a job+segment table (shareable high segment physical size
found by segment number); GTVIR is job-only table; Neither table
contain monitor-overhead page count (which are more-subtly scattered
around - at this writing, the page-map and other "per-process" page
count is bits 12-17 of GTPDB[*], while the non-zero-section-map page
count is bits 9-14 of GTIMI[*]; together these two quantities consitute
the "monitor overhead" page count for the job).

[*]  =  Precise details subject to vacillation at random developers'
	whims, so probably a bad documentation risk . . .


[Diagnosis]

[Cure]

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	COMMON
		UUOCON
		UUOSYM


[End of MCO 11865]
MCO: 11866		Name: RDH		Date: 25-Feb-85:01:47:33


[Symptom]

VTMQED stopcodes

[Diagnosis]

Dangling bits in LDBREM

[Cure]

Make the "NETWORK" LDBs into a true "free pool" of LDBs under the
control of SCNSER. This way NRTSER/LATSER/othercronies won't have
to steal ANF terminals, then try to give them back without ANF's
noticing.

GETLDB is routine in SCNSER to call with server-class flag in T1
(LTLANF, LTLNRT, LTLLAT). Return is skip with U/address of LDB if
successful, otherwise non-skip.

DETLDB is routine in SCNSER to call with LDB address in U. Return
is non-skip always with the LDB/DDB detached/etc. Generally, you
should call DETLDB immediately before FRELDB.

FRELDB is routine in SCNSER to call with LDB address in U. Return
is non-skip always. The referenced LDB is returned to SCNSER's
free pool of available LDBS.

The caller is responsible for "customizing" the LDB according to
his needs.

The LDBTTW word has new bits in it:

	LTLANF		ANF network virtual terminal
	LTLNRT		DECnot NRT/CTERM terminal
	LTLLAT		LAT terminal
	LTLREM		"OR" of all the above
	LTLUSE		LDB-in-use flag

In particular, note the disappearance of LDRREM from LDBDCH.

New stopcode: LDBNIU - "LDB Not In Use" - occurs whenever a call to
FRELDB is made (e.g., from NETMCR for ANF, NRTSER for DECnet NRT/CTERM,
LATSER for LAT terminals) for a terminal which does not have the LTLUSE
bit set in the LDBTTW word of the terminal's LDB (the LTLUSE bit should
have been set on the successful return from GETLDB).

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	COMMON
		COMDEV
		COMCON
		NETDEV
		NETSER
		NRTSER
		LATSER
		SCNSER
		UUOCON
		SYSINI


[End of MCO 11866]
MCO: 11870		Name: KBY		Date: 25-Feb-85:11:00:47


[Symptom]
If a job is locking in core, and another job grabs a page
which was made free for the first job (the page is for a DDB, for
example), then the swapper hangs until the second job releases
the page.

[Diagnosis]
Pages get put on the free list as LOKCON makes them
available for a locking job, but they're free game there for
anyone who is in core and wants one.

[Cure]
Don't put pages on the free list when they're being made free
for a locked job.  Put them on a new queue (linked via PAGTAB and
PT2TAB).  This queue is moved to the free list just before the
job is moved into place.  Since the pages aren't on the free queue
until the MM is held, and are allocated properly by the time
the MM is released, the above race can no longer happen.
This entails fixing bugs in the maintenance of PT2TAB for pages
on the free list.  It also means making all core returning go
through GVPAGS, where pages will be put on LOKCON's queue
instead of the free queue when they are returned, if the bit
P2.LIP (Lock in Progress) is set in PT2TAB for the page (set
at the time the job begins to lock).

[Keywords]
LOCK
GETSEG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	VMSER	DLTPGC
702A		SYSINI
		CORE1	GVPAGS
		LOKCON	LOTS
		S
		COMMON


[End of MCO 11870]
MCO: 11871		Name: KBY		Date: 25-Feb-85:16:02:48


[Symptom]
I'm tired of looking at all these useless IPMs where someone
inadvertantly asked the swapper to swap zero pages.

[Diagnosis]
IPMs happen after a lot of interesting info is trashed.

[Cure]
Catch this case earlier and stopcode on it.  New stopcode ZPS.

[Keywords]
IPM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	VMSER	THIS


[End of MCO 11871]
MCO: 11874		Name: DPM		Date: 27-Feb-85:07:38:47


[Symptom]
Structure name conflicts using DESTROY option.

[Diagnosis]
ONCMOD will build up to 3 structures of RP20s with the names DSKF, DSKG,
and DSKH.  Then it will try to put the first CI disk into DSKG.

[Cure]
Start putting CI disks into structure DSKI instead.

[Keywords]
DESTROY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	ONCMOD	SUDEFS


[End of MCO 11874]
MCO: 11875		Name: DPM		Date: 27-Feb-85:08:35:03


[Symptom]
No way for a program to determine the high segment section number.

[Diagnosis]
No GETTAB.

[Cure]
Add .GTSG2 to return JBTSG2 and document only the section number field
(SG%SCN==37B4).Rest should say DEC-reserved.

[Keywords]
GETSEG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	266	UUOCON	NUMTAB
		UUOSYM	.GTSG2,SG%SCN


[End of MCO 11875]
MCO: 11877		Name: RDH		Date: 28-Feb-85:01:47:12


[Symptom]

Programs doing output to an ASSIGNed RDX device can  hang  in  network
event wait.

[Diagnosis]

The IOSREL "device-has-been-RELEASed" flag in the RDX device's  DEVIOS
word  is  not  being  cleared.  This will cause the RDX device service
routine to not be NETWAKed if the job ever blocks for output  (waiting
for data requests).

Note that this can only happen to ASSIGNed RDX devices -  if  the  RDX
device  was  not  ASSIGNed  then the entire DDB was destroyed when the
RELEAS was performed and the device disconnected.

[Cure]

Clear the IOSREL flag on the first call to the output service  routine
(this is the convention for network devices).

[Keywords]
RDX
OUTPUT
HUNG

[Related MCOs]
None

[Related SPRs]
33205

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	NETDEV	ROLOOP

702A		RDXSER	ROLOOP


[End of MCO 11877]
MCO: 11878		Name: DPM		Date: 28-Feb-85:04:24:09


[Symptom]
APRID not available 'til a crash.

[Diagnosis]
Yes

[Cure]
Store it in .CPAPD at CPU startup.

[Keywords]
APRID

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	COMMON	SYSTR1


[End of MCO 11878]
MCO: 11879		Name: JMF		Date: 28-Feb-85:04:28:39


[Symptom]
None observed but low core could get wiped.

[Diagnosis]
If we get to RIBERR with C(U)=0 (which could possibly happen
after a call to NEWUNI), IORMs/ANDCAMs will zap some bits in low core.

[Cure]
Rearrange the code to just return error bits to the user and bump counts
if C(U)=0.

[Keywords]
RIB error

[Related MCOs]
None

[Related SPRs]
32559

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	FILIO	RIBERR
702A	


[End of MCO 11879]
MCO: 11882		Name: JMF		Date: 28-Feb-85:09:45:32


[Symptom]
Words 11 and 12 of the FILOP. block are described in previous
MCO but not documented in UUOSYM.

[Diagnosis]

[Cure]
Document .FOBSA (word 11) = buffer starting addresses, .FOBSZ (word 12) =
buffer sizes.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	UUOSYM


[End of MCO 11882]
MCO: 11883		Name: DPM		Date:  1-Mar-85:06:21:19


[Symptom]
On some systems, a magtape cannot be referenced using MTxu:.

[Diagnosis]
If a system has two or more tape controllers and at least two
of any one type of controller, the number of magtape entries
in GENTAB is insufficient for all DDBs generated by AUTCON.

[Cure]
Assume there will be at least two of every type controller per
CPU and build that many GENTAB entries.  Since GENTAB is built
at assembly time and the actual number of tape controllers cannot
be determined until AUTCON runs, this solution may not be sufficent
to cover a worst case situation (i.e. three DX10s in a single CPU
system).  However the likelyhood of this sort of configuration is
quite remote.  In a normal configuration, there is little justification
for dynamically building GENTAB.  We will address the worst case
situation when it arises.

[Keywords]
AUTCON

[Related MCOs]
None

[Related SPRs]
34831, 34894

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	COMMON	GENTAB

702A	


[End of MCO 11883]
MCO: 11884		Name: DPM		Date:  1-Mar-85:08:23:22


[Symptom]
DX10 doesn't autoconfigure correctly.

[Diagnosis]
Storage for low core IOWD blocks for the DX10 overlap with
those for other devices.  Also the number of blocks reserved
for DX10s is wrong in monitors with FTAUTC turned on.

[Cure]
Allocate low core blocks using the GCH4WD routine.  Insure
that the ICCWs reside in physical page zero for those devices
which require this.

[Keywords]
AUTCON,DX10

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	AUTCON	BLDKDB,KDB4,KDBIOW
		COMMON	LOCOCD,LOCOCW,FREORG


[End of MCO 11884]
MCO: 11891		Name: DPM		Date:  5-Mar-85:02:30:43


[Symptom]
Can't use an indirect receiver's PID with the IPCFQ. UUO.

[Diagnosis]
Oversight.

[Cure]
Fix.

[Keywords]
IPCFQ

[Related MCOs]
None

[Related SPRs]
31867

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	IPCSER	UIPCFQ

702A	


[End of MCO 11891]
MCO: 11892		Name: DPM		Date:  5-Mar-85:04:25:15


[Symptom]
None observed, but possible IME doing tape error recovery.

[Diagnosis]
Off-by-one in range check prior to indexing into dispatch
table.

[Cure]
Yes.

[Keywords]
TAPSER on BLKK:[1,2]

[Related MCOs]
None

[Related SPRs]
34934

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	TAPSER	ERPINT

702A	


[End of MCO 11892]
MCO: 11894		Name: DPM		Date:  5-Mar-85:06:42:08


[Symptom]
Stopcode BAC, IMEs, or EUEs.  Messed up PDL also possible.

[Diagnosis]
A job is sending an IPCF packet to EXEC.  Before it could increment
 .EPIPC for EXEC, it gets interrupted and someone else sends something
to EXEC.  Both packets get processed thus decrementing  .EPIPC twice,
but we didn't count it up for the original job yet.  The second
decrement could cause the count to go to -1, but since we're dealing
with a 9-bit field, the next field (count of outstanding sends) gets
wiped.  Eventually we pick up a packet which doesn't exist and either
cause a BAC trying to give back core, or get an IME trying to reference
it, or if the address is zero, muck with the packet header thereby
smashing the ACs.

[Cure]
AOS .EPIPC when the target context is interlocked.

[Keywords]
EXEC

[Related MCOs]
None

[Related SPRs]
34908

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	267	IPCSER	IPCS13

702A	


[End of MCO 11894]
MCO: 11898		Name: JAD		Date:  6-Mar-85:10:38:49


[Symptom]
Too hard to share a CI bus among several systems.

[Diagnosis]
The disks get in the way.  If you have lots of extra money you
can buy lots of HSC-50's and spread the disks across them, and set
the software disable flag for certain nodes for specific HSC-50's.
This isn't terribly easy and is prone to errors which will take a
lot of hair pulling and blue air before they are discovered.

[Cure]
Implement the (tuh-duh) "Uncommon File System".  This software
will provide a means to restrict certain disks to certain systems.

The code is contained in the "FTSETS" conditional, defined in F.MAC.
This conditional will be set FALSE in the distributed FGEN.HLP.
No support of this code is implied by its existance.  The code
is only provided to assist customers who wish to try such bold
undertakings.  More detailed documentation will be available on
the Customer-Supported tape.

[Keywords]
UFS
CI
DISK SETS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	COMMOD	LOTS
		FGEN
		ONCE
		ONCMOD
		UUOCON
		UUOSYM


[End of MCO 11898]
MCO: 11899		Name: JAD		Date:  6-Mar-85:16:36:43


[Symptom]
Bad blocks being reused.

[Diagnosis]
Confusion in FILSER when calling CTGOOD.  We report
the right numbers but the number we put in the bad file is
off by one.  If you have few blocks/cluster you have a good
chance of getting the wrong block marked bad, causing you
to reuse the block already known to be bad.

[Cure]
Remove the confusion.

[Keywords]
BAD BLOCKS

[Related MCOs]
None

[Related SPRs]
32335

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	FILIO	POSER2,CTGOD1,POSE11,POSDN5


[End of MCO 11899]
MCO: 11906		Name: RDH		Date:  8-Mar-85:21:12:35


[Symptom]

DN8x too big

Also, DDP can lose data on a congested line (sound familiar?)

[Diagnosis]

Simple and straightforward coding practice.

Also, yet another bizarre perversion of DDCMP at DDQSOL.

[Cure]

Code in a more devious fashion.

Also, don't deliberately throw away DDP data.

[Keywords]
DEVIANT

[Related MCOs]
11812, 11840

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	DNCNFG
		DNDCMP	DDQSOL


[End of MCO 11906]
MCO: 11907		Name: TL		Date:  9-Mar-85:20:14:08


[Symptom]
TM78 ROMs out of REV, but T78KON doesn't complain.

[Diagnosis]
T78KON tries to compare 4 ROMs' REV levels at a whack.  This
means that when a low-address ROM is upgraded, higher ROMs aren't
checked.

[Cure]
Check each ROM individually.

[Keywords]
TU78
TM78
MICROCODE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Field service attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	T78KON	T78I9A
702A	


[End of MCO 11907]
MCO: 11911		Name: CJA		Date: 11-Mar-85:08:20:31


[Symptom]
LATOP UUO has a parameter called CIRCUIT-TIMER which
a user sets in terms of TICKS.  Inconsistent with 50Hz countries and
TOPS-20.

[Diagnosis]
Yes

[Cure]
The parameter is really a RETRANSMIT timer.  Take the parameter
in units of milliseconds and convert internally to the appropriate
number of ticks.

[Keywords]
LATOP
CIRCUIT-TIMER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	LATSER	LASET


[End of MCO 11911]
MCO: 11914		Name: CJA		Date: 11-Mar-85:15:33:40


[Symptom]
LAT circuits die too quickly.

[Diagnosis]
When we get notified that the NI went down, we kill
all LAT circuits almost immediately.


[Cure]
Since the NI may reappear very quickly on the other CPU (if SMP)
or the same CPU (if KLNI being reloaded), just keep the circuits alive.
If the NI is really dead, the normal circuit time-out mechanism will
kill the circuits within a minute or two.

[Keywords]
LATSER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	LATSER	MXNXCB


[End of MCO 11914]
MCO: 11915		Name: RDH		Date: 12-Mar-85:00:04:46


[Symptom]

New:	Allow "local" terminals (e.g., RSX20F) to be ASSIGNed via
	ANF network connects - i.e., allow a remote host to assign
	local host terminals.

Salient arcana:

	The connect will be rejected if SCHED 10 is set.

	The connect will be rejected if the terminal is 'busy', where
	busy means one or more of the following:

		Has a command pending;
		Has a DDB (in use either to control a job or for I/O);
		Has been SET HOSTed already.

	The connect will be rejected if the terminal is a PTY, the CTY,
	or an ANF terminal (caveat: whilst this might be construed to
	mean that a NRT/LAT terminal is eligible for assigning, this
	turns out to not be the case, as the 'CONFIG' message sent out
	by the -10 only says it has 'n' local terminals where 'n' is
	less than the ANF/NRT/LAT pool of LDBs, so the remote will never
	attempt to assign that-high-a-numbered terminal, comma, although
	if any remote were to blindly ignore the configuration and
	try to assign the terminal anyway [Shame! -ed], it would be allowed
	to succeed modulo the above-named restrictions).

[Diagnosis]

[Cure]

[Keywords]
VTM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	270	COMNET
		NETDEV
		NETSER


[End of MCO 11915]
MCO: 11924		Name: TL		Date: 14-Mar-85:06:36:02


[Symptom]
TRHKON exists.

[Diagnosis]
TM2KON doesn't do RH11s.

[Cure]
Enlighten TM2KON.

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	TRHKON	ALL
		TM2KON	LOTS


[End of MCO 11924]
MCO: 11926		Name: DRB		Date: 14-Mar-85:11:19:49


[Symptom]
Autobauded dial in lines on RSX20F front ends lie about their speed
just after autobaud detection is complete.  This can confuse customer 
modified versions of INITIA that complain if the line speed is set to
an illegal value.

[Diagnosis]
This happens because sometime before the autobaud detection is
complete, we're told that the line is set to 2400 baud (the autobaud
test speed).  After speed detection has completed, it can be a long
time before the front end tells us what the line's speed really is.
In the mean time, all we've got to tell TRMOP. is the possibly bogus
value of 2400, with no discernable way of knowing that it's wrong.

[Cure]
Fixing RSX20F to send the speed right away is a fairly major undertaking,
and fixing TTDINT to always wait for the speed to arrive just puts
needless delays in the dial in process, as well as making dialups
potentially less reliable.  It would seem that the best cure is
to continue telling lies about the line speed, but in the most
obvious fashion possible:  Set the line's speed bytes in the LDB
to zero when we receive the dataset connect message from the front
end; they'll be updated with the correct line speed when we receive
the speed message.  If a customer has modified his INITIA to watch
for certain line speeds, he can make INITIA wait for the speed to
be non-zero before the test.

[Keywords]
AUTOBAUD
RSX20F
SPEED

[Related MCOs]
None

[Related SPRs]
34958

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	TTDINT	TTDDW1

702A		TTDINT	TTDDW1


[End of MCO 11926]
MCO: 11927		Name: JAD		Date: 14-Mar-85:15:11:51


[Symptom]
The usual collection of stopcodes caused by yanking  a  structure  while
I/O is in progress.

[Diagnosis]
Too little attention paid to shutting units down gracefully.  We  barrel
ahead  and  start dissolving SDB to UDB links as soon as we bump UNIGEN.
No attempt is made to let I/O  complete  before  ripping  the  structure
apart.

[Cure]
Set the "No New Accesses" flag in the UDB as the first thing done in the
STRUUO  "remove structure" function.  Next, bump UNIGEN for all units in
the structure.  This will cause I/O which  is  started  on  these  units
subsequent  to  this to fail.  Now give up the CB resource to allow jobs
blocked in FILSER to try to finish what they are doing.   Finally,  wait
for  any  queued or active I/O on these units to complete before getting
the CB resource back.  At this point we are relatively safe  taking  the
structure apart.

[Keywords]
YANK STR

[Related MCOs]
11858, 11861

[Related SPRs]
35106, 33890, 34472, 33905, 32733

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	FILFND	LOKSTR,RMVSTR,REMST6


[End of MCO 11927]
MCO: 11928		Name: TL		Date: 15-Mar-85:07:58:32


[Symptom]
BYTE mode tape IO doesn't work on the 2020 if a TM03/TU77 is involved.

[Diagnosis]
MAPIO didn't know how to set up the CDB.  TRHKON didn't round to
words correctly.  And CD2SER & LP2SER don't call MAPIO as they should.

[Cure]
Yes.

[Keywords]
ks10
tape
byte mode
frame count error
tu77

[Related MCOs]
None

[Related SPRs]
99999

[MCO status]
None

[MCO attributes]
Beware file entry required
Field service attention
HOSS attention
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	CD2SER	CDRGO
702A		LP2SER	REGSE1
		TRHKON	TRHS2A
		TM2KON	TRHS2A
		KSSER	MAPIO6


[End of MCO 11928]
MCO: 11931		Name: NT		Date: 16-Mar-85:16:33:05


[Symptom]
MCO 11683 did not go far enough.

[Diagnosis]
The customer defined commands are still being searched
along with the normal commands.

[Cure]
Define a new table of customer defined commands. These commands
are defined using the MONGEN dialogue, as usual, but they will be
placed in their own table, and searched right after the user DECLARed
commands. The heirarchy to search is as follows: First the user defined
commands are searched. If an exact match is not found, we search the
customer table. If a match is found, we do not search the regular table
but rather, we will take the customer entry. We will only search the
regular commands if all else fails.

New GETTAB .GTCCM = 204 to allow HELP to access the table.

[Keywords]
CUSTOMER DEFINED COMMANDS

[Related MCOs]
11683

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	COMMON	NAMES,CNAMES,CSTTAB,DISPC,UNQTBC
		COMCON	COM1,COM1S,FNDCOM
		UUOSYM	.GTCCM
		UUOCON	NUMTAB


[End of MCO 11931]
MCO: 11933		Name: JAD		Date: 18-Mar-85:09:59:18


[Symptom]
New:  Reserve TAPOP. UUO functions 3000-3777 for customer definition.

[Diagnosis]
Just like the TRMOP. UUO.

[Cure]
Yes

[Keywords]
CUSTOMER-DEFINED FUNCTIONS
TAPOP. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	TAPUUO	TAPRSQ


[End of MCO 11933]
MCO: 11937		Name: JAD		Date: 21-Mar-85:11:28:14


[Symptom]
Stopcode RWD extending a simultaneous update file.

[Diagnosis]
We call TAKCHK to allocate blocks when extending the file.
TAKCHK may switch units on us.  Since we've gotten the DA on the
"previous" unit trying to return it on the "new" unit causes RWD.

[Cure]
Remember which unit we obtained the DA on and return the DA
on that unit instead of the current (possibly new) unit.

[Keywords]
STOPCODE RWD
SIMULTANEOUS UPDATE

[Related MCOs]
None

[Related SPRs]
32281, 34440, 34872, 35127

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	272	FILIO	OUTGRP,OUTGR7


[End of MCO 11937]
MCO: 11939		Name: JAD		Date: 22-Mar-85:10:07:21


[Symptom]
IME when structure yanked

[Diagnosis]
If a file was LOOKUPed before the structure was yanked,
then someone tries to RENAME (delete) the file we wind up
trying to use an AT which was removed.

[Cure]
Call CHEKU before blindly assuming AT is valid.

[Keywords]
YANK STRUCTURE

[Related MCOs]
11858, 11861, 11927

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	272	FILUUO	RENAM3


[End of MCO 11939]
MCO: 11944		Name: WXD		Date: 25-Mar-85:10:48:33


[Symptom]
Having a DECnet circuit by the name NI-0 and a hardware device
of the name NI-0 is confusing.

[Diagnosis]
NI-0 is really a hardware device (as is NI-1) and not a good
logical name for ethernet number 0 on the system.

[Cure]
Change the DECnet circuit and line names to be ETH-0.  To show
information about the ethernet from NCP use SHO CIRCUIT ETH-0 etc.

[Keywords]
Ethernet
DECnet
CONFIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	272	D36PAR
		D36COM
		DNADLL
		ETHPRM
		ETHSER
		KNISER
		NTMAN
		ROUTER
		COMNET


[End of MCO 11944]
MCO: 11949		Name: KBY		Date: 26-Mar-85:06:56:59


[Symptom]
Stopcode EUE most common, other scenarios possible.

[Diagnosis]
BBFLAG can get set by one CPU running a lost time
scan after the other CPU has cleared it just prior to doing a QSCAN
for the swapper.  This is because the CPU which clears the flag doesn't
do it under the schedular interlock.  Note that this can't happen
in 7.01 because the schedular holds onto SCDLOK over the call to the
swapper.

[Cure]
Clear the flag under the schedular interlock.

[Keywords]
Zurich
Class schedular
Lost time

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	272	SCHED1	SWP2
702A	


[End of MCO 11949]
MCO: 11950		Name: KBY		Date: 26-Mar-85:09:42:43


[Symptom]
Stopcode PIP last seen; IMEs and other random assorted stopcodes
possible.

[Diagnosis]
Other scenarios are possible but one example is:

1.  Job A whose UPT is physical page X gets swapped out.  Note that
    the slot in the UPT which points to itself ("370") points to page
    X since we don't wipe out this slot in the UPT so MAPBAK has
    an easier time of things.

2.  Job B, which starts out on the swap space, gets swapped in, and
    it so happens that the page that is used for its UPT is X.

3.  Job B does something like disk I/O.

4.  Job A types a command.  COMCON calls SVEUB to set up mapping for
    for the job, even though job isn't swapped in.  Assume the command
    requires the job to be in core, so it is diddly-com'd and the
    swapping I/O is set up to bring the job into core.

5.  One of the times that Job A is "mapped" because COMCON called SVEUB
    (note that COMCON has effectively done a DATAO page for page X).
    a disk interrupt happened.

6.  Assume the swapping I/O to bring job A's UPT into core has already
    happened.  But assume also that SWPINT hasn't been called to point
    the new UPT at itself, so the new UPT points to page X.

7.  MKADD called for the disk interrupt for job B now checks USJOB and
    finds that it's the same since .USJOB is mapped through job A's new
    UPT which still points at the page that job A used to have as its
    UPT (page X).

8.  The monitor gets confused and things go downhill from there.

[Cure]
Point the UPT at NLUPMP just before swapping out.  Fix MAPBAK to
know how to deal with this.

[Keywords]
UCW
PIP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	271	VMSER	MAPBAK,THISX
702A	


[End of MCO 11950]
MCO: 11951		Name: JAD		Date: 31-Mar-85:00:00:00


[Symptom]
New: Have AUTCON auto configure IPA devices (CI20 and NIA20).
Teach MAPIO to build internal channel style channel command
words for IPA devices as well as RH20s.  Teach MSCCOM how to
convert internal style CCWs to BSDs.

[Diagnosis]
It actually saves some space for configurations with both a CI
and an NI.

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	AUTCON	LOTS
		COMMON
		ICHPRM
		KLPPRM
		KLPSER
		KLSER
		KNIPRM
		KNISER
		MSCCOM
		SCSUUO
		UUOCON


[End of MCO 11951]
MCO: 11952		Name: JAD		Date: 31-Mar-85:00:00:00


[Symptom]
Some modules are still searching RH2PRM instead of ICHPRM.

[Diagnosis]
I wanted to ease it in.

[Cure]
SEARCH RH2PRM => SEARCH ICHPRM

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	RNXKON	SEARCH
		RPXKON	RH2PRM
		T78KON	IS
		TAPSER	NOW
		TD2KON	SEARCH
		TM2KON	ICHPRM


[End of MCO 11952]
MCO: 11953		Name: JAD		Date: 31-Mar-85:00:00:00


[Symptom]
Monitor too big

[Diagnosis]
Code in AUTCON which ensures parts of a magtape UDB are contiguous
loses if the UDB doesn't require any contiguous area.

[Cure]
Test for zero words and quit.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	AUTCON	CHKCTG


[End of MCO 11953]
MCO: 11960		Name: RCB		Date:  1-Apr-85:05:59:54


[Symptom]
Datasets won't hang up when DDBs are in use, even if we lost carrier.  Even if
you do get them to hang up, you'll get an IME.

[Diagnosis]
Bad test for when to do timing on datasets (confusing idle line with hardware
state changes).  Bad references to LINTAB with the LH of the register
containing junk.  PSIJOB not preserving its ACs.

[Cure]
Always do timing on lines that do not have a normal carrier state.  Fix the
references.  Fix PSIJOB.

[Keywords]
Datasets

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	SCNSER	DSCSLP,DSCWAK
		PSISER	PSIJOB


[End of MCO 11960]
MCO: 11962		Name: RCB		Date:  1-Apr-85:06:06:59


[Symptom]
1022 gets ?Illegal section/core argument

[Diagnosis]
Software House likes to use reserved-to-DEC fields.

[Cure]
Too many people can't find every place this matters, so let them get by with
it by ignoring positive arguments in the core/section word (for this release).

[Keywords]
1022

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	SEGCON	UGETHI


[End of MCO 11962]
MCO: 11963		Name: RCB		Date:  1-Apr-85:06:17:07


[Symptom]
Undeserved NXM/parity sweeps on users who are spying on the monitor's hiseg.

[Diagnosis]
If the user spies on us, and we subsequently move our hiseg, and then the
user references the spy page, the user has a stale copy and hits the page we
gave up on.

[Cure]
Change 'virtual' spy pages to be truly virtual by mapping them through the SPT
and the monitor's own section map pages.  This has the side effect of growing
the SPT by about 40 words (sigh), and making all entries within monitor section
maps have PM.PUB lit.  However, the section pointers themselves (.E?STB) still
have PM.PUB clear, so we will continue to run in kernel mode as required.  The
public bit is only there for the user mapping.  Fix assorted minor & unreported
bugs with virtual spy pages & not checking them out correctly while we're in
the area.

[Keywords]
Spy pages
NXM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	VMSER	LOTS
		COMMON
		ONCE
		COMCON
		IPCSER
		CLOCK1
		DATMAN
		MONPFH
		UUOCON
		ERRCON
		ONCMOD
		AUTCON
		CORE1
		CPNSER
		KLSER
		KSSER
		LOKCON
		MOSSER
		SWPSER
		SEGCON
		SYSINI


[End of MCO 11963]
MCO: 11967		Name: RCB		Date:  1-Apr-85:16:10:58


[Symptom]
Stopcodes CL0 & RCD during rubout.

[Diagnosis]
The check for backing up over a chunk boundary isn't robust enough.

[Cure]
Test for backing up to the start of the stream, and allow that.
Two new stopcodes (for when we really have messed up a delete):
	DELMBD	(DEBUG)	DELMID went bad
	DELCBD	(DEBUG)	DELCHR went bad
If either occurs, it indicates that the chunk stream has been clobbered
at some point.  All traces of how are probably lost.

[Keywords]
Rubout

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	SCNSER	DELMID,DELCH4


[End of MCO 11967]
MCO: 11972		Name: DPM		Date:  2-Apr-85:05:43:59


[Symptom]
New:  Add a few QUEUE. UUO sub-block types:

	.QBOPT==62	;SIXBIT BATCH OPTION NAME
	.QBDIS==63	;/DISTRIBUTION:"TEXT"
	.QBUSR==64	;/USERNAME:"TEXT"

[Diagnosis]

[Cure]

[Keywords]
QUEUE. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	UUOSYM


[End of MCO 11972]
MCO: 11976		Name: RCB		Date:  2-Apr-85:09:42:17


[Symptom]
Problems with SICK & DIE:
BUGINFs do not store their names, etc., as the last stopcode type.
'NODUMP' stopcodes have no time-stamp & annoy users on -20F lines.
'NODUMP' stopcodes type out as 'monitor errors' when in fact they are not
errors, but only interesting occurrences.

[Diagnosis]
SICK is still sick.
Excess call to SVPPC.
Misleading format in the stopcode typeout.

[Cure]
Merge SICK into DIE, and make DIE's processing table-driven.  Via these
tables, make sure that events and NODUMP stopcodes do not call SVPPC.
Change the format of the STOPCD typeout from

<bells>
?CPU1 monitor error, STOPCD name is FOO
 ...
CPU status block on <daytime>
 ...

where the CPU status block gets skipped for 'NODUMP' types,

to:

<bells>
?Stopcde FOO, type=DEBUG, on CPU1 at <daytime>
 ...
CPU status block
 ...

where the CPU status block still gets skipped for 'NODUMP' types.

Also, since 'NODUMP' was originally proposed as 'INFO', add INFO as a
synonym for NODUMP, and have INFO be what comes out as the STOPCD type in the
above format.

As a side-effect of merging SICK into DIE, STOPCD type EVENT is now the same as
a BUG.(INF,...).

The XPCW CROAK mechanism is still not being used, because enabling it causes
problems with returning from stopcodes (even those called by PUSHJs).

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	273	ERRCON	DIE,DIE0,DIE1,DIERS0,GOBACK
		S	STOPCD,BUG.


[End of MCO 11976]
MCO: 11978		Name: JMF/TL		Date:  3-Apr-85:06:08:32


[Symptom]
Phase IV DECnet doesn't work on the KS10.

[Diagnosis]
Not enough address space for buffers and names.

[Cure]
Create an alternate map which will be used while executing DECnet
code. This map will be 1:1 with the regular monitor map except for
SYSSIZ=>whatever is required for DECnet buffers and name space. Whenever
a DECnet UUO is executed, when the once a jiffy code or once a second
DECnet code is called, and whenever an interrupt occurs on the DECnet
PI channel, switch to the alternate map. Also teach DNADLL about KDPs
DMRs, etc. Finally, reduce the amount of virtual address space allocated
for PAGTAB/MEMTAB/PT2TAB to 2K (enough to represent 1 Meg of physical
memory).

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	COMMON	LOTS
		KSSER
		SYSINI
		ONCE
		S
		D8KINT
		D8RINT
		D36PAR
		COMNET
		SCMUUO
		SCLINK
		CLOCK1
		UUOCON
		DNADLL


[End of MCO 11978]
MCO: 11982		Name: JAD		Date:  3-Apr-85:09:12:17


[Symptom]
New:  Add the following Software Interrupt Conditions:

	.PCRC1	(-33)	Reserved to customer
	.PCRC2	(-34)	Reserved to customer
	.PCSCS	(-35)	SCS event
	.PCETH	(-36)	ETHERNET event

[Diagnosis]
First two were SPR'd a long time ago, last two are needed
for SCS. UUO and ETHNT. UUO.

[Cure]
Yes

[Keywords]
SOFTWARE INTERRUPTS
SCS. UUO
ETHNT. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	PSISER	LDSTS,LDSIX
		S	C$COND
		UUOSYM	.PCXXX


[End of MCO 11982]
MCO: 11989		Name: KBY		Date:  5-Apr-85:11:44:41


[Symptom]
No way to set CORMAX/CORMIN bigger than 512P with a UUO.

[Diagnosis]
SETUUO takes 18-bit args.

[Cure]
Add SETUUO functions 50 (.STCXP) and 51 (.STCNP) for setting
CORMAX and CORMIN in pages, respectively.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	COMCON	SETMX1,SETMN1,SETTBL


[End of MCO 11989]
MCO: 11993		Name: WXD		Date:  8-Apr-85:16:27:25


[Symptom]
Can't write programs which want direct access to the Ethernet.

[Diagnosis]
Missing code.

[Cure]
Add the ETHNT. UUO.

[Keywords]
Ethernet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	ETHPRM
		ETHUUO


[End of MCO 11993]
MCO: 11994		Name: JAD		Date:  8-Apr-85:16:46:47


[Symptom]
Monitor sources are too big and monitor takes too long to compile.

[Diagnosis]
Too much usage of .UPMP+.UPxxx where .USxxx could be used.

[Cure]
Use .USxxx instead of .UPMP+.UPxxx.

[Keywords]
 .UPMP+.UPXXX
 .USXXX

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	COMCON	LOTS
		COMMON
		COMMOD
		CPNSER
		DATMAN
		ERRCON
		FHXKON
		FILFND
		FILIO
		IPCSER
		KLSER
		LOKCON
		NETDEV
		ONCE
		ONCMOD
		PSISER
		SCNSER
		SEGCON
		SWPSER
		TMPUUO
		VMSER


[End of MCO 11994]
MCO: 11995		Name: KBY		Date:  8-Apr-85:17:07:02


[Symptom]
PG.IDC (PA.IDC) isn't complete.

[Diagnosis]
No code.

[Cure]
Add code.  This allows PG.IDC to work for create/destroy section
and create/destroy spy pages.  It won't work for move/exchange due
to some constraints on the way move/exchange works.  Note that
in each of these cases the desired final effect is what happens; in
particular for the create functions, if the page or section already
existed, it is effectively deleted and replaced by a new section or
spy page.  This is slightly different than for page create/destroy
pages which do not zero the old page if you try to create on top
of an already existing page.

[Keywords]
idc

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	VMSER	CHGSEC,SPYPGS


[End of MCO 11995]
MCO: 12000		Name: JAD		Date:  9-Apr-85:09:15:06


[Symptom]
Monitoris toosmallitis

[Diagnosis]
Missing SCS. UUO code

[Cure]
Add the code

[Keywords]
SCS. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	SCAPRM	LOTS
		SCSUUO	MORE


[End of MCO 12000]
MCO: 12001		Name: JMF		Date:  9-Apr-85:09:21:15


[Symptom]
Can't save a multi-section program.

[Diagnosis]
No code.

[Cure]
Giveth some code, taketh some away.

[Keywords]
SAVE
Multi-section.

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	COMCON	SEVERA


[End of MCO 12001]
MCO: 12002		Name: RCB		Date:  9-Apr-85:09:21:36


[Symptom]
Jobs stuck in run queues getting no run time.

[Diagnosis]
Calling ONCPUx with a CPU arg of 7 (for generic boot CPU).

[Cure]
Teach all flavors of ONCPUx about PCLCP0 (7) and add range tests for legal
CPU numbers.  This adds the JOB stopcode, ONCPUX:

	Meaning:	<X> out of range in ONCPU <X>.

	Cause:		Someone called ONCPUN with a bad CPU number.

	Cure:		Find the caller and correct the mistake.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	CPNSER	ONCPUL,ONCPUS,ONCPUN


[End of MCO 12002]
MCO: 12003		Name: RCB		Date:  9-Apr-85:09:31:35


[Symptom]
QUEUE. UUO can block a job forever, but some functions (e.g., to ACTDAE) can
only be done via the QUEUE. UUO.

[Diagnosis]
No timeout facility.

[Cure]
Yes.  Add field QF.HLN into word .QUFNC (77B17 in word 0).  If non-zero, this
is the total length of the header.  If zero, as currently required, assume a
three word header for backward compatability.  Any words which are absent will
be assumed to be zero, including the *new* fourth word:  .QUTIM.

Word .QUTIM is the number of seconds to wait for a response before aborting.
A timeout value of zero means to wait forever (just as now).  If the request
does time out, error QUTMO% (11) will be returned.

[Keywords]
QUOTA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	274	IPCSER	GLXINF
		UUOSYM	QUEUE.


[End of MCO 12003]
MCO: 12004		Name: JAD		Date: 10-Apr-85:14:40:43


[Symptom]
Power fail restart on the KL doesn't.

[Diagnosis]
Power fail code eventually wanders into APRRES, either
directly if a transient failure or via RSX-20F when -20F
executes the instruction in location 70 when power comes
back.  APRRES calls SYSTR0 to set up mapping, which sets
the SPT to the null job.  When we eventually dismiss the
interrupt we get wierd stopcodes or halts during restart.

In addition, in 7.03, we set up a PDL via a MOVEI P,xxx.
This doesn't work when we wander into section 1 when DTESER
calls TTDRLD which calls ...

[Cure]
Restore the SPT at APnRES.  Set up a real PDL where the
power fail code needs it.  Use an ADJSP to skip over the
words on the stack we've stored data into.

[Keywords]
POWER FAIL RESTART

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	COMMON	APNPWF,APNRES


[End of MCO 12004]
MCO: 12009		Name: JAD		Date: 11-Apr-85:13:58:50


[Symptom]
Monitor too big

[Diagnosis]
Obsolete GETTAB table .GTDCF in COMMON

[Cure]
Delete it

[Keywords]
 .GTDCF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	COMMON	.GTDCF
		UUOCON	GETTAB
		UUOSYM	.GTDCF


[End of MCO 12009]
MCO: 12011		Name: JMF		Date: 12-Apr-85:09:29:11


[Symptom]
No way to save a multi-section program with a starting address in
a non-zero section and run it starting at the correct starting address.

[Diagnosis]
 .JBSA only has room for an 18 bit starting address.

[Cure]
Add a switch to the SAVE command /START:n,,nnnnnn which will be
written in the EXE file in the form of an entry vector. Also allow
the switch on R/RUN commands and start the program at n,,nnnnnn.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	SEGCON	GETFIN
		COMCON	THRDIR
		S


[End of MCO 12011]
MCO: 12014		Name: JAD		Date: 12-Apr-85:12:51:20


[Symptom]
REFSTR and ONCMOD are too unforgiving.

[Diagnosis]
Too many HALT stopcodes which can be STOP stopcodes.

REFSTR can't recover after a stopcode even though it tries.

Confusion over which unit/structure had problems when using
the DESTROY option.

[Cure]
Get rid of the HALT stopcodes and make them STOP stopcodes.
It's very annoying when the KL halts and you don't know why.
None of those conditions warrant a halt (and in fact, most could
probably be made DEBUG stopcodes).

Clean up stopcode recovery in REFSTR.

Make more extensive use of DIESTR and DIEUNI in stopcodes.

[Keywords]
REFRESHER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	ONCMOD	SOME
		REFSTR	MANY


[End of MCO 12014]
MCO: 12020		Name: DPM		Date: 16-Apr-85:05:15:11


[Symptom]
New:  Reload DX10 and DX20 tape microcodes whenever we notice the
controller goes off-line.  Also make ONCE and MONBTS search BTSPRM
to get bootstrap vector symbols.

[Diagnosis]

[Cure]

[Keywords]
MICROCODE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	AUTCON	TUDB9
		DX2COM	DXLOAD,DXFUNC,DXLTAB,DXVTAB
		KLPSER	KLPLOD
		MONBTS
		ONCE
		RNXKON	DXFTAB
		S
		SYSINI	KIIN3B
		TAPSER	TPKCFG,SETOFL
		TAPUUO
		T78KON	T78DSP
		TCXKON	TCXDSP
		TD2KON	TD2DSP,TD2LOD,DXFTAB
		TM2KON	TM2DSP
		TMXKON	TMXDSP
		TX1KON	TX1DSP,TX1LOD


[End of MCO 12020]
MCO: 12021		Name: KBY		Date: 16-Apr-85:08:21:12


[Symptom]
Too hard to move the monitor's high seg around.

[Diagnosis]
Everytime the high seg moves around, so does funny space, and so do
the slots in the UPT which are used to map them.

[Cure]
Move the UPT mapping slots to the end of the UPT independent of
where funny space actually exists in the address space.

[Keywords]
address space

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	UUOCON
		COMMON
		COMCON
		S
		SEGCON
		ONCE
		SYSINI
		VMSER
		MOSSER
		LOKCON
		SWPSER
		DATMAN
		CORE1


[End of MCO 12021]
MCO: 12022		Name: JMF		Date: 16-Apr-85:09:26:49


[Symptom]
Can't set address break on a non-zero section address.

[Diagnosis]
No code.

[Cure]
Add code. Note that bits 4-8 specify the section number for the
break address in the SET UUO.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	COMCON	SETBRK


[End of MCO 12022]
MCO: 12023		Name: KBY		Date: 16-Apr-85:09:33:00


[Symptom]
New:  It'd be useful for users to know when they had a page in an indirect section.

[Diagnosis]
No code

[Cure]
Add bits PA.GIN (indirect, =1B14) and PA.GSN (37B20) to the accessiblity
checking functions (.PAGAC, .PAGBM, .PAGAL).  Note that for .PAGBM, PA.GSN
is checked only if PA.GIN is lit in the care mask as well (this is also
true for PA.GSP wrt PA.VSP).

[Keywords]

indirect section

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	VMSER
		S
		UUOSYM


[End of MCO 12023]
MCO: 12024		Name: TL		Date: 16-Apr-85:09:38:26


[Symptom]
KS too big and too slow, EDDT about right but too fast.

[Diagnosis]
We were in a hurry.
The hidden symbol table stuff for the KS alternate context maps was kludged.

[Cure]
yes.
1. Remove the CDB locations for the map pointers.  This allows FILDDT to use
   1,,addr to unconditionally get a normal context address, and 2,,addr to
   unconditionally get a decnet context address, since the alternate map pointers
   now live in SECTAB.
2. Remove the horrible kludge for fudging the EDV for symbol pointers.  Instead,
   add another sub-block to the EDV's symbol swap list to cause EDDT to force
   normal context when poking at the symbol table.  This eliminates overhead in
   the monitor, and places it in EDDT where it belongs.  

[Keywords]
KS ADDRESS SPACE


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	275	COMMON	EDV,SAVN,.ENMP
		KSSER	DNMAP,RGMAP


[End of MCO 12024]
MCO: 12026		Name: JMF		Date: 17-Apr-85:06:06:57


[Symptom]
Since the other EXE block types are defined in UUOSYM, define .SVSTA==1775
(entry vector block).

[Diagnosis]

[Cure]

[Keywords]
EXE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	UUOSYM


[End of MCO 12026]
MCO: 12029		Name: KBY		Date: 17-Apr-85:22:47:23


[Symptom]
1.  BBFIT gets zeroed too many times.
2.  BBFIT doesn't get zeroed enough.  Actually, what ends up happening
is no background batch jobs ever get swapped in.

[Diagnosis]
1.  Too many places indiscriminately zero BBFIT when
zeroing FIT, but they aren't necessarily the same.

2.  If there is a collision on the high seg a background batch job
is using, we go away and forget about the fact that we brought this
job into core.  Normally, we'd just scan it again at some later time,
but since the swapper only lets one background batch job come in per
background batch swap interval, we won't ever scan it again since the
interval doesn't really start until the current job finishes coming
in (which it didn't because of the collision on the high seg).

[Cure]
1.  Don't zero BBFIT unless BBFIT=FIT when zeroing FIT.
2.  Add a new linked list queue, linked through JBTJIL and headed
by JBTHSQ.  This is a queue of all jobs waiting for some high seg
to finish swapping in.  After clearing out all completed SWPLST
entries, scan the queue for jobs waiting for a high seg and complete
bringing any in which can now be completed (or set up to swap in the
high seg for those jobs if it already went out again or managed to
be on the way out when we checked before).  Jobs get placed in this
queue if FININ says swapping I/O is in progress for the high seg.

[Keywords]
ETH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	SCHED1	FININ1,INERR3,ZERFIT,NOFITZ,NOFIT,FININ4
702A		SEGCON	FININ
		SYSINI
		COMMON	JBTBBQ


[End of MCO 12029]
MCO: 12039		Name: DPM		Date: 22-Apr-85:02:07:58


[Symptom]
TAPUUO ignores the RDH words

[Diagnosis]
Tapes and RDH never did get along ...

[Cure]
A minor victory for RDH:  Make LOOKUP and ENTER on a
labeled tape set and read the record size, block size,
and forms control byte.

[Keywords]
LABELED TAPES

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	S	UUXTYP,UUXBSZ,UUXRSZ,UUXFFB
		TAPUUO	TPMENT,TPMLKP


[End of MCO 12039]
MCO: 12041		Name: DPM		Date: 22-Apr-85:06:51:43


[Symptom]
New: A DIAG. UUO functions to control loading of DX10, DX20,
and KLIPA microcodes.

Functions are:
	.DIELD==17	;ENABLE MICROCODE LOADING
	.DIDLD==20	;DISABLE MICROCODE LOADING
	.DILOD==21	;LOAD MICROCODE

New error code:
	DIANM%==24	;NO MICROCODE AVAILABLE

[Diagnosis]

[Cure]

[Keywords]
MICROCODE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	COMMOD	RNXELD
		KLPSER	DIAEDL,DIALOD
		T78KON	T78DSP
		TCXKON	TCXDSP
		TD2KON	TD2EDL
		TM2KON	TM2DSP
		TMXKON	TMXDSP
		TX1KON	TX1EDL
		RNXKON	RNXEDL
		FILIO	DSKDIA
		MONBTS	BTUEDL
		TAPUUO	MTADIA
		TAPSER	TPKEDL
		UUOCON	DIAUUO


[End of MCO 12041]
MCO: 12043		Name: KBY		Date: 22-Apr-85:07:51:36


[Symptom]
LOKCON doesn't; stopcode CMU.

[Diagnosis]
When moving pages to LOKCON's queue, we keep track of the number
of pages in said queue via LOKHOL.  These pages aren't included in BIGHOL
or CORTAL.  CHKTAL attempts to compensate for this, but LOKHOL, which
actually corresponds to BIGHOL, isn't really the right thing to compensate with.
Unfortunately, the right thing doesn't exist.

[Cure]
Invent LOKTAL, which is the equivalent of CORTAL, and compensate
with that.

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	CORE1
		SEGCON	CHKTAL,OTHERS
		LOKCON


[End of MCO 12043]
MCO: 12048		Name: TL		Date: 22-Apr-85:18:21:02


[Symptom]
Can't PEEK on DECnet context.

[Diagnosis]
PEEK doesn't understand.

[Cure]
New:
When executed on an unextended machine, the PEEK UUO interprets virtual
addresses >256K as references to the monitor context whose section pointer is
stored in the EPT, in the section slot specified by the section part of
the specified address.  A discussion of monitor contexts may be found in
the Crash Analysis Guide.

[Keywords]
FILDDT/M

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	UUOCON	PEEK,PPPV2P


[End of MCO 12048]
MCO: 12049		Name: TL		Date: 22-Apr-85:19:07:20


[Symptom]
Monitor doesn't reload if no bootstrap present.

[Diagnosis]
The KL is dumb.  The KS isn't.

[Cure]
When you're smart, use what's available.

The KS will now cause the 8080 to load BOOT, dump, and automatically
reload the KS if it can't find a valid BOOT.

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	MONBTS	NOBOOT


[End of MCO 12049]
MCO: 12053		Name: DDD		Date: 23-Apr-85:08:59:26


[Symptom]
MONGEN PSISER question explanation incomplete.

[Diagnosis]
Doesn't mention that GALAXY also requries PSISER.

[Cure]
Mention GALAXY-10

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	MONGEN	ASKPSI


[End of MCO 12053]
MCO: 12054		Name: DPM/RCB		Date: 23-Apr-85:09:05:46


[Symptom]
No way for users to find out about their structures.

[Diagnosis]
Missing QUEUE. UUO function code.

[Cure]
Add .QUCAT (16) to talk to CATLOG.  Sub-blocks used are:
	.QBVSN		;Volume set name (required)
	.QBMFG		;Flags (QB.DSK,QB.TAP,QB.DTA) (optional)
Both block types already exist.  However, QB.DTA is new.
Its previous non-existance was an oversight (unsupported code, after all).

The response block returned by CATLOG is described in CATPRM.MAC.

[Keywords]
QUOTA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	276	COMMON	.GTQFT
		UUOSYM	.QUFNC,.QBMFG


[End of MCO 12054]
MCO: 12063		Name: DPM		Date: 25-Apr-85:03:34:20


[Symptom]
New:  Make ERROR.SYS entries whenever we reload the microcode
on a DX10, DX20, or KLIPA.  The new entry type is .ESULD (73).
The ERROR.SYS entry has the following format:

 .ULIDX::! BLOCK 1	;(RH) MICROCODE OFFSET INTO THE BOOTSTRAP VECTOR
 UE.DAE==377777B17	;(LH) RANDOM BITS IN ERROR.SYS (BITS 1-17)
    UE.USR==1B1		   ;MICROCODE LOAD INVOKED BY USER (DIAG. UUO)
 			;MIROCODE LOAD ERROR CODE (BITS 12-17)
    .UEDIS==1		   ;LOADING DISABLED
    .UENOM==2		   ;NO MICROCODE AVAILABLE
    .UEWVR==3		   ;WRONG MICROCODE VERSION
    .UELOD==4		   ;LOAD ERROR
    .UEVFY==5		   ;VERIFY ERROR
    .UEMPC==6		   ;MICROPROCESSOR CHECK
    .UECRL==7		   ;CRAM LOAD ERROR
    .UECRV==10		   ;CRAM VERIFY ERROR
    .UEDRL==11		   ;DRAM LOAD ERROR
    .UEDRV==12		   ;DRAM VERIFY ERROR
 .ULDEV::! BLOCK 1	;XWD DEVICE CODE,UNIT NUMBER
 			; IF NOT A MULTI-UNIT DEVICE SUCH AS A DX20,
 			; THEN THE UNIT NUMBER IS  -1
 			;  NOTE: PRIOR TO MAKING A DAEMON ENTRY, THE
 			;        CPU NUMBER IS STORED INTO BITS 6-8.
 .ULINM::! BLOCK 1	;SIXBIT INTERFACE NAME
 			;  (I.E. TX01, TX02, RP20, KLIPA, KLNI, ETC.)
 .ULDNM::! BLOCK 1	;SIXBIT CHANNEL NAME
 			;  (I.E. DX10, DX20, CI20, NIA20, ETC.)
 .ULMVR::! BLOCK 1	;MINIMUM MICROCODE VERSION NUMBER ALLOWED
 .ULDTM::! BLOCK 1	;DATE/TIME OF LOAD SUCCESS OR FAILURE
 .ULVER::! BLOCK 1	;MICROCODE VERSION NUMBER IN STANDARD DECSYSTEM-10
 			;  FORMAT (FILLED IN BY MONBTS)
 .ULDAE::!		;LENGTH OF BLOCK WRITTEN INTO ERROR.SYS BY DAEMON

[Diagnosis]

[Cure]

[Keywords]
MICROCODE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
Field service attention
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	277	S	.ERULD,UE.USR,UE.DAE
		MONBTS	BTURPT
		UUOSYM	.ESULD


[End of MCO 12063]
MCO: 12066		Name: JAD		Date: 25-Apr-85:11:26:25


[Symptom]
Possible ghost tape drives, possible funny problems with
interrupts out of the middle of AUTCON.

[Diagnosis]
AUTCON doesn't check for Register Access Error when it
read the drive type register.  It also doesn't set the bit 
in the DATAO to disable RAE interrupts.

[Cure]
Yes

[Keywords]

AUTCON
RAE
DRIVE TYPE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	277	AUTCON	UNILUP,REDDTR


[End of MCO 12066]
MCO: 12067		Name: JAD		Date: 25-Apr-85:14:14:33


[Symptom]
No way for PULSAR to fill in "set number" when mounting
a structure.

[Diagnosis]
No parameter in the STRUUO argument block.

[Cure]
Add a parameter, .FSSET = 27, following .FSK4C.

[Keywords]
DISK SETS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	277	FILFND	FSTAB
		UUOSYM	STRUUO


[End of MCO 12067]
MCO: 12076		Name: JAD		Date: 29-Apr-85:11:10:21


[Symptom]
EUE stopcode can cause the system to hang.

[Diagnosis]
System-wide software interlocks not given up.

[Cure]
Call GIVLOK

[Keywords]
HUNG
EUE

[Related MCOs]
None

[Related SPRs]
33353

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	277	ERRCON	EMUERR


[End of MCO 12076]
MCO: 12084		Name: JMF		Date:  1-May-85:06:27:02


[Symptom]
1) ONCE is to verboise.
2) ONCMOD isn't verboise enough.

[Diagnosis]
1) ONCE tells the OPR about rebuilding system lists twice.
2) ONCMOD doesn't always tell the OPR about initializing the CI network.

[Cure]
1) Only say it ONCE.
2) Always tell the OPR even if its already initialized to avoid OPR confusion.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	ONCE	BLDDSK
		ONCMOD	ONCBND


[End of MCO 12084]
MCO: 12096		Name: KBY		Date:  3-May-85:16:15:14


[Symptom]
Most obvious symptom is a tape drive stuck in EW; other
scenarios possible.

[Diagnosis]
Spacing operations don't block, yet call SETIOD when
they are finished.  Since the user gained control as soon as the
operation was queued (rather than after it finished), he could
have queued up some I/O for us to do, and the call to SETIOD
for the spacing operation, releases him from his I/O wait.
This can allow two queued protocol requests to get in the queue,
which can cause the drive to hang.

[Cure]
Don't call SETIOD on spacing operation completion.  CLOSE
which used to exit through here does need SETIOD called, so
give CLOSE a separate interrupt handling routine.

[Keywords]
Drive hung

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	TAPUUO	TPMISP,CLSDUN
702A	


[End of MCO 12096]
MCO: 12098		Name: KBY		Date:  3-May-85:16:19:24


[Symptom]
Job stuck virtual 'cause .UPANA is wrong.

[Diagnosis]
If we are paging in a page with access allowed off AND there
isn't enough core in core to just page in the page, we set up for
expansion and swap the job out and in again.  Unfortunately, we also
turn on AABTAB and the accessibility even though AABTAB might have been
off before.  We don't, however, decrement .UPANA.

[Cure]
Don't turn on AABTAB (PM.AAB in 7.03) if it wasn't on and
we are paging in (as opposed to creating).

[Keywords]
stuck virtual

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	VMSER	INSDSK
702A	


[End of MCO 12098]
MCO: 12103		Name: BAH		Date:  6-May-85:17:00:47


[Symptom]
If a job's search list does not include the device MONGEN was
run from, then FGEN.HLP cannot be found.

[Diagnosis]
MONGEN is still relying on the ACs to contain the device,
and ppn.

[Cure]
Use GETTABs to find the device, ppn, and path MONGEN was run from.

[Keywords]
FGEN
 .SGDEV
 .SGPPN

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703		MONGEN	BEGINA


[End of MCO 12103]
MCO: 12104		Name: RDH		Date:  7-May-85:01:40:39


[Symptom]

New:	Make the WHERE command type out DECnet (NRT/CTerm) and
	LAT info if so connected.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	COMDEV	CWHERE
		LATSER	CWHLAT
		NRTSER	CWHNRT


[End of MCO 12104]
MCO: 12105		Name: JMF		Date:  7-May-85:04:49:56


[Symptom]
1) /USE:1 mapping sections 0/1 together is a hack.
2) The /USE value should relocate the EXE file always.

[Diagnosis]

[Cure]
1) Remove it. /USE:1 will work the same as USE:n for n.GE.2.
2) Add the /USE value to the section numbers in the EXE file. This
means that for the most part, EXE files should be for section 0 to
get predictable/desired results.

[Keywords]
USE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	210	SEGCON
		COMCON


[End of MCO 12105]
MCO: 12110		Name: JAD		Date:  7-May-85:14:27:08


[Symptom]
Creation date/time is not updated when appending to a file.

[Diagnosis]
If only a little data is appended, such that only the last
block of the file is updated, OUTPB never gets set in F.  If
OUTPB is off FILUUO never updates the creation date/time.

[Cure]
Light OUTPB if we decide to call OUT to flush the last buffer.

[Keywords]
APPEND

[Related MCOs]
None

[Related SPRs]
32937

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	FILUUO	CLSOU3


[End of MCO 12110]
MCO: 12113		Name: JAD		Date:  8-May-85:12:14:15


[Symptom]
Using RTTRP in block mode gives PFN or PIP stopcodes.

[Diagnosis]
JRST to the real-time block gets stuffed at CHn+2 (the
new flags word of the XPCW block).

[Cure]
Use the proper offset when linking the real-time block.

[Keywords]
RTTRP
PIP
PFN

[Related MCOs]
None

[Related SPRs]
35179

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	RTTRP	BLKSET,BLKREM

702A	


[End of MCO 12113]
MCO: 12120		Name: JAD		Date: 10-May-85:11:29:24


[Symptom]
XCHNGE command doesn't (very well in 7.02, at all in 7.03).

[Diagnosis]
1 of n:

1)  You can XCHNGE non-removable media disks (7.02/7.03)

2)  If you XCHNGEd RA60s you'd clobber the KDB and spread the
    UDB over never-never land (7.03)

3)  If units are busy you have to keep trying the command until
    you happen to type it at the right time (7.02/7.03)

4)  Code doesn't work well for dual-ported disks (7.02/7.03)

[Cure]
1)  Don't let the dummies do this

2)  Use UNYKOF as the  "KONTAB" offset rather than UNYPUN

3)  SLEEP until units are idle

4)  DETACH alternate ports, exchange the data, then ATTACH the
    alternate ports



[Keywords]
XCHNGE

[Related MCOs]
None

[Related SPRs]
30907, 34099

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMMON	NAMES
		COMCON	ATT7
		FILIO	XCHDSK
		UUOCON	RCNAT3

702A	


[End of MCO 12120]
MCO: 12122		Name: TL		Date: 12-May-85:19:01:01


[Symptom]
ROUTER doesn't.
1. Verification failures, confusion. (Sound familiar?)
2. We send illegal phase III TI messages.
3. No way to specify a transmit password.
4. Circuit timing is VERY wrong under certain moon phases.  Point-point
   circuits come up VERY slowly, or not at all.  Broadcast adjacencys work only
   on "error free" ethernets.

[Diagnosis]
Yes.
1. The Phase IIIE MCO never made it to 7.03.
2. We don't know what sort of INIT we're sending, so we always include Hello
   timer.  This will cause paranoid Phase III nodes to recycle the line.
3. See 1.
4. Lots of code added to ROUTER for phase IV thinks that T2 is preserved
   across calls to DNGTIM.  It isn't for TOPS-10.  This results in
   inconsistent routing databases, overhead, and grey hair.

[Cure]
Yes.
1. As with the 7.02 MCO, require verification of the remote node only if we want
   it.  Not if we think HE wants it.
2. Don't include the hello timer value unless the init is > phase III
3. Add one.  This time, it is a MONGEN question, asked after DECnet area/node #
   You can specify a 0-64 character ASCII string.
4. Don't let DNGTIM trash T2

[Keywords]


[Related MCOs]
11872

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	MONGEN	ASKXPW,MUNGEN
		COMNET	RTRXPW
		ROUTER	RTCINI,RTRSTI,FILVER


[End of MCO 12122]
MCO: 12126		Name: KBY		Date: 13-May-85:11:04:03


[Symptom]
CORMAX gets set too big; OPR has no way to know how big
CORMAX really can be.

[Diagnosis]
1.  CORMAX can get set to MAXMAX at GETPHP instead of
MAXMAX-some fudge value.
2.  Real maximum value of CORMAX is MAXMAX minus some-fudge-value-
known-only-to-the-monitor.

[Cure]
1.  Set CORMAX to right value.
2.  Make MAXMAX-minus-some-fudge-value-known-only-to-the-monitor
    GETTABable as %VMRMC.

[Keywords]
CORMAX

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMMON
		ERRCON
		VMSER
		LOKCON
		SYSINI
		COMCON


[End of MCO 12126]
MCO: 12138		Name: RCB		Date: 14-May-85:09:54:07


[Symptom]
New:
Make a DECnet SET HOST command run CTHNRT rather than NRT.

[Diagnosis]

[Cure]

[Keywords]
CTERM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	211	COMMON	HOST.D


[End of MCO 12138]
MCO: 12139		Name: JMF		Date: 15-May-85:06:13:15


[Symptom]
RUN UUO on a program which has a known high segment which overlaps
pages in the current low segment fails with page overlap error.

[Diagnosis]

[Cure]
After the segment is found, reduce low segment core to 1 page.

[Keywords]
RUN UUO
page overlap error

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	SEGCON	SHARE


[End of MCO 12139]
MCO: 12146		Name: WXD		Date: 17-May-85:09:14:29


[Symptom]
Can't change size of DECnet, SCA, Ethernet, LAT, or KLNI bit
mapped free core by redefining the "MONGEN" symbol via MONGEN.

[Diagnosis]
All of these symbols get redefined within COMMON to round them
up to the word boundary (of bits).  Nobody does this in any of the other
common modules.

[Cure]
Change the MONGENable names to the following:

	Old name	New name	Description

	DCNSIZ		M.DNSZ		DECnet free core size
	SCASIZ		M.SCSZ		SCA free core size
	ETHSIZ		M.ETSZ		Ethernet free core size
	LATSIZ		M.LASZ		LAT free core size
	KNISIZ		M.KNSZ		KLNI free core size

The old names xxxSIZ are the actual size of the free pools (rounded up
to word boundary).  Since M.xxSZ isn't redefined, you can't get any
multiply defined globals.

[Keywords]
Free core

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	COMMON


[End of MCO 12146]
MCO: 12147		Name: WXD		Date: 17-May-85:09:26:13


[Symptom]
KNILDR runs and runs and runs and ...

[Diagnosis]
If KLNI free core has disappeared, then KLNI initialization
will fail (KNIKAF usually).  When this happens, since initializatio
hasn't finished (and the time when the KLNI was stared hasn't been
updated), it requests another run of KNILDR.  Also, if the system
has decided not to run KNILDR for one of the KLNIs, and the other
KLNI croaks, KNILDR get carried away and reloads both of them.

[Cure]
1)  Reset the time when the KLNI was started when we first start the KLNI,
    not when initialization completes.
2)  When we start the KLNI, clear the reload request flag.
3)  When KNILDR sets itself up as the reload job, clear the reload
    request flag.
4)  Add another bit to the status word returned by the .KBSTS function
    of KNIBT.  This bit is KS.RRQ (020000,,000000) which means that
    KLNI reload has been requested by the system.  Use this in KNILDR
    to not reload everything in site when run on FRCLIN.

[Keywords]
KNILDR

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	KNIPRM
		KNISER
		UUOSYM


[End of MCO 12147]
MCO: 12154		Name: LWS		Date: 17-May-85:15:48:46


[Symptom]
Bizarre "524292 hard read errors" in magtape usage statistics
when switching tape volumes.

[Diagnosis]
Monitor isn't at fault for the wierd numbers, it's QUASAR, 
but the monitor could help QUASAR a little more.

[Cure]
In TPMLSU, when we know the volume switch will succeed,
send QUASAR a magtape deassign statistics message for the old
unit, but lite a flag bit so QUASAR knows it not a "real" deassign,
just stats for the unit being switched from.

[Keywords]
usage accounting
magtape
MDA

[Related MCOs]
10968

[Related SPRs]
35081

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	IPCSER	SNDFIN,SNDFI2
		TAPUUO	LBLMSG,TPMLSU

702A	


[End of MCO 12154]
MCO: 12156		Name: DRB		Date: 20-May-85:10:26:25


[Symptom]
Can't RENAME the path of a file opened on a pathological name.

[Diagnosis]
FILUUO isn't complex enough.

[Cure]
Save DEVLNM, DEVNAM before the call to SETPT3 at RENA16.  If DEVLNM's
non-zero, store the device name from the logical in DEVNAM, zero DEVLNM and
call SETPT3 normally, restoring DEVNAM, DEVLNM on return.  This should fake
SETPTH enough to setup the newly desired path.

[Keywords]
RENAME
LOGICAL

[Related MCOs]
None

[Related SPRs]
30386

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	212	FILUUO	RENA16

702A	


[End of MCO 12156]
MCO: 12163		Name: JAD		Date: 21-May-85:12:59:20


[Symptom]
Can't use certain 2-character pathological names.

[Diagnosis]
Calling CK2CHR before calling LNMTST.

[Cure]
Move the call after TSTDSK (who calls LNMTST).

[Keywords]
LOGICAL NAMES

[Related MCOs]
None

[Related SPRs]
31955

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	213	UUOCON	NOLGST

702A	


[End of MCO 12163]
MCO: 12164		Name: DOF		Date: 21-May-85:17:08:11


[Symptom]
Terminals with TERMINAL STOP and a non-zero PAGE length
will go into pause as though the monitor page limit had run out,
even though it has gone into terminal input wait less than the
page limit number of lines ago.

[Diagnosis]
MCO 11161 had previously fixed this problem, but MCO 11375
has re-introduced it. MCO 11375 fixed the problem of PTY's sometimes
going into TO state at the end of a page. But in doing so, it removed
the code for MCO 11161 without providing for an alternative.

[Cure]
Combine MCO's 11161 and 11375. This will retract these MCO'sand will be replaced with MCO 12164.

[Keywords]
SCNSER
TWAITL
TO
PAUSE
PAGE LIMIT
BATCH

[Related MCOs]
11161, 11375

[Related SPRs]
35180

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		SCNSER	TWAITL
703	


[End of MCO 12164]
MCO: 12169		Name: JAD		Date: 22-May-85:10:27:57


[Symptom]
An updating ENTER which specifies .RBALC which exceeds the user's
quota will return the wrong error code (20, block not free, instead
of 14, quota exceeded).

[Diagnosis]
Error returns from UPDAT5 don't really handle the updating ENTER
case correctly.

[Cure]
Give UPDAT5 another return which says "quota exceeded", and teach
callers to return the right error code in this case.

[Keywords]
PRE-ALLOCATE
UPDATE
QUOTA EXCEEDED

[Related MCOs]
None

[Related SPRs]
31186

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	213	FILUUO	UPDAT2,UPDAT3,RENA32,UPDAT5,UPDAT6,ENERR1,ENERR5


[End of MCO 12169]
MCO: 12170		Name: JAD		Date: 22-May-85:13:42:33


[Symptom]
Jobs can get stuck in command wait state.

[Diagnosis]
ATTACH UUO can call PTYDTC with U being zero.

[Cure]
Add a JUMPE U,

[Keywords]
ATTACH UUO
COMMAND WAIT

[Related MCOs]
None

[Related SPRs]
30898

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	213	UUOCON	UATC1W

702A	


[End of MCO 12170]
MCO: 12176		Name: TL		Date: 26-May-85:19:03:17


[Symptom]
System hangs when reloading if it doesn't know the date and time,
and there's no OPR to tell it.

[Diagnosis]
It isn't possible to use Primary protocol to ask -20F for the
date and time when we need it.  But thanks to the -20F developer, and not Tooo much prodding from us, we can now use secondary protocol to get the
date and time.

[Cure]
Teach ONCE to default all the date and time answers.  Default the
date and time questions to what we get from -20F if -20F will talk to , and the validity flag is on.  Since it's possible that one FE has a valid
date and time, and some other does not, ask all possible CPUs to poke -20F
for us.  Accept the first one that responds with valid data.  For the KS,
do something different, unsupported, but equally helpful.  While in the code,
make it easier to add the common site mod of confirming date and time.  Add
the (normally OFF, UNSUPPORTED) FTDTCK feature test which does what internal
sites are used to.

[Keywords]
time
date
startup

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	213	COMCON	FTDTCK
		FGEN	FTDTCK
		COMMON	DAYTAB,.EPDTM
		DTEPRM	DT.GDT,DF.GDT
		DTESER	SPCGDT
		ONCE	FTDTCK,DATHLP,DATL2A
		ONCMOD	GFETIM
		S
		KSSER	SPCGDT


[End of MCO 12176]
MCO: 12182		Name: JAD		Date: 30-May-85:16:35:37


[Symptom]
Missing information for UAF and IME stopcodes

[Diagnosis]
John A to Z asked me when I was feeling good

[Cure]
Print UBA and register address on UAF stopcode.
Print page fail word on IME stopcode.

[Keywords]
IME
UAF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	214	KLSER	SEILM
		KSSER	SEILM


[End of MCO 12182]
MCO: 12183		Name: RDH		Date: 31-May-85:00:58:30


[Symptom]

Local hardwired terminals (KS10, RSX20F) can get bad parity output
if TTY NO BLANK is set.

[Diagnosis]

Silly check in SCNSER.

[Cure]

Remove silly check in SCNSER.

[Keywords]
PARITY
TTY BLANK

[Related MCOs]
None

[Related SPRs]
35182

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		SCNSER	BLSUP1

703	214	SCNSER	BLSUP1


[End of MCO 12183]
MCO: 12189		Name: DPM		Date:  5-Jun-85:02:27:03


[Symptom]
TAPOP. UUO ignores UU.PHY

[Diagnosis]
Yes

[Cure]
MOVE --> HRR

[Keywords]
TAPOP

[Related MCOs]
None

[Related SPRs]
35119

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	TAPUUO	UTAPOP

702A	


[End of MCO 12189]
MCO: 12190		Name: DPM		Date:  5-Jun-85:02:43:18


[Symptom]
If a newly formated pack is mounted and the operator
chooses not to write the HOM blocks at ONCE time, but instead
does it with TWICE, PULSAR cannot mount a structure using said
pack.

[Diagnosis]
By default, all units are marked as having a pack
mounted during ONCE.  When a unit is found to be off-line, the
status is changed to "no pack mounted".  If the operator chooses
not to write the HOM blocks, the status is left to "pack mounted"
when it should be changed to "no pack mounted".

[Cure]
Set "no pack mounted" status appropriately.

[Keywords]
HOM BLOCKS

[Related MCOs]
None

[Related SPRs]
34892

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	ONCMOD	ASIS

702A	


[End of MCO 12190]
MCO: 12194		Name: CJA		Date:  7-Jun-85:14:23:21


[Symptom]
When many stopcodes happen in succession, SPEAR may only
report the correct information for the last one.
Even that information is wrong.

[Diagnosis]
During stopcode processing in DIE, the monitor
queues a request to DAEMON to log the stopcode info in ERROR.SYS.
DAEMON gets most of its info by PEEKing the monitor when it gets
scheduled.  If there are several stopcodes in a row (especially
EVENT or INFO types), then DAEMON never sees the monitor info for
any event but the last one.  Additionally, DAEMON always records
CPU0's AC set 0 only, even if some other AC block was actually active
at the time of the stopcode.  DAEMON also uses some historical
location to read the PI status at the time of the stopcode.  The
info isn't in that location any more.

[Cure]
Have the monitor create its own entry to be put into ERROR.SYS
using the system error block mechanism.  Record the AC block which was
active at the time of the stopcode (according to .CPACA).  Use the
contents of .CPCPI as the PI status at the time of the crash.

[Keywords]
STOPCD
DAEMON

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	CLOCK1	DAEEST


[End of MCO 12194]
MCO: 12196		Name: JAD		Date:  7-Jun-85:15:49:31


[Symptom]
Incorrect value returned in .RBSIZ for an extended LOOKUP
on a DECtape.

[Diagnosis]
DTASER tries to handle extended blocks, but it loses in a
few cases.

[Cure]
Store positive word count if extended LOOKUP.

[Keywords]
DECtape
EXTENDED LOOKUP

[Related MCOs]
None

[Related SPRs]
31442

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	215	DTASER	LOOK

702A	


[End of MCO 12196]
MCO: 12199		Name: TL		Date: 11-Jun-85:07:06:10


[Symptom]
Extended ENTER on a SPOOL'd DDB causes trashed job/file name or
address check when C(.RBCNT) = .RBVER

[Diagnosis]
FILUUO special cases an extended ENTER to a SPOOL'd DDB which
specifies .RBSPL (=.RBVER+1).  The check is off by 1.

[Cure]
Remove the "-1" from the CAIGE at UENTR+14.

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
702A		FILUUO	UENTR

703	215	FILUUO	UENTR


[End of MCO 12199]
MCO: 12215		Name: TL		Date: 20-Jun-85:10:14:20


[Symptom]
Monitor doesn't LINK.

[Diagnosis]
If you manage to MONGEN a monitor with no PTYs, PTYSER (correctly) doesn't
load.  This makes JOBSTS (the UUO) fail, and SCNSER uses JOBSTS' internal
entry point.

[Cure]
Enforce a minimum of 1 PTY in MONGEN.

[Keywords]
PTY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	MONGEN	ASKPTY


[End of MCO 12215]
MCO: 12216		Name: DRB		Date: 20-Jun-85:15:22:06


[Symptom]
LOOKUP failures due to RIB error or protection failure report either the
incorrect path or no path for the failure.

[Diagnosis]
No code to return the whole path, and the code to return just the PPN
of the file that failed gets it wrong.

[Cure]
Return as much of the path as possible if LOOKUP fails due to protection
or RIB error.

[Keywords]
LIB
/SYS

[Related MCOs]
None

[Related SPRs]
33281

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	FILUUO	ULOO4,ULOO7,ULOO14

702A	


[End of MCO 12216]
MCO: 12217		Name: RDH		Date: 20-Jun-85:22:16:19


[Symptom]

"Alocatable" LDBs in use by DECnet NRT/CTERM may get lost.

ANFWLA stopcodes.

[Diagnosis]

When a NRT terminal disconnects (or otherwise dies), NRTSER tries to
be clever and notices that the LDB is VTMed away and tries to disconnect
the VTM link (which it does successfully). It then seems to forget about
the LDB, never calling the FRELDB routine to return it to the SCNSER free
pool.

If a LAT terminal is ANF SET HOSTed out, and the LAT service breaks
(User breaks the connection, LAT server or Ethernet goes down, etc.),
the LAT terminal (LDB) is freed (FRELDB) but the ANF VTM connection is
not disconnected. The next time that LDB gets used for any type of ANF
connection (incoming "MCR" or outgoing "VTM") then NETSER finds the
LDB in already in NETLAT, yielding an ANFWLA crash.

[Cure]

Don't worry about ANF/VTM wierdness in NRTSER, instead teach FRELDB to
worry about "other networkedness" of LDBs, and do all the right things.

[Keywords]
ANFWLA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	SCNSER	FRELDB
		NETDEV	MANY
		NRTSER	NRTREL


[End of MCO 12217]
MCO: 12222		Name: RDH		Date: 24-Jun-85:14:55:16


[Symptom]

Various configurations and feature-test-settings don't assemble, and some
of those that do are too big.

[Diagnosis]

No one has tried them for awhile. Found some dangling code with no path
into it.

[Cure]

Yup. Reclaimed 14 words . . .

[Keywords]


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	217	COMNET
		COMCON
		KNISER
		SCSUUO
		UUOCON


[End of MCO 12222]
MCO: 12230		Name: JAD		Date: 27-Jun-85:09:59:24


[Symptom]
FTSCA not GETTABable.

[Diagnosis]
Never added it to FETTBL.

[Cure]
Add it.  F%SCA in %FTERR.

[Keywords]
SCA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
KL10 only
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	UUOCON	FETTBL
		UUOSYM	F%KLP


[End of MCO 12230]
MCO: 12234		Name: JAD		Date: 28-Jun-85:10:31:59


[Symptom]
Monitor too big.

[Diagnosis]
STOTAC doesn't explicitly set up M from .USMUO.  This requires
the extended addressing UUOs and error returns to do so.  A lot
of duplicate code gets wasted this way.

[Cure]
Load M from .USMUO in STOTAC.  STOTAC already preserves M so this
won't affect anyone calling STOTAC, it will just make it behave
like one would expect it to.

[Keywords]
STOTAC
TOOBIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	DATMAN	STOTAC
		KLPSER	DIRWF4
		S	ERCODX
		SCSUUO	LISERR,RDGER3,SDGER2,ACCERR


[End of MCO 12234]
MCO: 12242		Name: JAD		Date:  1-Jul-85:09:39:42


[Symptom]
Problems with SAT read error recovery.

[Diagnosis]
Not setting "software write lock for all jobs" in the case
of NNU, RPM, or SRE stopcodes.  Someone could delete files,
etc., and cause a BAC or other stopcode after system came up.

[Cure]
Set the flag in the write places.

[Keywords]
NNU
RPM
SRE
SAT read error

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	220	ONCMOD	NXTSIS,NXTUIS,NXTSI1,NXTSAT


[End of MCO 12242]
MCO: 12251		Name: DPM		Date:  9-Jul-85:06:18:59


[Symptom]
Can't queue output requests specifying a unit type such as
an LN01.

[Diagnosis]
No QUEUE. UUO argument block type.

[Cure]
Define .QBUTY==65 which contains a single sixbit word used to
indicate the unit type.  To avoid lots of repeated questions
and possible QARs or SPRs, the following caveat has been extracted
from QSRMAC:
			*** NOTE ***
	Neither QUASAR nor QUEUE perform any validity checks
	on the new unit class quantity.  This enables a customer
	to write a spooler which passes the unit class info to
	QUASAR with no modifications necessary to any part of
	QUASAR or QUEUE.


[Keywords]
QUEUE. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	221	UUOSYM	.QBUTY


[End of MCO 12251]
MCO: 12253		Name: JAD		Date:  9-Jul-85:13:50:15


[Symptom]
HOME/BAT/SAT block hardware read error always causes a message
about consistency failure to be printed in addition to the hardware
read error message.

[Diagnosis]
Proceeding with checks even if errors

[Cure]
Don't.  If we had a hardware read error then don't assume we can
check consistency.  We can't, and printing the second message seems
a little superfluous.

[Keywords]
CONSISTENCY FAILURE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	ONCMOD	REDCHK


[End of MCO 12253]
MCO: 12254		Name: JAD		Date: 10-Jul-85:09:17:23


[Symptom]
Not enough global symbols

[Diagnosis]
Who needs the symbol table anyway?

[Cure]
Define a symbol in COMMOD, UNPTSB, which is the mask for all
bits in the UNIDES word which are "timeshared" by the ONCE only
code.  Clear the(se) bit(s) when exiting the ONCE only code using
the UNPTSB mask.

[Keywords]
UNPCHG
TIMESHARED BITS

[Related MCOs]
12083

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	COMMOD	UNIDES
		ONCMOD	SWPFC3


[End of MCO 12254]
MCO: 12262		Name: JAD		Date: 12-Jul-85:10:32:39


[Symptom]
Stopcode IME, illegal address in UUO, doing both input and output
to a single DECtape.

[Diagnosis]
DEVEVM is getting timeshared for input and output.  Unfortunately,
it can't be timeshared, so sometimes we get confused over which
buffer is mapped in EVM and either give an illegal address error
(if lucky) or an IME stopcode.

[Cure]
Change UUOCON so it can only open a single DECtape on one channel.
Trying to fix EVM handling so we can have both input and output EVM
would be a real pain.

[Keywords]
DECTAPE
IME

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	222	DTASER	CHKCHN
		UUOCON	UINI2C


[End of MCO 12262]
MCO: 12276		Name: DRB		Date: 19-Jul-85:15:00:16


[Symptom]
IO.BKT from FILOP. close on a file protected <044>, opened for append
by someone who isn't the owner after he hasn't done any output to the file
but has a non-virgin buffer ring.

[Diagnosis]
Off by one.

[Cure]
CAMG -> CAMGE

[Keywords]
APEND
IO.BKT

[Related MCOs]
None

[Related SPRs]
35242

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	FILUUO	CHKLB4

702A	


[End of MCO 12276]
MCO: 12282		Name: JAD		Date: 23-Jul-85:09:05:55


[Symptom]
If you're spooling to magtape using LPTSPL and the tape drive drops
off line, putting the tape drive back on line has no effect.  The
job running LPTSPL is still waiting for an on line interrupt.

[Diagnosis]
TAPUUO gets called when a drive comes on line, and it tells the
MDC, but the information never gets passed on to the job which owns
the tape drive.

[Cure]
Teach TPMONL to call PSIONL as well as SNDMDC so the interrupt
gets back to the job owning the tape (if any).

[Keywords]
MAGTAPES
ONLINE INTERRUPTS
SOFTWARE INTERRUPTS

[Related MCOs]
None

[Related SPRs]
34492

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	TAPUUO	TPMONL
		TD2KON	NOWONL
		TM2KON	NOWON
		TX1KON	TPIN2A

702A	


[End of MCO 12282]
MCO: 12283		Name: DPM		Date: 23-Jul-85:09:06:38


[Symptom]
New: define system administrator privs.  The new (and last
available bit in JBTPRV) is JP.ADM==1B12.  For starters, this
will be used by the accounting system to allow a non-[1,2] job
to run REACT.

[Diagnosis]

[Cure]

[Keywords]
PRIVS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	UUOSYM	JP.ADM


[End of MCO 12283]
MCO: 12284		Name: ERS		Date: 23-Jul-85:09:39:09


[Symptom]
Users sometimes get I TTY backwards and type TT I.

[Diagnosis]
This wouldn't be so bad but TT I is the abbreviated from for
TTY IGNORE.  Probably NOT what the user wanted.

[Cure]
If the user wants TTY INGNORE, make him work for it.  Duplicate the 
table entry for IGNORE.  That way it is not unique to anything but the full
spelling.

[Keywords]
INGORE
TTY I
I TTY

[Related MCOs]
None

[Related SPRs]
35021

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	223	COMCON	TTYCMD
702A	


[End of MCO 12284]
MCO: 12290		Name: JMF		Date: 25-Jul-85:09:23:28


[Symptom]
If the cache is disabled with KLI, the monitor will still turn
it on when it starts up.

[Diagnosis]
It doesn't know that the cache was disabled by KLI.

[Cure]
Have BOOT preserve the state of cache look and load across the boot.
Have the monitor read the state of look and load at startup and IORM that
into .CPEBR when it is going to turn on the cache. N.B. IF THE MONITOR IS
BOOTED WITH AN OLD BOOTSTRAP IT WILL RUN WITH THE CACHE OFF.

[Keywords]
cache
look
load

[Related MCOs]
None

[Related SPRs]
32112

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO
Field service attention
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	COMMON	SYSTRT
		SYSINI	IOG5


[End of MCO 12290]
MCO: 12293		Name: JAD		Date: 26-Jul-85:12:19:25


[Symptom]
Monitor locations 0-177 get sprayed when trying to read a CI
disk with LOTS of bad blocks.

[Diagnosis]
If there are so many bad blocks that the HSC runs out of blocks
with which to do bad block replacement the I/O error will get
passed along to the monitor, which remembers the block number.
When we close (delete) the file, the monitor will scan the bad
block (region) to count the number of bad blocks.  It does this
by calling MAPIO with an IOWD with an address portion of zero.
This type of IOWD indicates no transfer into memory is to be
done.  That is, except in the case of the KLIPA.  The KLIPA is
actually doing one blocks worth of input starting at monitor
address zero.

[Cure]
Teach TSTBAD about CI disks:  if a CI disk, get a buffer to
read the block into, and return the buffer when done.  This
really isn't needed that often, but if a CI disk starts to go
bad it would be nice to record some bad block information.

[Keywords]
BAD BLOCKS
CI DISKS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	FILUUO	TSTBAD


[End of MCO 12293]
MCO: 12295		Name: WXD		Date: 26-Jul-85:13:46:40


[Symptom]
Possible cache bugs.

[Diagnosis]
SYSINI only forces OUCHTB through OUCHTB+3 to be uncached.
With an MCA25 this needs to be OUCHTB through OUCHTB+7.  Also, fix
some comments and a stopcode name that still believes in pre-MCA25
days.  Stopcode N4C (not 4 cached pages) becomes N8C (not 8 cached
pages).

[Cure]
Yes

[Keywords]
Cache
MCA25

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	SYSINI	KII10B
		CPNSER	FIXOTB

702A	


[End of MCO 12295]
MCO: 12297		Name: DRB		Date: 29-Jul-85:11:00:32


[Symptom]
IME from GETNMB.

[Diagnosis]
GETNMB is bopping along the ACC/NMB chain, and apparently gets tripped
by someone simultaneously unlinking an ACC from the same chain.  We get a zero
NMB pointer out of the newly unlinked block, and go boom.

[Cure]
Get CB a little earlier in CLRST0.

[Keywords]
IME
GETNMB

[Related MCOs]
None

[Related SPRs]
35237

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	FILUUO	CLRST0

702A	


[End of MCO 12297]
MCO: 12298		Name: JAD		Date: 29-Jul-85:11:28:07


[Symptom]
Stopcode EUE running DX20 magtape diagnostics.

[Diagnosis]
Using the "specify channel program" function of the DIAG. UUO
assuming there will be an IORB.  There ain't, and we start stuffing
junk in the IORB at address zero (i.e., the ACs).

[Cure]
Get an IORB if we need one.

[Keywords]
DFDXC
DFDXD
DIAG. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Field service attention
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	TAPUUO	TPDSCP


[End of MCO 12298]
MCO: 12299		Name: CJA		Date: 29-Jul-85:15:14:33


[Symptom]
TOPS-10 can't tell which port of a LATbox corresponds to
TTYnnn.

[Diagnosis]
We don't record that information, even if the LATbox
gives it to us.

[Cure]
Remember the LAT server port name if it's provided in the
start slot.  Also remember the host port and service names, which
the user specified on his initial CONNECT.

[Keywords]
LAT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	LATSER	HSSTRT


[End of MCO 12299]
MCO: 12302		Name: JAD		Date: 29-Jul-85:18:38:47


[Symptom]
UUOSYM problems:  %CCNIP doesn't appear to exist, missing bits
in DEBUGF.

[Diagnosis]
%CCNIP is preceded by a bunch of TABs, but no CRLF following
the definition of %CCCIP.  The "don't dump on" bits in DEBUGF
aren't defined in UUOSYM even though the "reload on" bits are.

[Cure]
Add a CRLF and add the definitions.

[Keywords]
%CCNIP
DEBUGF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	UUOSYM	%CCCIP,%CNDBF


[End of MCO 12302]
MCO: 12303		Name: JAD		Date: 29-Jul-85:18:41:20


[Symptom]
No clean way to set/clear bits in DEBUGF which control whether
the monitor will reload on CPU, DEBUG, or JOB stopcodes, or if
a continuable dump of those types of stopcodes will be taken.

[Diagnosis]
Missing functionality.

[Cure]
Add two RECON. UUO functions: .RCSDF (15) set bits in DEBUGF, and
 .RCCDF (16) clear bits in DEBUGF.  Teach ORION to use these, and
add appropriate commands to OPR.

[Keywords]
DEBUGF
RECON. UUO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	224	UUOCON	RECON.


[End of MCO 12303]
MCO: 12307		Name: RDH		Date: 31-Jul-85:15:12:27


[Symptom]

The terminal  "APC"  value  for  local  (RSX-20F,  KS-10  DZ)  dataset
terminals  always  says  "hardwired"  (.TOHDW)  rather  than "dataset"
(.TODSD) terminal.

[Diagnosis]

SYSINI calls LDBINI before calling LDBCLR, which results  in  the  APC
value  being  calculated  and  set  before  the  dataset status of the
terminal has been determined.  This results in a local terminal always
being declared "hardwired".

[Cure]

Make LDBCLR initialize the APC field for the LDB.   Remove  the  FTNET
conditional  code  in APCSET since all network-virtual-terminals (both
ANF-10 and DECnet/NRT) will always calculate and  set  the  APC  value
correctly independently of LDBCLR.

[Keywords]
 .TOAPC
Dataset
Terminal


[Related MCOs]
None

[Related SPRs]
34824

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	225	SCNSER	LDBCLR,APCSET

702A		SCNSER	LDBCLR,APCSET


[End of MCO 12307]
MCO: 12308		Name: JAD		Date: 31-Jul-85:16:13:21


[Symptom]
Possible stopcode KAF when setting large amounts of monitor
memory off-line.  More likely to happen in 7.02 than 7.03.

[Diagnosis]
When monitor memory is set off-line LOKCON moves all monitor
pages around during one clock tick.  Due to how expensive PAGFRE
is in 7.02 this can easily take more time than RSX-20F thinks we
should be ignoring his keep-alive counter.  The more memory you
try to set off the greater the chance of this happening.

[Cure]
After moving each page check if the second timer has expired,
and if so, exit the loop.  This will cause the once/second code
to be executed, preventing RSX-20F from causing a KAF stopcode.

[Keywords]
REMOVE MEMORY
KAF

[Related MCOs]
None

[Related SPRs]
35272

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	225	LOKCON	SETM16

702A		LOKCON	SETM20


[End of MCO 12308]
MCO: 12326		Name: DRB		Date:  7-Aug-85:15:57:39


[Symptom]
Refreshing a pack on a KS from once only yields a WTP stopcode.

[Diagnosis]
ALSAUN calls HIACLU to allocate the SYS: directory, who calls TAKBLK, who
calls NEWSAT who calls SATWRT who calls MONWRT.  Unfortunately, no one
has ever patched PWAIT1 to ONCWAT, so we call CLOCK1 to wait for the I/O
to complete.  The reason that this doesn't happen on KLs is that KLs have
FTMP turned on, in which case we don't call MONWRT, but REFWRT (who calls
OMONIO, who DOES patch PWAIT1) instead.

[Cure]
Make HIACLU patch PWAIT1.

[Keywords]
WTP

[Related MCOs]
None

[Related SPRs]
35311

[MCO status]
Checked

[MCO attributes]
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	226	REFSTR	HIACLU

702A	


[End of MCO 12326]
MCO: 12329		Name: JAD		Date:  8-Aug-85:10:07:06


[Symptom]
LOGIN recomputes disk usage when it shouldn't.

[Diagnosis]
UFDSET uses a GOBSTR UUO to check if any other job has the
structure in question in their search list.  If this is true,
UFDSET assumes recomputing is not necessary.  If this is not
true, and RIPLOG is set, UFDSET will go ahead and recompute.
Problem is, the GOBSTR UUO fails when specifying a job number
which is not logged in.  If two people try to log in under the
same PPN at the same time right after a crash, each will have
decided to recompute the same structures.

[Cure]
Remove the test in GOBSTR.  Change LOGOUT so it will remove
structures from the JSL as they are processed while the UFD
is still interlocked.  This will prevent any races which might
allow a user to log out over quota.

[Keywords]
LOGIN
RECOMPUTING

[Related MCOs]
None

[Related SPRs]
34591

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	226	FILFND	GOBSTR


[End of MCO 12329]
MCO: 12337		Name: CJA		Date:  9-Aug-85:15:34:14


[Symptom]
SCERR macro in DECNET doesn't leave as many traces as it should.

[Diagnosis]
SCERR generates a JRST to an error routine, so we can't tell
where the error was first detected.

[Cure]
Change JRST to be JSP CX, so that a clever system programmer can
set a breakpoint at the error routine to determine the source of the error.
Also make SCERR check for more popular aliases for CPOPJ so that it
will not generate an extra JRST CPOPJ.

[Keywords]
SCERR

[Related MCOs]
None

[Related SPRs]
34837

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	226	SCPAR	SCERR


[End of MCO 12337]
MCO: 12341		Name: JMF		Date: 13-Aug-85:06:59:54


[Symptom]
The size user programs can get physically is restricted to 512P 
unless CORMAX is set using the SET CORMAX command.

[Diagnosis]
CORLIM is limited to 512P.

[Cure]
Limit it to 16384P in an extended monitor.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	226	MONGEN
		COMMON


[End of MCO 12341]
MCO: 12348		Name: CJA		Date: 15-Aug-85:11:27:41


[Symptom]
TRMOP. action functions do not check to see if the user's
argument list is long enough for the requested function. They just
go ahead and read (or write!) what they need.

[Diagnosis]
Same as above.

[Cure]
For the action functions, add a field in the TOPTB0 table
which is the minimum required arg list length.  Give the user
an error if his arg list is shorter than needed.

[Keywords]
TRMOP.

[Related MCOs]
None

[Related SPRs]
34400

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	SCNSER	TOPTB0


[End of MCO 12348]
MCO: 12351		Name: RCB		Date: 16-Aug-85:14:39:04


[Symptom]
SEND ALLs done too close together get scrambled.  Generally, the second one
gets displayed twice.

[Diagnosis]
Too little interlocking on the code to typeout the messages.  Too impatient
to see the messages get out.  The once-a-second code counts down the SEND ALL
counter even if no characters have been typed yet.

[Cure]
Try harder to interlock the message typeout.  Always make COMCON defer the
message handling to SCNSER.  Add a 1.5-second slop factor the time we wait
for the typeout to finish before allowing the next SEND ALL.

[Keywords]
SEND ALL
KSYS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	SCNSER	XMTFSP,XMTSAP
		COMCON	SENDAX,SENDX1


[End of MCO 12351]
MCO: 12362		Name: KBY		Date: 19-Aug-85:19:54:14


[Symptom]
Mary can't get any examples of jobs in CX wait.

[Diagnosis]
No code.

[Cure]
Add code.  Also, table drive the "see if I own this resource"
routine with the RWAITS macro, similar to the way UNWIND was done
earlier.
	This adds the following routines:

	UPCX - obtain the CX for job in T1 on behalf of job in .CPJOB,
	blocking if it isn't available.

	DWNCX - return CX job which job in .CPJOB owns.

	GETCX - obtain CX on behalf of the current CPU; skip return
	if obtained, non-skip otherwise.

	GIVCX - return CX for current CPU.

	GGVCX - coroutine to get the CX and give it up on return
	(via UPCX and DWNCX).

	OWNCX - skip if we own CX in some flavor.

Teach KILPDB and IPCLOK/IPCULK to use CX instead of MM.

[Keywords]
CX

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	CTXSER
		IPCSER	IPCLOK,IPCULK
		FILIO	TSTDA,TSTAU
		DATMAN	KILPDB
		SCHED1
		CLOCK1	SRFREE
		COMDEV	TSTDTC
		DTASER	TSTDTC
		S	RWAITS


[End of MCO 12362]
MCO: 12363		Name: KBY		Date: 19-Aug-85:19:57:30


[Symptom]
Stopcode PFHZER if a fault occurs trying to get arguments
via {GET|PUT}EWD.

[Diagnosis]
By the time PFH gets the page fail, the section # has
been eliminated; if the argument was in page 0 of the section,
PFH loses.

[Cure]
Teach the ERJMP of GETWRD/PUTWRD and friends to take the
page fail PC out of the UPT (it should still be valid) and pass it
to UUOFLT through a different entry point to FLTSX.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	VMSER	SETUVL,FLTSX
		DATMAN	GETWRY,PUTWRZ


[End of MCO 12363]
MCO: 12364		Name: RDH		Date: 19-Aug-85:22:25:44


[Symptom]

DTX bites the dust again - TMPCOR doesn't work in extended addressing.

[Diagnosis]

BLTs => ?Ill addr in UUO

[Cure]

XBLTs => Happiness

[Keywords]
TMPCOR
ILL ADDR

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	227	S	XBLTUU
		TMPCOR	TMPREA,TMPWR


[End of MCO 12364]
MCO: 12375		Name: JAD		Date: 26-Aug-85:08:48:40


[Symptom]
None observed but the code is suspect.

[Diagnosis]
When creating non-zero section pages CREMNS makes the section
map addressable via .UMTMP.  It lights the cacheable bit in the
page map entry.  This isn't needed and is a bad idea in case a
caller doesn't make sure their cache is flushed before letting
other CPUs use the memory just allocated.

[Cure]
Don't set the cacheable bit.

[Keywords]
CREMNS
PM.CSH

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	230	VMSER	CREMN1


[End of MCO 12375]
MCO: 12376		Name: JAD		Date: 26-Aug-85:12:43:47


[Symptom]
Stopcode NSS refreshing a structure if someone selects the maximum
swapping space on a unit AND they tell ONCMOD to put the swapping
space at the end of the unit.

[Diagnosis]
The last SAT must have at least one free cluster for the SAT
itself to be marked.  ONCMOD doesn't ensure this, and if swapping
space is larger than the actual number of blocks in the last SAT
(remember, the last SAT will have some non-existant blocks in it
since the unit size is usually never evenly divisible by the
blocks/SAT) the entire last SAT can be taken for swapping space,
causing the NSS when REFSTR tries to allocate a cluster in the
last SAT for the SAT itself.

[Cure]
Teach ONCMOD to allow for a free cluster in the last SAT when it
computes the highest logical block for swapping.  This is only
necessary for the odd case described above.

[Keywords]
S..NSS
HIGHEST LOGICAL BLOCK FOR SWAPPING

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	230	ONCMOD	K4SOK


[End of MCO 12376]
MCO: 12381		Name: WXD		Date: 27-Aug-85:13:23:17


[Symptom]
GETTABs of DECnet items always returns success with a zero value
when DECnet isn't loaded in the monitor.

[Diagnosis]
Entries in NUMTAB for the DECnet tables are assembled based
upon FTDECN whereas DECnet is loaded based upon the MONGEN symbol
M.DECN.

[Cure]
If DECnet isn't loaded, clear the NUMTAB entries.

[Keywords]
DECnet

[Related MCOs]
None

[Related SPRs]
35279

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	UUOCON	NUMTAB,.GTDNT,.GTSJB
		COMNET	D36INI


[End of MCO 12381]
MCO: 12387		Name: JMF		Date: 29-Aug-85:05:00:02


[Symptom]
Can't get a TOPS20 EXE file on TOPS10.

[Diagnosis]
TOPS20 turns on SV%WRT+SV%SHR (page is writable and sharable)
in the EXE file directory to indicate the page is copy-on-write but since
TOPS10 has no notion of a sharable writable page, it says bad directory
for EXE file.

[Cure]
Just treat this case like a low segment page. This will allow TOPS20
EXE files to be moved to TOPS10.

[Keywords]
TOPS20
EXE files

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	SEGCON	WANTI3


[End of MCO 12387]
MCO: 12389		Name: JMF		Date: 29-Aug-85:09:00:25


[Symptom]
Monitor can make EXE files on a SAVE which it can't get on a GET.

[Diagnosis]
1) It can't handle the case of an EXE file containing page 777
when it isn't the last page described in the EXE directory.
2) It can't deal with an EXE directory more than 3 pages long.

[Cure]
1) Read the data from the file over the directory page after all of
the other pages have been read.
2) Just allocate 1 page for the directory and read the directory pages
as needed.

[Keywords]
GET
EXE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	SEGCON	LOTS


[End of MCO 12389]
MCO: 12393		Name: RDH		Date: 29-Aug-85:22:45:24


[Symptom]

ANF terminals lose the setting of TTY LC, TAB, FORM, XONXOF, and CRLF
when they SET HOST.

[Diagnosis]

The monitor ignores those bits in the "STATUS" field (but keeps track
of those other things like TTY WIDTH, etc.) in the "ATTRIBUTES" and
"CHARACTERISTICS" fields.

[Cure]

Check for terminal characteristics in the "STATUS" field too, set the
LDB appropriately.

[Keywords]
SETHOST
TTY
TAB
FORM


[Related MCOs]
None

[Related SPRs]
33592

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	NETDEV	MCRSTS
		DNNCL
		DNTTY

702A		NETDEV	MCRSTS
		DNNCL	NCRDIS
		DNTTY	TS.RCN


[End of MCO 12393]
MCO: 12396		Name: JMF		Date:  3-Sep-85:06:48:30


[Symptom]
New: Add CALLI 225 (ENTVC.) to read/set an entry vector.
Calling sequence:
	XMOVEI	AC,addr
	CALLI	AC,225
	  ERROR RETURN
	OK RETURN
	...
addr/	function	;only function 0 is defined, sign bit says set
addr+1/	length		;(JRST) or 0-n where n is .LE. 37
addr+2/	exec-addr	;30 bit address of entry vector or start address
			; if length is (JRST)
Error returns
EVIAL%==1		;illegal argument list
EVIFC%==2		;illegal function code
EVADR%==3		;address check

See the MACRO and LINK manuals for a descriptions of an entry vector.

[Diagnosis]

[Cure]

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	UUOCON
		COMCON
		SEGCON
		UUOSYM


[End of MCO 12396]
MCO: 12397		Name: JAD		Date:  3-Sep-85:08:00:17


[Symptom]
Possible disk hangs since 7.02?

[Diagnosis]
There's a hole in the unit status codes, which was previously occupied
by SWCOD and SCOD.  When MCO 10480 removed the SEEK UUO and state the
hole wasn't closed.

[Cure]
Remove the hole.

[Keywords]
SWCOD
SCOD
UNISTS
HUNG DISK

[Related MCOs]
10480

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	231	COMMOD	UNISTS


[End of MCO 12397]
MCO: 12399		Name: BAH		Date:  4-Sep-85:08:21:18


[Symptom]
Copyrights in CUSPs do not contain "ALL RIGHTS RESERVED."

[Diagnosis]
Not put in during 7.02 and the copyright macro uses a "." for
its delimiter.

[Cure]
Change the copyright macro to use a "\" for the delimiter so copyrights
can say "year,year. ALL RIGHTS RESERVED."

[Keywords]
COPYRIGHT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	UUOSYM	COPYRI


[End of MCO 12399]
MCO: 12406		Name: JAD		Date:  5-Sep-85:15:26:01


[Symptom]
Monitor sources too big and monitor takes too long to compile (chapter 2).

[Diagnosis]
No .USxxx symbol for page fault locations, causing references
as .UPMP+.LMPFx.

[Cure]
Invent .USPFx equivalent to .UPMP+.LMPFx and use that instead of
the latter.  Delete .LMPFx and define .UPPFx instead.

[Keywords]
 .UPMP+.LMPFx
 .USPFx

[Related MCOs]
11994

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	CLOCK1
		COMMON
		DATMAN
		ERRCON
		KLSER
		KSSER
		MONPFH
		PSISER
		S
		SYSINI
		UUOCON
		VMSER


[End of MCO 12406]
MCO: 12411		Name: CJA		Date:  6-Sep-85:12:42:25


[Symptom]
No way to tell where a TTY is connected unless it is local
or connected through ANF.

[Diagnosis]
No code.

[Cure]
Add new UUO NETOP.
Function 1 of NETOP. will return the node name and port name (if available)
where a TTY is connected.  This will work for local, ANF, NRT/CTERM, and
LAT terminals, and will also indicate what kind of connection it is.

[Keywords]
TTY
NETOP.

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	UUOCON	NETOP
		NRTSER	NETDID
		LATSER	NETDIL
		COMNET	NETDID,NETDIL


[End of MCO 12411]
MCO: 12420		Name: WXD		Date:  9-Sep-85:12:32:27


[Symptom]
SHOW CIRCUIT/LINE ETH-0 COUNTERS sometimes zeros the counters.

[Diagnosis]
The code doesn't clear the UNZRO bit in the UN block when
calling ETHSER.  A previous ZERO COUNTERS command could have
set the bit.

[Cure]
Yes.  Clear the UN block when we get it off the list of
free UN blocks.

[Keywords]
DECnet
Ethernet

[Related MCOs]
None

[Related QARs]
868244

[MCO status]
Checked

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	DNADLL	GETUNB


[End of MCO 12420]
MCO: 12426		Name: RCB		Date: 10-Sep-85:07:41:42


[Symptom]
Interrupt-driven programs don't work well under MIC or batch.  Notable examples
are OPR and UMOUNT.

[Diagnosis]
No way for the controlling job to tell that the controlled job's HIBER means
that it wants input.

[Cure]
Add a new JOBSTS bit, JB.UHI, to flag that the user is HIBERing for input.
Since there is only one free bit in the MIC status word, add TO.LUI (line's
user is interesting) to flag MIC to do a JOBSTS to see what's up.

[Keywords]
MIC under batch

[Related MCOs]
11845

[Related QARs]
868049

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
QAR answer
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	PTYSER	UJBSTX
		SCNSER	TOPMGT
		S
		UUOSYM	JOBSTS,.TOGMS


[End of MCO 12426]
MCO: 12427		Name: WXD		Date: 10-Sep-85:09:07:29


[Symptom]
System will not talk to MCBs.

[Diagnosis]
When I changed %RTBSZ via MONGEN a while back so we could use
1400 byte messages on the ethernet this broke MCBs.  It turns out
%RTBSZ is used with two different meanings: 1) executor block size,
and 2) maximum data link buffer size.  TOPS-20 SETSPD program pokes
the location where "maximum data link buffer size" is stored to get
the system to use large messages on the ethernet.

[Cure]
Invent a new MONGEN symbol:

	%DLBSZ		Default maximum data link buffer size

Its default is 576 (just like %RTBSZ) and it governs the size of
the maximum messages that DECnet will use at the data link layer.

[Keywords]
DECnot
PITS-20

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	232	GEN.CT
		COMNET	%DLBSZ
		D36COM	%DLBSZ
		DNADLL	DNDCLN


[End of MCO 12427]
MCO: 12429		Name: JAD		Date: 10-Sep-85:14:15:17


[Symptom]
Problems calling FILDAE on exit, also losing funny space if
we try to call FILDAE and he isn't running.

[Diagnosis]
Calling sequence of SENDFD changed but COMCON didn't change
in the right way.  Also, if SENDFD determines FILDAE is not
running the packet which IPCSER would have returned never gets
returned to funny space.

[Cure]
Fix COMCON to call SENDFD correctly, and teach SENDFD to return
funny space used for a packet if FILDAE isn't running.

[Keywords]
SNDFXM
FILDAE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	COMCON	SNDFXM
		FILFND	SNDFMG,SENDFD


[End of MCO 12429]
MCO: 12436		Name: JMF		Date: 13-Sep-85:04:05:07


[Symptom]
SAVE of a large virtual program is too slow (1 of n). In fact,
I'm not sure that with the current algorithm, that the SAVE of a 16384
page program would complete in my life time; it certainly wouldn't in
the longest recorded uptime of any known system running TOPS10.

[Diagnosis]
1) The image size is immediately expanded to CORMAX causing it
to swap a lot
2) Since the image size is at CORMAX, any attempt to page in a page will
probably require a swap out to allocate the core
3) If a page must be paged out to page in the currently needed page, the
algorithm always starts looking at page zero for a page to page out. This
can take a long time if the only pages in core are high in the address
space

[Cure]
Modify the algorithm to always page out the last page paged in (if known).
This keeps the image small, eliminates the need to search for a page to page
out, and ripples through the core image from page 0-the top which is the
desired effect.

[Keywords]
SAVE
multisection core images

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	SEGCON	CKSIZ4
		COMCON	SAVEXE,PAGIN,CKDIRP,PAGIA


[End of MCO 12436]
MCO: 12445		Name: JMF		Date: 17-Sep-85:05:26:49


[Symptom]
GET/RUN of large virtual programs is too slow (1 of 1?, I'm
not sure I can make it any faster).

[Diagnosis]
SEGCON doesn't do the I/O and/or the paging as efficiently as
it could.

[Cure]
1) Have SEGCON always (unless overlapping the EXE directory page)
setup to read all the pages described by an EXE directory entry. Let
MONPFH handle the I/O, paging.
2) When the I/O is done, always page out the entire glump of pages read
with PG.IDC turned on (this tends to minimize swapping while the GET is
in progress)

[Keywords]
GET
RUN
BIG

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
VM only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	333	SEGCON	LOTS
		MONPFH	DOPAGE


[End of MCO 12445]
MCO: 12447		Name: WXD		Date: 17-Sep-85:06:21:55


[Symptom]
No legitimate way to determine the "ethernet channel number" for
an ethernet channel id using the ETHNT. UUO.

[Diagnosis]
Not returned by any of the functions.

[Cure]
Add "ethernet channel number" to data buffer returned by the ETHNT.
function .ETRCI (read channel information).  This word is at the front
of the block and shifts the remainder of the block down by one.  New
format is:

	Symbol	Offset	Name
	
	.EICNM	   0	Ethernet channel number
	.EICEA	  1-2	Current ethernet address

[Keywords]
fofof
Better late than never
Ethernet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
Documentation change

[BEWARE text]
The format of the data buffer returned by the ETHNT. UUO function
 .ETRCI has changed.  A new word (.EICNM=0) has been added to the front of
the buffer.  This word will contain the ethenet channel number.  Word
 .EICEA has been shifted down one word and is now offsets 1 and 2.

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	ETHPRM	BEGSTR,CI
		ETHSER	RCITAB
		UUOSYM	.EICNM,.EICEA


[End of MCO 12447]
MCO: 12449		Name: WXD		Date: 17-Sep-85:06:47:25


[Symptom]
Confused people.

[Diagnosis]
MONGEN's explanation of DECnet router type doesn't match what
we support.  The description of NONROUTING makes no mention of the
fact that this is supported only on an ethernet circuit.

[Cure]
Yes

[Keywords]
DECnet
Ethernet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	MONGEN	NETGEN


[End of MCO 12449]
MCO: 12450		Name: RCB		Date: 17-Sep-85:07:02:19


[Symptom]
MICros and batch jobs hang needlessly.

For example, the following sequence fails:

	.GET xxx
	.CSTART
	.ATTACH yyy

[Diagnosis]
Testing RUN bit even though we don't need to.

[Cure]
Don't say user can't do input at monitor level just because he's running.
The line will be quite happy to take input.

[Keywords]

[Related MCOs]
None

[Related SPRs]
34745

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	PTYSER	UJBST2

702A	


[End of MCO 12450]
MCO: 12451		Name: WXD		Date: 17-Sep-85:09:52:58


[Symptom]
DECnet memory allocation either pre-allocates too little or too
much.  Running DECnet on the ethernet makes predicting the amount
of memory to give DECnet at startup hard to do.  Customers usually
have to change the default amount allocated (M.DNSZ).

[Diagnosis]

Yes.  Bitmap memory allocation is inflexible.

[Cure]

New:  Add support for extensible bitmap memory.  Extensible
bit map memory is managed by new routines in CORE1: GTXWDS and
GVXWDS which are called just like GETXWS/GIVXWS with the addition
of T3 containing the address of an allocation control block.

The ACB (allocation control block) has information about initial,
incremental and maximum memory allocation.  This block also keeps
track of the current free amount and enforces limits on the max-
imum size to which the free pool can grow.  The extensible bitmap
memory is implemented as a chain of bitmaps.

Several new MONGENable values now exist:

	Name	Default		Description

	M.DNCS	     4		Size of chunks in words
	M.DNSZ	 30000		Initial size of DECnet allocation in words
	M.DNTH	  4000		Threshold allocation in words
				 (Point at which pool is expanded)
	M.DNIN	  4000		Incremental allocation in words
				 (Minimum amount pool is expanded)
	M.DNMN	 10000		Minimum allocation in words
				 (Target amount free when pool is expanded)
	M.DNMX	100000		Maximum allocation in words
				 (Maximum size to which pool can expand)

Customers should normally only change M.DNSZ (initial allocation) and
M.DNMX (maximum allocation).

GETTAB table entires %DNLOC and %DNPTR are now obsolete.  New GETTAB
items:

	Name	Table	Item	Description

	%DNACB	 170	 23	Address of DECnet Allocation Control Block
	%CNACB	  11	202	Address of First Allocation Control Block
	%CNAHB	  11	203	Address of First Allocation Header Block


New stopcodes:

	Name	Module	Type	Description

	CORNAH	CORE1	DEBUG	No allocation header block
	CORCNA	CORE1	DEBUG	Core not allocated
	CORNCB	CORE1	DEBUG	Not on a chunk boundary
	COMCWA	D36COM	BUGCHK	Core allocation wrong

[Keywords]

DECnet
Extensible Bitmap Memory

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	233	COMMON	M.DNSZ,ACBMEM,D36MEM,DCNACB,DCNAHB,DCBAEB
		COMNET	%DNLOC,%DNPTR
		CORE1	GTXWDS,GTXXTD,GVXWDS
		D36COM	DCNCOR,DNGTCR,DCNCCR,D36INI
		DNADLL	DNDCCR
		LLINKS	NSPCCR
		ROUTER	RTRCCR
		SCLINK	SCTCCR,SCTTCR
		S	ACB,AHB,AEB,.LKACB,.LKAHB
		SYSINI	ACCINI
		UUOSYM


[End of MCO 12451]
MCO: 12454		Name: JAD		Date: 18-Sep-85:09:53:22


[Symptom]
MAPIO on the KL can be minutely faster.  The calling sequence
documentation leads one to believe the frame-count argument is
only used for DX10 channels.  The restriction on IOWDs which
look like RH20 jumps should only apply to RH20 channels.

[Diagnosis]
Replace two instructions which fetch/test CHB22B with a test
on U (already set up from CHB22B).  Change the documentation
to reflect reality.  Change the restriction to only apply to
RH20 channels.

[Cure]
See above.

[Keywords]
MAPIO

[Related MCOs]
None

[Related SPRs]
35336

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	KLSER	MAPIO


[End of MCO 12454]
MCO: 12457		Name: JAD		Date: 19-Sep-85:11:00:12


[Symptom]
Bringing up a system using the startup option switch /NOPRIMARY
doesn't last across warm restarts, MOS memory errors, or power
fail recovery.

[Diagnosis]
/NOPRIMARY causes ONCE to patch out 2 calls to STAPPC, one
in SYSINI and the other in COMMON (SPRINI).  There are other
calls which don't get neutered.

[Cure]
Rather than increase the number of calls to neuter change ONCE's
handling of /NOPRIMARY to set a flag (ST%NPP) in CNFST2 which
indicates starting primary protocol has been disabled.  Remove
PPCPAT and PPCPT1 to avoid any confusion.  While we're at it,
remove the useless JFCL's following all calls to STAPPC (which
only has a non-skip return).

[Keywords]
/NOPRIMARY
PPCPAT
PPCPT1

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
KL10 only
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	COMMON	PPCPT1,WRSF
		DTESER	STAPPC,DTEPFC
		MOSSER	DTESTR
		ONCE	SWTEST,SWTXCT
		S	ST%NPP
		SYSINI	PPCPAT
		UUOSYM	ST%NPP


[End of MCO 12457]
MCO: 12460		Name: JMF		Date: 19-Sep-85:11:21:17


[Symptom]
Can't SAVE/GET an EXE file onto/from a magtape.

[Diagnosis]
Monitor tries to write/read more than one page at a time.

[Cure]
If it isn't a disk, always assume record size is one page.

[Keywords]
SAVE
GET
MAGTAPE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	COMCON	RELDIR
		SEGCON	GTLOOP


[End of MCO 12460]
MCO: 12461		Name: JMF		Date: 19-Sep-85:11:27:07


[Symptom]
SAVE is too slow (n of n, finally).

[Diagnosis]
Pages are written out one page at a time.

[Cure]
If the output device is a disk, if the EXE directory is no longer than
one page, and if a page didn't have to be paged out to create the directory,
write the pages represented by each entry in the EXE directory in one fell
swoop.

[Keywords]
SAVE
Fast

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	COMCON	RELDIR


[End of MCO 12461]
MCO: 12464		Name: JAD		Date: 20-Sep-85:10:14:53


[Symptom]
The concept of a "planned CRAM parity error" on a CI20 or NIA20 is
difficult to understand.  People see "CRAM parity error" and assume
something about broken hardware which may not be true.

[Diagnosis]
KLPSER and KNISER print one canned message for planned and unplanned
CRAM parity errors.  An unplanned CRAM parity error is a real parity\
error which may be indicative of a hardware condition.  A planned CRAM
parity error is simply a way the microprocessor tells the KL why the
microprocessor decided to halt.

[Cure]
Separate out the two cases.  An unplanned CRAM parity error will cause

	?Stopcode {KLPCPE|KNICPE} blah blah blah
	{CI20|NIA20} CRAM parity error
	CRAM location nnnn, CRAM contents m,,m p,,p

A planned CRAM parity error will cause

	?Stopcode {KLPHLT|KNIHLT} blah blah blah
	{CI20|NIA20} microprocessor halted - [reason why it halted]

If the planned CRAM parity error is not one we have defined the reason
will be "Undefined halt code xxxx" where xxxx is the CRAM location.

[Keywords]
KLPCPE
KNICPE
PLANNED CRAM PARITY ERROR

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
Field service attention
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	KLPSER	KLECPE,CPETYP,HLTTYP
		KNISER	KNECPE,CPETYP,HLTTYP


[End of MCO 12464]
MCO: 12469		Name: ERS		Date: 24-Sep-85:09:33:08


[Symptom]
No system PID for a mailer.

[Diagnosis]
Yes.

[Cure]
Give it one.  New gettab %SIMAI== 17,,126.  New system PID index 
 .IPCPX==17.  New QUEUE. UUO function .QUMAI==17.  While there also add
QUEUE. UUO function .QUEVT==20, for QUASAR events.  Which was left out
previously by DPM.

[Keywords]
MAILER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	234	COMMON	%SIMAI,%QMAIL
		UUOSYM	%SIMAI,.IPCPX,.QUMAI,.QUEVT


[End of MCO 12469]
MCO: 12470		Name: DPM		Date: 25-Sep-85:00:28:32


[Symptom]
It's a pain to debug SMP monitors because:

1. You have to remember to apply SYMS.DDT.
2. You want to use SYMS at a customer site, but you forgot
   to take it and the customer doesn't have it.
3. Even if he had SYMS, he never knew what it was for so he
   deleted it.
4. Tony deleted cute symbols used by SYMS.
5. It only works if the boot CPU is CPU0.

[Diagnosis]
Yes.

[Cure]
When starting the monitor at DEBUG, store away the CPU number
and have BECOM0 and BRKLOK check it and DEBUGF so calls to these
subroutine can be turned into noops.  This feature can be disabled
by putting a JFCL at DDTCPU in ONCE.

[Keywords]
DEBUGGING
SMP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Multi CPU only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	COMMON	DEBCPU
		CPNSER	BECOM0,BRKLOK,DEBCPU
		ONCE	DEBUG


[End of MCO 12470]
MCO: 12473		Name: RCB		Date: 26-Sep-85:15:28:33


[Symptom]
FILOP. functions .FODLT and .FORNM can still trash the ACs, even after
MCO 9908.

[Diagnosis]
A new incarnation of the bug was added.

[Cure]
Test for the first word of a LOOKUP/ENTER/RENAME block being zero, and
recognize that as a short-form (4-word) block.

[Keywords]
Short LOOKUP

[Related MCOs]
9908

[Related QARs]
868303

[MCO status]
Checked

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	UUOCON	FCLERB

702A	


[End of MCO 12473]
MCO: 12479		Name: RDH		Date: 30-Sep-85:22:01:30


[Symptom]

Undeserved Address Check ("m" of "n")

[Diagnosis]

Off-by-one

[Cure]

CAML becomes CAMLE at PFHNX3+2

[Keywords]
Address check
OFFBYONE

[Related MCOs]
None

[Related QARs]
868229

[MCO status]
None

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	MONPFH	PFHNX3


[End of MCO 12479]
MCO: 12480		Name: RDH		Date:  1-Oct-85:00:04:30


[Symptom]

Random 1022 and ALGOL programs don't work under 7.03, failing with
such messages as:
   "?Invalid core/section argument"
or:
   "?ALGOL object time system not found"

[Diagnosis]

Random 1022 and ALGOL programs leave junk in the GETSEG arg block.

[Cure]

Make GETSEG ignore "obvious" junk in the core-argument [sixth] word of the
GETSEG block.

[Keywords]
1022
ALGOL
GETSEG

[Related MCOs]
11962

[Related QARs]
868272, 868274

[MCO status]
None

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	SEGCON	UGETHI


[End of MCO 12480]
MCO: 12482		Name: RCB		Date:  1-Oct-85:09:49:52


[Symptom]
DTS (or was it DTR?) is broken after MCOs 11845,12426,12446.

[Diagnosis]
It depended on not getting input from BATCON and MIC when running.

[Cure]
Add a new bit to HIBER, HB.DIN (demanding input).  If lit, the new
JOBSTS bit JB.UHI (user HIBERing for input) will be enabled, so that BATCON
and MIC will notice that the user job wants input.  If HB.DIN is off in the
HIBER request, the old (7.02 and previous) behavior will obtain.  To wit,
no input lines will be sent to the job until it goes into TI or exits.

[Keywords]
OPR under MIC, etc.

[Related MCOs]
11845, 12426, 12446

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	235	PTYSER	UJBSTU
		UUOCON	HIBER4
		COMMON	JBTRTD
		UUOSYM	HIBER


[End of MCO 12482]
MCO: 12483		Name: CJA		Date:  1-Oct-85:17:05:04


[Symptom]
Illegal address in NSP. function .NSFDS once in a while.
Usually found while running NRT/CTHNRT or PSTHRU.

[Diagnosis]
Off by the proverbial 1 (but only occaisionally) when
we try to copy a user's DECnet data to a monitor buffer.
He gives us 5 bytes (e.g.) and we claim we sent 6.

[Cure]
Change a SOJGE to a SOJG, and test for .LE. 0 before the loop.

[Keywords]
NSP.
PSTHRU
NRT

[Related MCOs]
None

[Related QARs]
868283

[MCO status]
Checked

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	336	D36COM	DNCUM1


[End of MCO 12483]
MCO: 12486		Name: JAD		Date:  2-Oct-85:09:00:29


[Symptom]
Symbol table is truncated  on  large  configurations,  making  debugging
difficult.  Some large configurations may not fit in a 256K monitor .EXE
file.  Making a TOPL10.REL is more difficult than it needs to be.

[Diagnosis]
A bad case of creeping featurism happened in 7.03.  We used  up  all  of
the addressing space available in section zero.  As a stopgap measure we
loaded DECnet modules following the rest of the monitor code and  played
games  to relocate them into section 7 so the addressing space they used
could be re-used by AUTCON for  data  structures.   Putting  the  DECnet
modules  there  required  tweaking  TOPL10.REL  and  DECNET.REL into one
TOPL10.REL with the DECnet modules in the "right" place.  This  in  turn
made  the  monitor  build  procedures more difficult.  Unfortunately, we
quickly used up any space which was left over with  those  new  features
like CI and NI and LAT and contexts and ...

[Cure]
As a preliminary to making a real multi-section monitor .EXE file, start
using  PSECTs  for  the  high and low segment.  In the first incarnation
nothing will actually move.  The symbol table will still follow the  low
segment,  DECnet  modules  will  still  load  following  the rest of the
monitor, and  the  symbol  table  will  still  get  truncated  on  large
configurations.

[Keywords]
PSECTS
ADDRESSING SPACE
OH GOD, NOT ANOTHER DZIEDZIC MCO

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	COMMON	LOTS
		COMNET	OF
		ONCE	CHANGE
		S	GUYS


[End of MCO 12486]
MCO: 12487		Name: JAD		Date:  2-Oct-85:09:02:25


[Symptom]
Section names are inconsistent and not very indicative of what is  in  a
particular  section.   Some  references to MDSEC1 involve the addressing
space where SAT blocks are kept while others involve the  first  monitor
data section.

[Diagnosis]
MDSECn was OK when there were only a few things  in  extended  sections,
but  now  that  we  are literally all over the place we need to separate
MDSECn into various other pieces.

[Cure]
Split MDSECn into MS.xxx, where xxx is  "SAT"  for  SATs  (old  MDSEC1),
"MEM"  for  PAGTAB/PT2TAB/MEMTAB  (old  MDSEC2), "SCN" for SCNSER's data
base (old MDSEC3), and "FMD" for references to the  first  monitor  data
section (old MDSEC2).

[Keywords]
SECTION NAMES
TAKE YOUR VACATION NEXT WEEK

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	COMCON	TOO
		COMMON	MANY
		CORE1	TO
		CPNSER	LIST
		D36PAR	DNSNUP
		ERRCON
		FILFND
		LOKCON
		NETDEV
		NETSER
		ONCE
		ONCMOD
		S
		SCHED1
		SCNSER
		SEGCON
		SWPSER
		SYSINI
		TX1KON
		VMSER


[End of MCO 12487]
MCO: 12493		Name: WXD		Date:  3-Oct-85:11:13:50


[Symptom]
The NETWOR program lies about the DECnet network when we're
running as an ethernet endnode.

[Diagnosis]
It doesn't know any better, and monitor doesn't provide a
way to find out.

[Cure]
Add a bit (ST%END==1B6) to the second configuration status word
(%CNST2 - GETTAB table 11 entry 106) which indicates that DECnet
is running as an ethernet endnode.

[Keywords]
DECnet
Ethernet
Endnode

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	336	S	ST%END
		COMMON	CNFST2
		ROUTER	RTRINI
		UUOSYM	ST%END


[End of MCO 12493]
MCO: 12497		Name: WXD		Date:  3-Oct-85:13:42:35


[Symptom]
Unprivileged (without poke) users can't get neat SYSDPY
display of ethernet information.

[Diagnosis]
Overly paranoid programmer.

[Cure]
Yes.  Allow unprivileged access to all functions of ETHNT. except
for opening portals or zeroing counters which still require poke.

[Keywords]
Ethernet
ETHNT.

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	ETHPRM
		ETHUUO	ETHNT.,ENTOPN,ENTRXC


[End of MCO 12497]
MCO: 12498		Name: JMF		Date:  4-Oct-85:06:09:28


[Symptom]
PFHUUO stopcd (PFH trying to create/page in 0 pages when doing
dump mode I/O).

[Diagnosis]
PFH really believes in limits.

[Cure]
If a limit/guideline of less that 4P is specified, make it 4P.
This will guarentee that PFH has at least one physical page available
to it for doing dump mode I/O.

[Keywords]
PFHUUO
Limits

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Beware file entry required
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	VMSER	CHKLIM


[End of MCO 12498]
MCO: 12499		Name: RDH		Date:  5-Oct-85:18:31:02


[Symptom]

Possible confusion with RDX devices if INPUT performed before OUTPUT
on a non-virgin DDB (e.g., a DDB which is ASSIGNed and has been RELEASed
at least once then re-OPENed again).

[Diagnosis]

Sticky bit.

[Cure]

Make sure IOSREL *ALWAYS* gets cleared.

[Keywords]
RDXSER

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	RDXSER	RILOOP,ROLOOP,RDXFIR


[End of MCO 12499]
MCO: 12503		Name: RDH		Date:  7-Oct-85:21:33:31


[Symptom]

Undeserved ?Address check ("m+1" of "n")

[Diagnosis]

MONPFH can leave Access-Allowed off

[Cure]

Turn it on.

[Keywords]
Address check

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	236	MONPFH	PFHNXI


[End of MCO 12503]
MCO: 12518		Name: JAD		Date: 17-Oct-85:09:09:03


[Symptom]
No room for the sky high segment  in  a  multi-section  .EXE  file  when
loading in 768K.

[Diagnosis]
The sky high segment is currently in section  7.   Since  BOOT  loads  a
multi-section  .EXE  file in place, one would require 8 sections of 256K
to load a monitor with code in section 7.  That's a  little  beyond  the
SPD, to say nothing of the limits of reason.

[Cure]
Exchange the section numbers used for the SATs and the sky high segment.
SATs  now  reside  in  section  7,  and  the sky high segment resides in
section 2.  By shuffling the sections around we make room for the DECnet
PSECT to load in (physical) section 2 when that MCO happens.

[Keywords]
SAT SECTION

[Related MCOs]
12486, 12487

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	240	COMMON	NZSFC2,NZSFCH
		ONCE	COMENT
		S	MS.SAT,MS.HGH
		SYSINI	COMENT


[End of MCO 12518]
MCO: 12519		Name: JAD		Date: 21-Oct-85:14:58:38


[Symptom]
Symbol table is truncated  on  large  configurations,  making  debugging
difficult.  Some large configurations may not fit in a 256K monitor .EXE
file.  Making a TOPL10.REL is more difficult than it needs to be.  (Part
2 of n.)

[Diagnosis]
The monitor is too big for the available space.

[Cure]
Put DECnet in a separate PSECT in the monitor, origined  in  section  2.
Use LINK version 6 to write the resulting multi-section .EXE file.

[Keywords]
PSECTS

[Related MCOs]
12486, 12487

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[BEWARE text]
LINK version 6 MUST be used to link this  monitor;   (E)DDT  version  43
MUST be used with this monitor.  A KL monitor with DECnet configured now
requires a minimum of 768K of physical memory.   Please  note  that  the
load order of monitor modules is very important.  DECnet modules MUST be
loaded immediately following the COMMON modules (COMMON, COMDEV, COMNET,
and COMMOD).

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	240	COMMON	SSEC1,SSEC0,SENCAL
		D36COM	DNCU2M,DNCM2U
		D36PAR	DNSNUP,XADDR.,XRESCD,XSWAPC,TOXRES,TOXSWA,CALLX,XCALL,XCALLR
		KLSER	SSEC1,SSEC0,SENCAL,V2PADR
		KSSER	SSEC1,SSEC0,SENCAL
		MONEND	SKYEND
		NTMAN	GETBLK,EVLOG,EVSIG1
		ONCE	BOOTSZ,BOOTM2,SYTBFX,FILEDV,HIDONE,ONCE4,HITHRU
		ROUTER	RTRIFN
		S	STOPCD,BUG.,SKYORG
		SCLINK	SCTNS3,SCTA2N,GETBUC
		SCMUUO
		SYSINI	D36STR
		TOPS10	TEC
		TOPS20	MIC
		VMSER	MONTOP


[End of MCO 12519]
MCO: 12534		Name: JAD		Date: 24-Oct-85:13:33:08


[Symptom]
JMF loops doing SYSPHY UUOs on CI disks.

[Diagnosis]
"Detached", "Second", and "Alternate" ports are handled in
varying ways.  The inconsistancy causes problems when trying
to program around the inconsistancies.

[Cure]
Link "detached" and "alternate" ports onto a separate chain
(called SYSDET).  Teach SRUNA to look at this chain when a
search is made for a physical unit.  "Second" ports will not
appear in either the SYSUNI or SYSDET chains as happens now.

[Keywords]
UNI2ND
SYSUNI
UNIALT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	241	COMMOD	SYSDET
		FILFND	SRUNA
		FILIO	DETDS3,ATTUN2
		ONCMOD	ONCBN6


[End of MCO 12534]
MCO: 12541		Name: WXD		Date: 25-Oct-85:09:32:46


[Symptom]
NODE command lies about DECnet nodes when running as an endnode.
All nodes are listed as unreachable.

[Diagnosis]
Yes.  System doesn't know if the node is reachable or not,
but since it has no routing information it assumes the node is unreachable.

[Cure]
Yes.  If the system is running as an endnode type "may be reachable
via the designated router" instead of unreachable.

[Keywords]
DECnet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	241	COMNET	NODE.D


[End of MCO 12541]
MCO: 12542		Name: KBY		Date: 25-Oct-85:13:24:57


[Symptom]
Stopcode PDLOVF.

[Diagnosis]
Not enough stack.

[Cure]
Add stack (allow the UUO PDL to be extended by moving it
into funny space if it overflows).  The stack is given back when the UUO
completes or at GETMIN time.

[Keywords]
DECNET
IS
A
HOG
(AS ARE A LOT OF OTHER THINGS)

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	241	KLSER	DOPDL
		KSSER	DOPDL
		ERRCON	APRSCD
		UUOCON	USRXNT
		COMCON	GETMIN
		COMMON
		S	.USUSA


[End of MCO 12542]
MCO: 12564		Name: JAD		Date:  1-Nov-85:13:49:41


[Symptom]
Symbol table is truncated on large configurations, making debugging
or patching the monitor difficult.

[Diagnosis]
A symbol table which is larger than 128K just doesn't fit into an
already cramped low segment.

[Cure]
Move the symbol table to the beginning of section 2.  Load with
(E)DDT version 43 which understands extended symbol table pointers.

[Keywords]
PSECT
DEBUGGING
WOW

[Related MCOs]
12486, 12487, 12519

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
KL10 only
UUOSYM change

[BEWARE text]
Any customer programs which read the monitor .EXE file to
extract information from the symbol table must be changed to handle
the new extended symbol table format.  The format of the extended
symbol table is described in UUOSYM.MAC (see the symbol .SYCNT).
Any customer programs which use the SNUP package will need to be
re-linked with the new SNUP.REL which understands standard and
extended symbol tables.

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	COMMON	.ENMP,.ENMP1,ENTDDT
		ONCE	SYTBFX,FILEDV,HIDONE,ALCSHM
		S	XTNDED,SYMBOL,TABLE,FORMAT
		UUOSYM	XTNDED,SYMBOL,TABLE,FORMAT


[End of MCO 12564]
MCO: 12565		Name: CJA		Date:  1-Nov-85:15:15:26


[Symptom]
Sometimes, it appears that INITIA doesn't run
on freshly-connected LAT and NRT lines.

[Diagnosis]
INITIA really does run, but doesn't produce any output.
The reason is that the fresh LDB may sometimes have the "offline"
bit set.  The reason the bit is set is that GETLDB calls
LDBCLR, which calls a routine through the LDBISR dispatch table
to determine whether a line is "offline".  The problem is that
we still have the address of dispatch table from the previous owner
of the line.  If the previous owner was ANF, we end up asking if
the line is still connected to some ANF node.  ANF responds by
saying "It's not connected.  I got rid of that line many ticks
ago.", so we set the offline bit.  When SCNSER sees the offline bit
set, it doesn't bother doing output for the line in question.

[Cure]
When calling GETLDB to grab a fresh LDB, provide the address
of the new dispatch table as an argument.

[Keywords]
INITIA

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	SCNSER	GETLDB
		LATSER	GETTDB
		NRTSER	NGTLDB
		NETDEV	MCRGET
		NETSER	FRCNLD


[End of MCO 12565]
MCO: 12566		Name: JAD		Date:  1-Nov-85:15:38:15


[Symptom]
SNOOPY doesn't quite make it on an extended addressing machine.
When two monitor code sections overlap the PCs get ORed together
which leads to useless histograms.

[Diagnosis]
There isn't enough EVM available to lock as much of SNOOPY as
we'd like to produce finer resolution histograms.

[Cure]
Reserve monitor section 36 for SNOOPY's use.  On an extended
addressing KL, SNOOPY will stick a pointer to his section 36
(to be used for PC histogram accumulation) into the EPT of the
CPU on which it is running.  This will allow a resolution of
2**2 which should be enough for anyone, as well as allowing a
real histogram for a multiple section monitor.

[Keywords]
SNOOPY
NOW THAT'S SCARY

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	242	S	MS.SNP


[End of MCO 12566]
MCO: 12575		Name: JMF		Date:  7-Nov-85:08:01:07


[Symptom]
IPCF pages which must be paged out tend to wind up on the same unit
in the ASL even though all of the units in the ASL are in class 0.

[Diagnosis]
IPCF pages are always written to the "slow" swapping unit which
is meaningless if all of the units are in class 0.

[Cure]
Ignore PG.SLO when allocating space for page out if all of the units
in the ASL are in class 0.

[Keywords]
IPCF pages

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	243	SWPSER	SWPSPC


[End of MCO 12575]
MCO: 12579		Name: JMF		Date:  8-Nov-85:08:41:52


[Symptom]
Working sets are too big.

[Diagnosis]
Unless a program does a SETUUO to turn on virtual time traps,
PFH never gets called to do its thing with access allowed.

[Cure]
Setup for virtual timer traps every 60 tics on the first page fault
that occurs on invocation of a program.

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	243	VMSER	RMVPFH
		MONPFH	PFH


[End of MCO 12579]
MCO: 12581		Name: CJA		Date:  8-Nov-85:15:12:18


[Symptom]
DEX, LAT communication error, others possible when
a user does a .TODSF TRMOP. function to disconnect a LAT line
from the -10.

[Diagnosis]
Forgot to save J.

[Cure]
PUSH P,J ... POP P,J

[Keywords]
LAT
DEX
DISCONNECT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	243	LATSER	RELSB


[End of MCO 12581]
MCO: 12597		Name: CJA		Date: 13-Nov-85:09:00:36


[Symptom]
Output on slow LAT lines sometimes stalls when input
characters are typed.  "^O" sometimes doesn't show up when you
type it (although output is stopped).

[Diagnosis]
We were too eager to mark a line as "inactive"
even if it had more characters to output.

[Cure]
If a line has no transmit credits at the moment, don't
mark it as inactive.

[Keywords]
LAT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	LATSER	XSLDA2


[End of MCO 12597]
MCO: 12602		Name: JMF		Date: 14-Nov-85:04:56:10


[Symptom]
UIL starting non-boot CPU

[Diagnosis]
Cache gets turned on very early (before device initialization)
which sometimes causes the non-boot CPU to use stale data instead of data
stored away for it by the boot CPU.

[Cure]
Don't turn on the cache until the end of SPRINI.

[Keywords]
UIL
cache

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	243	COMMON	SPRIN1,SPRI10


[End of MCO 12602]
MCO: 12607		Name: DPM		Date: 15-Nov-85:07:54:08


[Symptom]
KNISER won't load it's microcode even if it's available.
It always runs KNILDR instead.

[Diagnosis]
Forgot to add code.

[Cure]
Rip off KLPSER's routine.  Thus the CTY will get the
load/fail timestamp, version number, etc.  DAEMON will
get notified too.  If the microcode isn't available,
then run KNILDR.  We expect this will remain the default
case cuz probably no one will want to waste 15 pages of
core on the KLNI microcode.

[Keywords]
KLNI

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	KNIPRM	.PBULB,MINUVR
		KNISER	KNILOD,KNIULB


[End of MCO 12607]
MCO: 12609		Name: DPM		Date: 15-Nov-85:08:04:36


[Symptom]
Can't find out where HALT stopcodes came from.

[Diagnosis]
The stopcode macro was changed from doing a HALT . to a
JRST DOHALT just for the pure enjoyment of kicking the
KLIPAs and KLNIs 'till they are dead.  By the time the
-10 finally halts, you don't know how you got there.

[Cure]
Change the JRST to an XPCW.  Once at DOHALT, BLT the ACS
to .CPCAC so we have something to look at in a crash.
Then kick the KLIPAs and KLNIs where it hurts the most.

[Keywords]
stopcode

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	S	STOPCD
		COMMON	DOHALT


[End of MCO 12609]
MCO: 12615		Name: KBY		Date: 18-Nov-85:08:07:44


[Symptom]
LPT on the KS doesn't work.

[Diagnosis]
The LPT is on the same PI channel as the KDP; the KDP wants
DECnet context, but the EVM the LPT uses isn't mapped there.

[Cure]
It has been decided that EVM will not appear in DECnet
context (leaves more map slots for DECnet to snarf up).  Therefore,
since SAVn for the KS always has to call one of DNMAP or RGMAP
to ensure consistent mapping at interrupt level (never know what
context we may have interrupted out of), give SAVn for the KS a
new set of entry points so that it can be decided at run time whether
to call DNMAP or RGMAP instead of always calling one or the other
for a given PI channel.  Entry points SAVn and SAVnR (new) will
set up normal context mapping, and SAVnD (new) will set up DECnet
mapping.  Fix the KDP and DMR interrupt routines to call SAVnD.

[Keywords]
KS
LPT
EVM
DECnet context

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	COMMON	KDPIVA,KDPIVB,DMRN,SAVN,INTTAB,ASGSV2


[End of MCO 12615]
MCO: 12616		Name: JAD		Date: 18-Nov-85:09:32:39


[Symptom]
Monitor runs with cache turned off after a reload if the patch at
SYSTRT to always run with cache turned on is removed.

[Diagnosis]
REBOOT turns off paging before getting to CP1CRS or RLDMON.  At
SYSTRT we expect a CONI PAG, to contain the cache strategy bits.
It does when we first ran KLI, but doesn't after REBOOT.

[Cure]
Add some co-operation between the monitor and BOOT to save
the cache strategy across reloads.  Teach BOOT to pass the cache
strategy to the monitor when we would have normally turned the
cache on so the monitor can run with cache on or off as appropriate.

[Keywords]
CACHE
BOOT

[Related MCOs]
12290

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	244	COMMON	.CPCLL,SYSTRT,SPRI10
		KLSER	PRHCF
		MONBTS	BTCAL1,BTSSCS,BTSRCS
		SYSINI	IOG5


[End of MCO 12616]
MCO: 12624		Name: JAD		Date: 19-Nov-85:13:50:20


[Symptom]
COMCON prints "??" when a user-defined command is typed after
getting an NZS program.  Might do the same thing when a command
is delayed for any reason.

[Diagnosis]
If the command gets delayed we make a second pass through
COMMAND.  In this pass SKIPS1 returns junk for the command name
due to a test on P2 versus PLNTXT.  The first time through the
command decoder P2 contains zero for the first call to CTEXT,
while the second time P2 contains PLNTXT since we set that up
the previous pass.  SKIPS1 sees this and takes the "no characters
left" return to CTEXT, who returns to COM1 with junk in T2.

[Cure]
Remove the test on P2 versus PLNTXT at SKIPS1.  This looks like
an early attempt to prevent user-defined commands from doing
a RESCAN past the command which invoked them (left over from
7.02 days).

[Keywords]
??
PLNTXT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	COMCON	SKIPS1


[End of MCO 12624]
MCO: 12628		Name: DRB		Date: 20-Nov-85:11:22:58


[Symptom]
RSX-20F dialup lines gete into a funny state.  Users must type a
Control-C to unfunny it, then no INITIA banner.

[Diagnosis]
For some unexplained reason, the LDB has the "waiting for a 20F
ACK" bit lit.  Not likely that we'll ever get acked if it wasn't previously
dialed into.

[Cure]
Zero the bit whenever we connect a new dialup line.

[Keywords]
Trotter/QAR attention
RSX20F
Dialup

[Related MCOs]
None

[Related QARs]
868206

[MCO status]
None

[MCO attributes]
KL10 only
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	TTDINT	TTDDW1

702A	


[End of MCO 12628]
MCO: 12630		Name: CJA		Date: 21-Nov-85:09:19:13


[Symptom]
Can't easily tell who's responsible when we do a LATNSC
info stopcode.

[Diagnosis]
Experience says that it's usually the LAT server
sending us a bad message which causes the LATNSC, but it's
not easy to find his ethernet address after the fact.

[Cure]
Record the sender's ethernet address in a visible location in
the monitor before we do the stopcode.  Also type it out with the
other stopcode info.

[Keywords]
LATNSC

[Related MCOs]
None

[Related QARs]
868477

[MCO status]
Checked

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	LATSER	INFSTP


[End of MCO 12630]
MCO: 12636		Name: RDH		Date: 23-Nov-85:15:32:10


[Symptom]

 .TODSF "Dataset Hang Up" TRMOP. causes a network terminal disconnect.

[Diagnosis]

Overzealous zealot?

[Cure]

Separate out "disconnect" and "hang up" functions.

New TRMOP. function .TODNT==41 for Disconnect Network Terminal.
New TRMOP. error TONET%==11 for Not a Network terminal (i.e., function
valid only for a network terminal).

[Keywords]
TODNT
TODSF
TRMOP
DISCONNECT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
UUOSYM change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	S
		SCNSER	TOPDSF,TOPDIN
		NETDEV	MCRDIS


[End of MCO 12636]
MCO: 12637		Name: KBY		Date: 24-Nov-85:15:31:37


[Symptom]
Problems with fragmented swapping:  IMEs and the potential
to miss swapping in parts of the job.

[Diagnosis]
If we decide the job is fragmented on the disk, but find out we
don't have enough low core blocks to continue a fragmented swap, we arrange
to swap in the first piece of the fragment as if it were the whole job, except
we light FRGSEG in JBTSWP to tell SWPIN3 to come back here when this piece
finishes.  Unfortunately, SWPIN3 not only checks FRGSEG in JBTSWP, but
also SL.FRG in SWPLST.  The latter check only works if we didn't
find a block to start with, rather than running out
after allocating the first block.  It turns out that this is only
a problem if we ran out or core processing section 0.

[Cure]
Instead of checking for SL.FRG in SWPLST, check for J containing
a low seg and SL.DIO being off (swap in of job as opposed to high seg).
High segs will stopcode before ever getting here anyway; if they're
ever fixed, a high seg will probably still never get here (and it's
not too hard to fix even if it does and will serve as a reminder that
other things have to be fixed here anyway if that is ever to work).

[Keywords]
disk addrs
fragment
out-of-core blocks

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	SWPSER	SWPIN3
		VMSER	BISLST


[End of MCO 12637]
MCO: 12638		Name: RDH		Date: 25-Nov-85:00:43:56


[Symptom]

Customer sites can't readily turn on ANF remote plotters without special
code and modifying distributed sources.

[Diagnosis]

Too many hooks were cemented-over.

[Cure]

Allow customers to turn on remote ANF plotters by MONGENing the symbol
M.RPLT=1.

Needless to say, this is not a supported configuration.

[Keywords]
PLOTTERS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	MONGEN
		COMNET
		NETDEV
		CHK11


[End of MCO 12638]
MCO: 12640		Name: JAD		Date: 25-Nov-85:10:18:29


[Symptom]
Users aren't allowed to log in when SCHED or KSYS prohibits it,
but the monitor forces them to stay around for 90 seconds until
the connect timer expires (or they get upset and hang up).

[Diagnosis]
KJOB/DISCONNECT doesn't work when a job isn't logged in.

[Cure]
Make it work.  The monitor "KJOB" command now always runs LOGOUT.
LOGOUT will process switches, etc., such as /DISCONNECT, allowing
a user to escape from our clutches.

[Keywords]
LOGOUT
KJOB/D

[Related MCOs]
None

[Related QARs]
868509

[MCO status]
Checked

[MCO attributes]
New development MCO
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	COMMON	NAMES
		COMCON	KJOB,KJOB2


[End of MCO 12640]
MCO: 12644		Name: RDH		Date: 25-Nov-85:20:26:00


[Symptom]

KS-10 line printers come up as "unspecified", confusing GALAXY.

[Diagnosis]

The unit type was never important before, and simply didn't get set.

[Cure]

Set the unit type along with the controller type and other "characteristics"
fields.

[Keywords]
DEVOP.
DEVHCW


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	LP2SER	LPTTYP


[End of MCO 12644]
MCO: 12645		Name: RDH		Date: 25-Nov-85:21:54:05


[Symptom]

MCRILS stopcodes when attempting a .NDTCN NODE. function (terminal connect)
to a local-host terminal. (Note: IMEs, other stopcodes also possible.)

[Diagnosis]

PUSHJ dispatch table of "EXP"s rather than "IFIW"s drops NETMCR into
section 0.

[Cure]

Make dispatch table use "IFIW" entries.

[Keywords]
MCRILS
IME
NDTCN

[Related MCOs]
None

[Related QARs]
868231

[MCO status]
None

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	NULFEK	CPY2


[End of MCO 12645]
MCO: 12650		Name: JAD		Date: 26-Nov-85:09:29:20


[Symptom]
Blue air when system runs slow because the cache was turned
off by KLI, a previous monitor incarnation, or an error on the
part of MONBTS.

[Diagnosis]
No warning if the cache has been disabled.

[Cure]
Add a warning message, to wit:

	%%<ding><ding> Cache is disabled< on CPUn>

which will be printed on the CTY if a CPU's cache is disabled.
At the moment this message comes out rather late during ONCE.
Next week I'll see if I can make it happen a lot earlier, like
before we ask for the date/time.

This MCO also adds a routine to SCNSER called CTYERM which may
be called to set up for output to the CTY during ONCE or normal
timesharing, since this is useful in more than just one place
in MONBTS now.

[Keywords]
CACHE
KLI

[Related MCOs]
12616, 12290

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	245	MONBTS	BTURPT
		SCNSER	CTYERM


[End of MCO 12650]
MCO: 12654		Name: JAD		Date:  2-Dec-85:08:23:42


[Symptom]
KS doesn't without disk unit zero existing.

[Diagnosis]
Actually it does, it's just timing out the hung "transfer".
It seems the RH11 returns "non-existant drive" for the FIRST position
operation if there is no unit zero.  MCO 11636 added code to clear the
RH11 in this case and ignore the interrupt.  Ignoring the interrupt
is probably not wise.

[Cure]
Pass an interrupt along to FILSER in this case.

[Keywords]
NXD
KS

[Related MCOs]
11636

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	246	RHXKON	NOATTN


[End of MCO 12654]
MCO: 12659		Name: DPM		Date:  5-Dec-85:07:46:21


[Symptom]
Stopcode FON, FOP, and possibly BACs.

[Diagnosis]
CTX. UUO argument checking not right wrt PCS.  Not saving PCS
around calls to SXPCS.

[Cure]
Sprinkle several calls to SSPCS throughout CTXSER.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	CTXSER	LOTS


[End of MCO 12659]
MCO: 12660		Name: DPM		Date:  5-Dec-85:08:02:36


[Symptom]
Stopcode WTP popping an autopushed context when a fatal error
has occured (i.e. ill mem ref, PC out of bounds, etc.) in
the inferior context.

[Diagnosis]
Calling MONRET without a UUO level stack.

[Cure]
Don't call MONRET.  Just type a CRLF, start the TTY in
user mode and jump into STOP1C.  Oh the pains we go
through to avoid printing a dot on an autopop.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	CLOCK1	HOLD1


[End of MCO 12660]
MCO: 12662		Name: DPM		Date:  5-Dec-85:08:33:09


[Symptom]
Too hard to look for lost context blocks.

[Diagnosis]
A block doesn't contain any info that makes it
easy to identify.

[Cure]
Stuff sixbit CTX in the left half of the .CTJCH word.  This
word is only there for debugging/tracing purposes and is never
used by anyone.  .CTJCH is word 1.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	CTXSER	CREBL5


[End of MCO 12662]
MCO: 12664		Name: KBY		Date:  5-Dec-85:15:24:33


[Symptom]
Swapper sort of hung; doing lots of transfers but going nowhere.
Potential for real swapper hung, too.

[Diagnosis]
If a job trying to LOCK physically contiguous in core
has its own high seg in the way of the low seg (which is the only
part being LOCKed), LOKCON will attempt to swap out all low segs
connected to said high seg so that it can eventually swap out
the high seg.  It will find that the job trying to LOCK is connected
to the high seg and swap it out, however, when the swap finishes, then
LOKCON will then notice that the job LOCKing in core is swapped out and
swap it right back in, so that the high seg in-core count never
goes to zero.  LOKCON ends up swapping the low seg out so it can
swap out the high seg, and then swapping it back in again before
it can decide to swap out the high seg,...
	The potential for the real hang is we can check
JS.SIP for a high seg, which doesn't exist.

[Cure]
Move the check for "job locking in core is not in core" until
after we've done all the mucking around with high segs and jobs to
see who needs to be moved around to accomodate the job locking
in core.  Since IMGIN, NFYPGS, etc. are always set even when the job
is out, we don't need it in core anyway until then.
	Don't check JS.SIP for high segs.

[Keywords]
LOCKing in core

[Related MCOs]
None

[Related QARs]
868535

[MCO status]
None

[MCO attributes]
QAR answer

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	LOKCON	LOCK1,LOCK13


[End of MCO 12664]
MCO: 12670		Name: DPM		Date: 10-Dec-85:07:02:58


[Symptom]
Lost free core.

[Diagnosis]
When some commands are executed by a not logged job which has no
core, allocated (always one) context block will be lost.  This
happens because the a user might have typed something like a DETACH
command.  Around PCRLF4, if an error occured in an unlogged in job,
we merely delete the job's TTY DDB, ignoring any thing that the PDB
may contain.  When the job slot is recycled, CREPDB finds and uses
the old PDB pointer, and zeros out the entire PDB, thus losing the
context block pointers.

[Cure]
Change command cleanup to call KILPDB.  Make KILPDB call a new entry
point in CTXSER (CTXKIL) which will arbitrarily delete any context
blocks that remain.  Note that in the normal case of a real job,
JOBKL would have called CTXLGO so all idle contexts would have been
auto-popped.

[Keywords]
CONTEXTS

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	COMCON	PCRLF1
		CTXSER	CTXKIL,CTXLGO,RELINK
		DATMAN	KILPDB


[End of MCO 12670]
MCO: 12673		Name: KBY		Date: 11-Dec-85:16:18:36


[Symptom]
Monitor isn't as efficient as it could be when memory fills
up with pages from the paging queue.

[Diagnosis]
If a job (say DTX) is paging madly, all of the pages go
onto the IN queue.  Eventually, there are no free pages, since they're
all either in the job's working set or on the IN queue.  The next time
any job asks for memory, it will be swapped because there aren't
enough allocatable pages on either the free list or the OUT queue.
At this point we also dump the IN queue anyway.  It would be more efficient,
particularly if the job asking for memory (say DTX) is large, if we
didn't bother to swap it out if we could make sufficient room
for it by dumping the IN queue.

[Cure]
Make a new routine, FRDCRW, which will set up to dump the IN
queue and wait until it's done if sufficient memory can be made
by doing this.  Call it in the appropriate places.  This puts
the job in PQ (Paging Queue I/O) wait.  When IP2OUT is called,
requeue all jobs in PQ to RN (PS, but that doesn't really
exist any more) so they can wake up and look for memory.
If enough room can't be found on the IN queues, then swap the job out.

[Keywords]
excessive swapping

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	SEGCON	FRDCR
		VMSER	CREMP1,PAGEB1,CHGPG4,CRSM12,GSMPG1
		S	CODES
		SCHED1	QREQ3,QSLPW
		COMMON	OSCAN


[End of MCO 12673]
MCO: 12677		Name: DPM		Date: 17-Dec-85:04:58:29


[Symptom]
If the KL HALTs or the bootstrap is not available, and BOOT
is started in auto-load mode, no dump is taken.

[Diagnosis]
Oversight.

[Cure]
Tell RSX-20F to force an automatic dump and load.  This is
exactly how TOPS-20 causes dumps and reloads to happen.  The
KS code to do the same already exists.

[Keywords]
BOOT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	COMMON	DOLOAD
		DTESER	LOAD10
		MONBTS	NOBOOT


[End of MCO 12677]
MCO: 12678		Name: DPM		Date: 17-Dec-85:07:19:38


[Symptom]
Stopcode BAC when restoring an context.

[Diagnosis]
User types control-C at an inopportune time.

[Cure]
Zero .JBINT and lite JACCT before calling JOB1.  .JBINT
and JBTSTS will be updated with the values from the context
to be restored as fast as KBY can swap us in.

[Keywords]
CONTEXT

[Related MCOs]
11102

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	CTXSER	SWPCTX,DELCTX,CTXPOP


[End of MCO 12678]
MCO: 12679		Name: DPM		Date: 17-Dec-85:07:32:12


[Symptom]
PASSWORD vs. SET PASSWORD commands again.  Documentation people
want the set command removed for the same reasons that have been
discussed several times over.

[Diagnosis]
Yes.

[Cure]
Remove it.

[Keywords]
PASSWORD

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	247	COMMON	NAMES,SNAMES


[End of MCO 12679]
MCO: 12688		Name: RCB		Date: 24-Dec-85:06:57:57


[Symptom]
FILDAE /EXIT messages are done incorrectly (or not at all) when alternate
contexts are in use.

[Diagnosis]
FILDAE and the monitor interfaces to it were never informed about CTXSER.

[Cure]
Do so.  Add two new FILDAE messages (PUSH and POP), and teach FILDAE to log
them much like it currently handles EXIT messages.

[Keywords]
FILDAE
CTXSER

[Related MCOs]
11102

[Related QARs]
868460

[MCO status]
Checked

[MCO attributes]
Beware file entry required
New development MCO
QAR answer
UUOSYM change

[BEWARE text]
Two new monitor messages to the File Daemon have been added.  They are
the Suspend (or Push) and Resume (or POP) messages.  FILDAE edit 44 or later
(or a local FILDAE with similarly updated dispatching code) is required under
7.03 monitors.

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	CTXSER	SWPCTX,CONTPC,CSRTAB,CSRST2
		COMCON	JOB1,SNDFXM,SNDFPM,SNDFRM
		S	.FDPSH,.FDPOP
		UUOSYM	.FLDPS,.FLDPR


[End of MCO 12688]
MCO: 12693		Name: RDH		Date: 29-Dec-85:23:41:04


[Symptom]

None observed (I mean, who in her right mind would be caught dead actually
doing this) but if anyone tries to do binary-mode input from an ANF CDR she
will at best get IO.DTEs (well, on the average, one buffer in 2^12 will
actually slip past the code and wend its way successfully into her input
buffer), and at worst get IMEs (if she is clever with her PAGE.s).

[Diagnosis]

A careful perusal of the code shows it is obviously wrong.

[Cure]

Nudge it a little closer to righteousness.

[Keywords]
None

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	NETDEV	C.BIN1


[End of MCO 12693]
MCO: 12694		Name: JAD		Date: 30-Dec-85:11:19:58


[Symptom]
Monitor won't run if BOOT isn't at the top of physical memory.

[Diagnosis]
Code to adjust SYSORG to reflect the presence of BOOT expects
BOOT to reside at the top of physical memory.  Consequently, when
ONCE adjusts SYSORG to exclude BOOT it may wind up with a value
which will allow the monitor to allocate pages containing BOOT to
be used for the monitor's (sky) high segment.

[Cure]
If BOOTPA (physical address of BOOT [location 20]) is correct,
stuff that into SYSORG.  This will ensure ONCMAP doesn't grab a
page which may contain the bootstrap.  The "unoccupied" pages at
the top of physical memory will be reclaimed by KIINI for users.

[Keywords]
BOOT
SYSORG
BOOTEM

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	250	ONCE	BOOTSZ


[End of MCO 12694]
MCO: 12702		Name: CJA		Date:  2-Jan-86:13:54:25


[Symptom]
SPEAR interpretation of software-detected disk errors is
not always right for massbus disk, and is completely meaningless for
CI disks.

[Diagnosis]
SPEAR uses heuristics to figure out what went wrong.  When
it sees any kind of disk error, it looks at some counters to see if
they changed since the last entry from the same disk.  It then attempts
to report what the real error was.  It is frequently wrong.
CI disks don't have useful information in the massbus registers anyway.

[Cure]
When FILIO detects a disk error, set a code in the DAEMON entry
to indicate what part of FILIO found the error.  These codes can
often be traced to a specific error like "RIB error" or "Unit offline".

[Keywords]
SPEAR
DAEMON
DISK ERRORS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO
Field service attention

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	251	FILIO	LOTS
		S


[End of MCO 12702]
MCO: 12719		Name: JAD		Date:  7-Jan-86:13:39:27


[Symptom]
Sometimes the BOOT CPU doesn't appear to notice a non-BOOT CPU
took a fatal stopcode during ONCE.

[Diagnosis]
The BOOT CPU is spending lots of time looping in CPUXCT.  It
doesn't bother to check the state of the outside world.

[Cure]
Add a SKIPE CRSHWD/PJRST REBOOT in CPUXCT.

[Keywords]
CPUXCT
STOPCDS DURING ONCE

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	ONCMOD	CPUXC1,CPUXC2


[End of MCO 12719]
MCO: 12728		Name: CJA		Date: 13-Jan-86:14:03:54


[Symptom]
LAT TTYs can connect even if the operator has done a
SET SCHED 10 (no remote TTYs)

[Diagnosis]
We're too easy.

[Cure]
If no remote TTYs are allowed, reject the attempted connection.

[Keywords]
LAT


[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	LATSER	HSSTR3


[End of MCO 12728]
MCO: 12730		Name: RDH		Date: 13-Jan-86:22:50:31


[Symptom]

Hard to add extra monitor free core to a system.

[Diagnosis]

No way.

[Cure]

Add a MONGEN'able symbol "EXTRAW" which is the amount of extra words of
general-purpose section-0 monitor free core to allocate (used by such as
ANF network service, ENQ/DEQ, IPCF, PSI, etc.).

[Keywords]

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	COMMON	MINCOR


[End of MCO 12730]
MCO: 12735		Name: DPM		Date: 15-Jan-86:01:30:28


[Symptom]
Under 702 and 703, LPTSPL claims CFE and KS10 printers don't
exist.  Under 702, LPTSPL also claims the same
for I/O bus printers.

[Diagnosis]
We never bothered to set up the printer class in the DDBs
because we knew nobody cared.

[Cure]
LPTSPL cares.

[Keywords]
PRINTER CLASS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	DLPSER	DLPREL
		LP2SER	LPTTYP

702A		DLPSER	DLPREL
		LP2SER	LPTTYP
		LPTSER	LPTTY1


[End of MCO 12735]
MCO: 12740		Name: DPM		Date: 16-Jan-86:03:45:44


[Symptom]
Control-C'ing out of an unpriv'ed program while logged out
runs LOGOUT.  If for some reason, LOGOUT decides not to run to
completion, it logs the job back in.  But it was never logged in
to begin with!

[Diagnosis]
KJOB runs LOGOUT when already logged out just to do 
two TRMOPs to disconnect a line.

[Cure]
Make things simple.  Have the KJOB command force the dataset
hangup and network disconnect if not logged in.  We'll even go so
far as to parse the /DISCONNECT switch too.

[Keywords]
KJOB
DISCONNECT
HANDUP

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	252	COMCON	KJOB
		COMMON	NAMES
		SCNSER	TOPDSF,TOPDNT


[End of MCO 12740]
MCO: 12758		Name: JAD		Date: 17-Jan-86:14:24:50


[Symptom]
System having a KLIPA on a non-BOOT CPU but no KLIPA on the BOOT
CPU doesn't always (read that usually) get CI disks mounted during
ONCE.

[Diagnosis]
When CPU1 initiates a connection to the disk server in the HSC-50
we may not have enough memory available for the connection.  If
this is the case the message won't be sent until more memory is
made available.  When the memory is made available SCASER pokes
KLPSER to send the message, but since we're running on the wrong
CPU we only set the "queued I/O" flag in the PCB for that CPU and
wait until his once/tick code comes along to send the message.
If you guessed that once/tick code doesn't execute when a CPU is
looping in its ACs waiting for the BOOT CPU to ask it to do some
I/O or etc., you're right!  Consequently we never do get around
to sending the message until the system really starts timesharing
and the disks don't get mounted.

[Cure]
Bypass limit checking during initialization but still flag we
need to create memory to prevent this hang.

[Keywords]
CI DISKS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	253	SCASER	SC.ABF,SC.ALD


[End of MCO 12758]
MCO: 12767		Name: WXD		Date: 24-Jan-86:13:57:29


[Symptom]

1)  DECnet/KS doesn't when user program is virtual (and we page fault).
2)  DECnet/KL too sensitive to load order (revisited).

[Diagnosis]

1)  Calls to GETWRD/PUTWRD/CHKBPT and a host of other routines call
    the routine in DECnet context.  If we page fault, the monitor
    tries to forge ahead in the wrong (DECnet) context.
2)  Code depends on a fair amount of monitor HIGH segment code to
    be accessible via indirect SKY segment map pointers.  If high
    segment moves, or user loads monitor HIGH segment in a funny
    order, then the routines can't be called (except via SNCALL).

[Cure]

Invent macro MCALL which takes three arguments.  First argument is
RG or DN (for regular or DECnet) which indiciates which context the
routine is to be called in (for FTXMON off).  Second argument is
the section number the routine is to be called in (for FTXMON on),
and third argument is address of routine to call.

Use this macro generously in place of SNCALL and RGCALL in DECnet.

Also, since DECnet uses STOPCD macro, move DIE and PERISH from ERRCON
to COMMON (also routine BGCTYP).  And since DECnet likes to run on
SMP, it is now a requirement that CPNSER be loaded after the DECnet
modules and before the remainder of TOPS10.REL so the SMP interlock
routines are available.

[Keywords]
DECnet

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
Beware file entry required
Documentation change

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	254	D36PAR
		D36COM
		SCMUUO
		NTMAN
		SCLINK
		ERRCON
		COMMON


[End of MCO 12767]
MCO: 12768		Name: JAD		Date: 27-Jan-86:10:31:32


[Symptom]
Some random location in the monitor low segment gets the value of 
PAGSIZ stuffed into it.

[Diagnosis]
Complex polish definition of WSBTBL in S.UNV causes MACRO confusion
when it is compiling VMSER.MAC.  When MACRO reads the universal file
and inserts it into the symbol table it screws up the definition of
PAGSIZ, causing the start of the fixup chain for PAGSIZ to point off
into the boonies.  Later, when the monitor is linked, LINK does just
what MACRO tells it to do and stuffs the value of PAGSIZ into the
location addressed by the bad fixup chain.

[Cure]
Polish in universal files is iffy, at best.  In fact, an answer to
a SPR complaining about such a problem was marked as a restriction
in MACRO.

By using some minor magic in the definition of WSBTBL we can change
the definition from full-word polish to right-half polish, which is
enough to keep MACRO from shooting himself in the foot.

[Keywords]
POLISH
MACRO
WSBTBL

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	255	S	WSBTBL


[End of MCO 12768]
MCO: 12775		Name: KBY		Date:  3-Feb-86:15:20:10


[Symptom]
Lost disk pages on virtual POP or job running LOGOUT virtual.

[Diagnosis]
No one ever returned the pages (day one VM bug).

[Cure]
Return disk pages.

[Keywords]
lost pages
POP
virtual

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
PCO required

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	VMSER	NXTNWS,JOBFNQ
		COMCON	JOB1


[End of MCO 12775]
MCO: 12777		Name: JAD		Date:  4-Feb-86:12:29:36


[Symptom]
KS loses characters on CTY during ONCE.

[Diagnosis]
SETZ T3,/EXCH T3,CTYIWD fails because the KS ucode doesn't
do read-pause-write memory access for the EXCH instruction.
The EXCH winds up being a "MOVE" from CTYIWD followed by a
"MOVEM" to CTYIWD, which leaves awindow in which the 8080
can sneak a character in, but we'llnever see it if he stores
in CTYIWD between the two halves of the EXCH instruction.

[Cure]
SKIPN/JRST/SETZM - the problem only appears in ONCE.
(Result of some code clean-ups in 7.03, I think.)

[Keywords]
KS CTY
ONCE
LOST CHARACTERS

[Related MCOs]
None

[Related SPRs]
868689

[MCO status]
Checked

[MCO attributes]
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	ONCE	XTYI1


[End of MCO 12777]
MCO: 12778		Name: JAD		Date:  5-Feb-86:09:59:12


[Symptom]
Answering "NO" to MONGEN's question about DECnet support on the
KS produces a monitor which won't run.

[Diagnosis]
The monitor gets stuck in a loop in SEILM because the DECnet
context map pointer contains a zero.  Switching the EBR to page
zero with no access bits really messes up the world.

[Cure]
If M.DECN=0 make the DECnet context map pointer match that of the
regular context map pointer.

[Keywords]
DECnet
KS doesn't

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KS10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	COMMON	.EPDMP


[End of MCO 12778]
MCO: 12784		Name: DPM		Date: 12-Feb-86:08:12:58


[Symptom]
     LPTSPL gets various errors trying to load  VFUs  on  RSX-20F/LP20
printers.

[Diagnosis]
     A bad byte pointer is used to store the printer class.  When this
happens,  the  printer  controller field gets overwritten with 0 which
indicates the controller type is unknown.

[Cure]
     Use the correct byte pointer.

[Keywords]
LP20 VFU

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
None

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	255	DLPSER	DLPREL


[End of MCO 12784]
MCO: 12794		Name: JAD		Date: 13-Feb-86:12:26:19


[Symptom]
System running out of free core.  "Missing" free core is
composed of lost context blocks.

[Diagnosis]
If a new job gets DLYCM'd we wind up calling CREPDB more
than once from NEWJOB.  The first time through CREPDB we'll
create a new PDB and a context block.  The second time we
notice we already have a PDB so we just zero the old PDB.
One lost context block.

[Cure]
Re-arrange CREPDB slightly and kill off context blocks when an
existing PDB is re-used.

[Keywords]
LOST FREE CORE
CONTEXTS

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
New development MCO

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	255	DATMAN	CREPDB


[End of MCO 12794]
MCO: 12799		Name: JAD		Date: 17-Feb-86:18:49:03


[Symptom]
First word of a block of 4-word core gets clobbered.

[Diagnosis]
KLPSER allocates a system error block to copy an "Out of band"
message from the HSC-50 into the error file.  KLPSER allocates
1+<length-of-packet> words, fills in the first word of the
block, then BLTs 1+<length-of-packet> words from the packet it
received from the HSC-50 into the system error block.  If our
requested error block was an exact multiple of 4 words long, a
garbage word will get written over the first word of the next
block.

[Cure]
Change the BLOT into a BLT.

[Keywords]
KLIPASHITONIT

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	255	KLPSER	INTERP


[End of MCO 12799]
MCO: 12806		Name: DPM		Date: 21-Feb-86:03:50:58


[Symptom]

     Tape subsystem hangs occur in SMP configurations, most often when
MDA controlled  tapes are being used.  When this happens, the user job
or PULSAR will often be  seen in  Event Wait for the tape  controller.
Occasionaly,  either  job  will  be  stuck in IO.  Sometimes this will
lead to a hung device condition.  Stopcodes KSW, USW, and erratic tape
subsystem behavior may also be experienced.

[Diagnosis]
     There are flaws in the queued I/O mechanism used to cause I/O  to
happen  on  a  CPU  other  than  the one on which the job is currently
running on.  This is evident by the fact that CPUTPQ (the  system-wide
count  of  queued I/O requests) will be incremented but sometimes does
not get  decremented  to  zero.   When  CPUTPQ  remains  positive,  it
indicates that some queued I/O request was not satisfied (no interrupt
call to TAPSCH) and a job has  been  left  in  some  I/O-related  wait
state.

     Additionally, bit IOSCP2 in AC S does not always get  initialized
correctly  for  the tape scheduler prior to determining whether or not
queued I/O will be done for the IORB in question.

[Cure]
     Do not count up the queued I/O request counts for the current CPU
if  no  IORB is present.  It's quite possible to get to PCLTAP without
an IORB.  Also clear IOSCP2 prior to calling the tape scheduler.  Note
that although this patch is generated against the 7.03 monitor, it may
be applied without any  changes  to  either  the  7.02  or  7.01/7.01A
monitors.

[Keywords]
TAPE HANG

[Related MCOs]
None

[Related SPRs]
34811, 34822, 34822, 34878, 35202, 35436, 35437

[MCO status]
None

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	TAPSER	PCLTAP,CKSIO2,TPINT1


[End of MCO 12806]
MCO: 12809		Name: JAD		Date: 24-Feb-86:08:56:02


[Symptom]
Trying to run a non-DECnet monitor in the minimum amount of
memory as specified in the SPD fails with a MNM stopcode
(monitor memory non-existant).

[Diagnosis]
MCO 12766 wasn't paranoia, it was a necessity.  Map slots
for unused sky high segment pages must be cleared otherwise
KIINI gets confused when one of those pages (which may be
occupied by BOOT or hidden symbols) is marked in NXMTAB but
also is used for the regular high segment.

[Cure]
Install MCO 12766 as one of the "required" edits for 7.03.

[Keywords]
SKY HIGH SEGMENT
UNUSED MAP SLOTS

[Related MCOs]
12766

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	ONCE	HIDONE,ONCE4,ONCE4B


[End of MCO 12809]
MCO: 12824		Name: JAD/DRB		Date:  4-Mar-86:15:36:47


[Symptom]
UFD corruption.  RENAME error 22 when logging out.  Data blocks  of  the
UFD  get overwritten with garbage entries which turn out to be a RIB for
some file not belonging to that user.

[Diagnosis]
Blocks are retained in the monitor I/O  cache  after  those  blocks  are
freed  up by calling GIVBLK.  RIBs for deleted files can be found in the
cache.  If a user logs in and LOGIN creates an UFD for  the  user  those
blocks  can be re-used for the UFD.  The usual case involves a RIB for a
temporary file which ACTDAE creates when the user  logs  in.   When  the
user  logs  out  ACTDAE  deletes the file, but the RIBs are still in the
monitor I/O cache.  If LOGOUT deleted the user's UFD the next  time  the
user logs in they may be allocated the blocks which previously contained
RIBs for ACTDAE's temporary file.  If a file is then created the monitor
will mistakenly believe the UFD data is contained in the cache, compress
the bogus UFD block(s), and add an entry for  the  file  being  created.
The user is rewarded with a handful of RIB errors.

[Cure]
Whenever GIVBLK is called call CSDELR to flush any blocks in  the  range
being returned from the monitor I/O cache.

[Keywords]
DISK CACHE
UFD CORRUPTION
A WEEK OFF FOR JAD

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
None

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	FILIO	GIVBLK
702A	


[End of MCO 12824]
MCO: 12828		Name: JAD		Date:  7-Mar-86:08:29:32


[Symptom]
Stopcode KAF running DFPTA (and maybe other KLIPA diags).

[Diagnosis]
KLPSER is clearing the bits to test for on interrupt when
the KLIPA is set into maintainance mode.  Unfortunately, a
tortuous path through the code has managed to stomp on P1
which is being used in the SETZM to clear the bits.

[Cure]
Reload P1 before the SETZM.

[Keywords]
KAF

[Related MCOs]
None

[Related SPRs]
None

[MCO status]
Checked

[MCO attributes]
KL10 only

[Validity]

Monitor	 Load	Module	 Tags
-------	------	------	------
703	256	KLPSER	DIAEMM


[End of MCO 12828]
 @N