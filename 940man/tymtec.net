:C: TYMNET (TECH. REF.)
                               TYMNET TECHNICAL REFERENCE
                               --------------------------

 *NODE DESCRIPTOR FORMAT
 *620 CELL LAYOUT
 *BUFFER LAYOUT
 *SUPERVISORY RECORDS
 *SPECIAL MESSAGE RECORDS
 *LOGIN SEQUENCE
 *CIRCUIT ZAPPER EFFECTS

*NODE DESCRIPTOR FORMAT

   EVERY NODE IN THE NET IS DESCRIBED BY A NODE DESCRIPTOR. THESE 
DESCRIPTORS FORM A MULTILINKED LIST STRUCTURE OCCUPYING SEVERAL
PAGES OF MEMORY OF WHICH ONLY ONE IS LABLED IN AT A TIME. PAGE 6
IS USED AS A WINDOW TO CONTAIN THE LABLED IN PAGE.
   BITS 0 THROUGH 5 OF THE FIRST CELL CONTAIN THE VERSION NUMBER
OF THE SOFTWARE IN THE NODE. BITS 6 THROUGH 17 ARE THE
NODE NUMBER. 18 THROUGH 20 ARE THE NUMBER OF PORT ARRAYS FOR THE NODE.
THIS NUMBER WILL NORMALLY BE 1. IF THERE ARE 2 940S ON A BASE
OR IF THERE ARE EXTRA SETS OF SPECIAL DEVICES ON A REMOTE
THIS NUMBER WILL BE MORE THAN 1. BITS 21 THROUGH 23 ARE THE DSWICH
SETTING WHICH IS USED TO ROUTE DOWNSTREAM MESSAGES.
   THE NEXT WORD(S) ARE POINTERS TO LINE DESCRIPTORS.
BITS 3 THROUGH 11 ARE THE DISPLACEMENT WHICH MUST BE ADDED TO THE
ADDRESS OF THE FIRST CELL TO FIND THE ADDRESS OF THE FIRST CELL
OF THE LINE DESCRIPTOR. BITS 12 THROUGH 23 ARE THE NUMBER OF THE
NODE AT THE OTHER END OF THE 201 LINE. THERE IS ONE
OF THESE CELLS (AND ONE LINE DESCRIPTOR) FOR EACH 201 LINE. 
IN BASES, THERE IS ONE EXTRA CELL AND LINE DESCRIPTOR FOR
INTERNAL CONNECTIONS. THE "NODE NUMBER" FOR THIS "LINE" IS ZERO.
NO REAL NODE HAS THE NUMBER ZERO. THE NEXT CELL HAS A 1 IN THE SIGN BIT,
A ZERO NODE NUMBER, AND A DISPLACEMENT POINTING TO THE FIRST CELL
BEYOND THE END OF THE NODE DESCRIPTOR.
   THE NEXT 2 CELLS ARE A BIT MAP FOR BUFFER PAIRS USED FOR PASSING
CIRCUITS THROUGH THE NODE. THEY ARE NUMBERED FROM RIGHT TO LEFT.
A 1 BIT MEANS THE BUFFER PAIR IS IDLE, 0 MEANS IT IS ASSIGNED.
   THE NEXT 2 CELLS ARE A BIT MAP FOR BUFFER PAIRS USED FOR
PORTS. IF THERE ARE MORE THAN ONE SET OF PORTS ON THE
NODE, THERE WILL BE MORE PAIRS OF CELLS USED FOR BIT MAPS.
   THE REST OF THE NODE DESCRIPTOR CONSISTS OF LINE DESCRIPTORS, ONE
FOR EACH 201 LINE. BIT 0 OF THE FIRST WORD IS 1 IF THE LINE
IS DOWN. BITS 1-4 ARE THE SIZE OF THE PERMUTER TABLE DIVIDED BY
16. BITS 5-7 ARE THE LINE NUMBER ON THE OTHER NODE. IF THIS
201 LINE IS THE THIRD LINE ON THE OTHER NODE, BITS 5-7 WILL
CONTAIN A 2. BITS 8-12 ARE THE RELABELING BYTE MINUS 40 OF THE PAGE
CONTAINING THE DESCRIPTOR OF THE NODE AT THE OTHER END OF THE LINE.
BITS 13-23 ARE THE INDEX INTO PAGE 6 OF THE OTHER NODE.
   THE NEXT 2 CELLS ARE NUMBERED FROM RIGHT TO LEFT AND ARE THE
UPSTREAM DIRECTION BITS. IF BIT 4, FOR INSTANCE, IS A 1, THAT MEANS
THAT THIS 201 LINE GOES TOWARD HOST NUMBER 4 AND IS TO BE USED
WHEN BUILDING A CIRCUIT TO HOST 4.
   THE REMAINING CELLS ARE ENTRIES IN THE PERMUTER TABLE PACKED
2 PER WORD. THE RIGHTMOST 12 BITS OF THE FIRST CELL ARE FOR
ENTRY NUMBER 2. THE SUPERVISOR DOES NOT NORMALLY MANIPULATE
ENTRY NUMBER 0 AND 1. IF THE 12 BIT BYTE IS ALL ONES, THE CORRESPONDING
CHANNEL IS NOT IN USE AND MAY BE ASSIGNED. WHEN THE CHANNEL IS
IN USE, THE HIGH ORDER BIT IS 1 FOR HIGH SPEED CHANNELS (AUXILLIARY
CIRCUITS AND LINE PRINTERS) AND 0 FOR LOW SPEED CHANNELS (ALL NORMAL
CIRCUITS). THE NEXT 10 BITS DESIGNATE THE BUFFER PAIR WITHIN THE NODE
AND THE LOW ORDER BIT SPECIFIES THE PARTICULAR BUFFER INTO WHICH
CHARACTERS ARE PLACED WHICH COME IN ON THIS CHANNEL (NOTE THAT
INPUT INTO  A HOST MACHINE IS FROM AN EVEN NUMBERED BUFFER AND
OUTPUT TO A TERMINAL IS FROM AN ODD NUMBERED BUFFER).
   BASES HAVE AN EXTRA "LINE DESCRIPTOR" AFTER THE OTHER LINE
DESCRIPTORS FOR MAKING CIRCUITS INTERNAL TO THE BASE. THE
FIRST 3 CELLS ARE CURRENTLY UNASSIGNED. THE REMAINING 8 CELLS
HAVE 16 PERMUTER TABLE ENTRIES WHICH ARE ALWAYS USED IN PAIRS.

*620 CELL LAYOUT

   SEVERAL CELLS IN EACH NODE ARE ASSIGNED ABSOLUTE LOCATIONS.
CELLS 100 THROUGH 104 IN ALL NODES ARE NODE NUMBER, SOFTWARE VERSION
NUMBER, DEBUGGER LOCK, DSWICH, AND CRASH COUNT. THE DEBUGGER
LOCK MUST BE NEGATIVE IF THE SUPERVISOR IS TO WRITE INTO ANY CELL
OTHER THAN 102 THROUGH 201. DSWICH IS USED TO ROUTE DOWNSTREAM 
SUPERVISOR RECORDS. IN REMOTES, ARRAYS OF CELLS FOR 201 LINE STATUS,
NODE NUMBER OF MACHINES AT OTHER END OF 201 LINES, PERMUTER TABLE
ADDRESSES, PERMUTER TABLE SIZES, NUMBER OF GROUPS OF 16 IN
PERMUTER TABLES, INDICES INTO 201 LINE ARRAYS, OUTPUT BEGINING
OF RECORD MARKERS, AND INPUT BEGINING OF RECORD MARKERS BEGIN AT
LOCATIONS 105,110,113,116,121,124,127, AND 132. THE
CORRESPONDING LOCATIONS IN THE BASE ARE 106+2N,113+2N,120+2N,126+2N
134+2N,141+2N,146+2N, AND 153+2N, WHERE N IS THE NUMBER OF HOST
MACHINES, HENCE NUMBER OF SETS OF PORTS, ON THAT BASE. CELL 105
CONTAINS NUMBER OF HOST MACHINES AND NUMBER OF 201 LINES. CELLS
106 AND 107 CONTAIN THE NUMBER OF THE FIRST HOST AND ITS UPDOWN
STATUS. CELLS 110 AND 111 ARE FOR THE NEXT HOST, IF ANY.

*BUFFER LAYOUT

   BUFFERS IN NODES ARE ALWAYS ASSIGNED IN PAIRS. THERE ARE NO 
EXCEPTIONS.  IN A BASE THEY ARE ASSIGNED AS FOLLOWS:
THE FIRST 140 OCTAL BUFFERS ARE USED FOR 940 PORTS. EVEN NUMBERED
BUFFERS ARE FOR INPUT INTO THE 940, ODD NUMBERED ARE FOR OUTPUT.
BUFFER NUMBERS 140 TO 151 ARE FOR SUPERVISORY CHANNELS. EVEN NUMBERED
BUFFERS ARE FOR OUTPUT ON THE 201 LINES. 152 THROUGH 163 ARE FOR
FLOW CONTROL. THEY CONTROL THE RATE AT WHICH CHARACTERS MOVE
THROUGH CIRCUITS. 164 THROUGH 311 ARE SPARES USED FOR MAKING
INTERNAL CONNECTIONS AND FOR CIRCUITS PASSING THROUGH THE NODE.
IF THE BASE HAS A SECOND 940 ON IT, THE SECOND 940 WILL USE
BUFFERS 312 THROUGH 451.
   IN REMOTES, BUFFERS 0 THROUGH 77 ARE FOR LOCAL PORTS. ODD NUMBERED
BUFFERS OUTPUT TO THE PORTS. 100 THROUGH 105 ARE SUPERVISORY
BUFFERS, 106 THROUGH 113 ARE FLOW CONTROL BUFFERS, AND 144 THROUGH
253 ARE SPARES. IF THE REMOTE HAS SPECIAL DEVICES REQUIRING MORE
BUFFERS, THEY WILL BE ASSIGNED NUMBERS BEGINNING WITH 254.

*SUPERVISORY RECORDS

   THE SUPERVISOR COMMUNICATES WITH THE LEPRECHAUNS IN RECORDS
48 BITS LONG. IN THE 940, THEY ARE NORMALLY BROKEN UP INTO 3 WORDS
CALLED SR1, SR2, AND SR3 OR STORED INTO THE 3 WORDS OF A BUFFERLET
IN THE LCOM (COMMANDS TO LEPRECHAUNS) LIST. THE INPUT DISPATCHER
GETS INPUT RECORDS FROM THE BASE AND BRANCHES TO 1 OF 8 ROUTINES
TO HANDLE THE VARIOUS RECORD TYPES. ANY ROUTINE WISHING TO
SEND COMMANDS TO A NODE PLACES THESE COMMANDS ON THE LCOM LIST. 
OUTPUTING THESE RECORDS TO THE BASE AND ROUTING THEM THROUGH THE
NET IS DONE BY THE OTROUT ROUTINE. 
   BITS 0 THORUGH 8 OF THE FIRST WORD AND BITS 0 THROUGH 7
OF THE OTHER 2 WORDS ARE ALWAYS ZERO ON INPUT. BIT 0 OF THE
FIRST WORD IS A 1 ON OUTPUT IF AND ONLY IF THE SUPERVISOR
IS ABOUT TO DO A BRS 138 TO BUILD AN AUXILLIARY CIRCUIT INTO
ITSELF. BITS 1 THROUGH 8 OF THE FIRST WORD AND BITS 0 THROUGH 7
OF THE OTHER 2 WORDS ARE NOT USED ON OUTPUT AND MAY BE ANYTHING.
BITS 9 THROUGH 11 ARE THE RECORD TYPE AND BITS 12 THROUGH 23 OF
THE FIRST WORD ARE THE NODE NUMBER FOR ALL RECORDS.

   INPUT RECORD TYPES

   TYPE 0 IS A TAKEOVER RESPONSE. IF SR2 CONTAINS A 555B2, THE
LOW ORDER BITS OF SR2 HAVE THE NUMBER OF THE SUPERVISOR THAT SENT
THE TAKEOVER COMMAND. OTHERWISE, BITS 15 THROUGH 17 OF SR2 ARE
THE NUMBER OF PORT ARRAYS OF THE NODE AND BITS 18 THROUGH 23 ARE
THE NUMBER OF 201 LINES. SR3 CONTAINS THE SOFTWARE VERSION NUMBER.
   TYPE 1 IS A CHARACTER FROM A BUFFER. SR2 IS THE BUFFER NUMBER
AND BITS 16 THROUGH 23 OF SR3 ARE THE RAW ASCII CHARACTER EXACTLY
AS IT WAS RECIEVED FROM THE TERMINAL. THIS RECORD TYPE IS USED
FOR LOGGING IN ONLY.
   TYPE 2 IS A BAD RECORD RETURN. WHEN A LEPRECHAUN GETS A RECORD
THAT IT DOES NOT UNDERSTAND, IT COPIES THE FIRST 16 BIT WORD TO
THE THIRD WORD AND SENDS IT BACK AS A TYPE 2. THIS TYPE IS OF 
SIGNIFICANCE ONLY TO SOMEONE DEBUGGING THE NET.
   TYPE 3 HAS 2 USES. IF BIT 8 OF SR2 IS A 0, SR2 IS THE ADDRESS
OF A CELL AND SR3 IS THE CONTENTS OF THAT CELL. OTHERWISE, THIS
IS A SPECIAL MESSAGE RECORD DESCRIBED IN THE NEXT SECTION.
   TYPE 4 IS CURRENTLY UNASSIGNED.
   TYPE 5 IS THE OUTPUT FROM A HOST MACHINE AS DESCRIBED IN @T.
BITS 9-15 IN SR2 ARE THE NUMBER OF THE HOST ON THE BASE (NORMALLY 0
UNLESS THERE IS MORE THAN 1 HOST ON THE BASE). BITS 16-23 ARE THE
PORT NUMBER. BITS 8-15 OF SR3 ARE THE OUTPUT TYPE AND BITS
16-23 ARE THE CONTENTS OF THE CHARACTER POSITION OF THE OUTPUT
ENTITY.
   TYPES 6 AND 7 ARE UNASSIGNED.

   OUTPUT RECORD TYPES

   TYPE 0 IS A TAKEOVER COMMAND. WORD 2 IS 555B2 PLUS THE
SUPERVISOR NUMBER.
   TYPE 1 IS A CHARACTER PAIR. WORD 2 IS THE BUFFER NUMBER INTO
WHICH TO PLACE THE CHARACTERS AND WORD 3 IS THE CHARACTER PAIR.
THE LEFT CHARACTER IS THE FIRST ONE. THESE 8 BIT CHARACTERS
ARE INJECTED DIRECTLY INTO THE CHARACTER STREAM OF A CIRCUIT AND
MUST THEREFORE FOLLOW TYMNET CONVENTIONS. TO AVOID PUTTING
OUT THE SPECIAL CONTROL CHARACTERS 0 THROUGH 7 WHEN
PUTTING OUT ASCII TEXT, IT IS A GOOD PRECAUTION TO MRG IN
200B TO ALL CHARACTERS.
   TYPE 2 IS A COMMAND TO CHANGE A PERMUTER TABLE ENTRY.
BITS 10 THROUGH 13 SPECIFY THE NUMBER OF THE PERMUTER TABLE
AND BITS 14 THROUGH 23 OF THE SECOND WORD SPECIFY THE NUMBER OF
THE ENTRY IN THAT TABLE. THE THIRD WORD
IS THE NEW ENTRY. NOTE THAT THE 620 IS A 16 BIT MACHINE SO A 12 BIT
BYTE IN A NODE DESCRIPTOR PERMUTER TABLE CORRESPONDS TO A 16 BIT
BYTE IN A 620 PERMUTER TABLE. THE RIGHT MOST 11 BITS ARE THE SAME.
THE LEFTMOST BIT IS ALSO THE SAME. THE EXTRA 4 BITS IN THE 620 ARE
ZERO EXCEPT IN THE SPECIAL CASE OF A NULL ENTRY, IN WHICH CASE
ALL 16 BITS ARE ONES.
   TYPE 3 IS A CHANGE CELL COMMAND IF BIT 8 OF THE SECOND WORD IS
A 0. OTHERWISE IT IS A SPECIAL MESSAGE RECORD DESCRIBED IN THE
NEXT SECTION. A CHANGE CELL COMMAND HAS THE ADDRESS OF THE CELL
TO BE CHANGED IN THE SECOND WORD AND THE NEW CONTENTS IN THE THIRD
WORD. THE SUPERVISOR CAN WRITE INTO CELLS 102 THROUGH 201
ANY TIME, BUT MUST SET CELL 102 TO A NEGATIVE NUMBER BEFORE IT CAN
WRITE INTO ANY OTHER CELL.
   TYPE 4 IS A REQUEST FOR THE CONTENTS OF 2 CELLS. WORDS 2 AND 3
ARE THE ADDRESSES OF THE 2 CELLS.
   TYPE 5 IS FOR SPECIAL INPUT INTO A HOST. BITS 9-15 OF WORD 2
ARE THE NUMBER OF THE HOST ON THE BASE (WILL BE 0 UNLESS THERE
ARE 2 HOSTS ON ONE BASE) AND BITS 16-23 OF WORD 2 ARE THE PORT NUMBER.
BITS 8-15 OF WORD 3 ARE THE INPUT TYPE NUMBER AS DOCUMENTED IN
@T AND BITS 16-23 ARE THE CHARACTER POSITION OF THE INPUT COMMAND.
BIT 8 OF WORD 2 IS A 1 IF THE NEXT SEVERAL CHARACTERS ARE TO BE
SENT TO THE SUPERVISOR.
   TYPES 6 AND 7 ARE UNASSIGNED.

*SPECIAL MESSAGE RECORDS

   TYPE 3 RECORDS WITH BIT 8 OF THE SECOND WORD EQUAL TO 1 ARE
USED FOR SPECIAL MESSAGES. BITS 18-23 OF THE SECOND WORD SPECIFY
THE SPECIAL MESSAGE SUBTYPE. THEY WILL BE DESCRIBED BELOW BY
SUBTYPE NUMBER.
  
   INPUT

0: CIRCUIT ZAPPER STARTED. SR3 IS THE BUFFER NUMBER INTO WHICH
THE CIRCUIT ZAPPER WAS RELEASED.
1: PERMUTER TABLE ENTRY MADE. SR3 IS THE ENTRY THAT WAS MADE (THE
NEW CONTENTS OF THE PERMUTER TABLE CELL).
2: 940 UPDOWN. SR3 CONTAINS THE 940 NUMBER. BIT 8 OF SR3 IS 1 IF
THE 940 JUST WENT DOWN AND 0 IF THE 940 JUST CAME UP.
3: BUFFER ZAPPED. THE 620 RAN OUT OF BUFFER SPACE AND CLEARED ITS
LARGEST BUFFER TO MAKE MORE ROOM. SR3 IS THE BUFFER NUMBER.
4: LINE RESET. SR3 IS THE NUMBER OF THE LINE THAT JUST RESET.
5: NO DATA. SR3 IS THE NUMBER OF THE 201 LINE THAT RECIEVED NO
PHYSICAL RECORDS FOR 16 SECONDS.
6: LINE ERRORS. SR3 IS THE NUMBER OF THE 201 LINE THAT RECIEVED
MANY CHECKSUM ERRORS IN THE LAST 256 SECONDS. "MANY" IS USUALLY
DEFINED TO MEAN MORE THAN 40 DECIMAL. BITS 8 THROUGH 17 OF SR3
ARE THE NUMBER OF ERRORS.
7: 940 UNHAPPY. SR3 IS A NONZERO 16 BIT PATTERN READ OUT OF A HOST
INDICATING SOMETHING WRONG WITH THE HOST. THE MEANING OF THESE
BITS WILL VARY FROM HOST TO HOST AND MONITOR TO MONITOR.

   OUTPUT

0: OUTPUT MESSAGE TO PORT(TO REMOTES ONLY). BITS 21-23
OF THE THIRD WORD SPECIFY WHICH OF 7 MESSAGES STORED IN
THE REMOTE TO OUTPUT ON A PORT. A 0 MEANS NO MESSAGE.
A TENTATIVE LIST OF MESSAGES IS
0) NO MESSAGE
1) PLEASE LOG IN:
2) ERROR, TYPE USER NAME:
3) ERROR, TYPE PASSWORD:
4) USER NAME:
5) PASSWORD:
6) PROJECT CODE:
7) UNASSIGNED
   BIT 8 OF THE THIRD WORD WILL BE 1 IF THE INPUT BUFFER IS
TO BE CLEARED, BIT 9 WILL BE 1 IF THE ECHO IS TO BE ON, 0 IF
IT IS TO BE OFF. ALL OF THESE MESSAGES WILL REENABLE LOGGIN MODE.
THAT IS, THEY WILL ALLOW CHARACTERS FROM THE TERMINAL TO GO TO
THE SUPERVISOR.
   BITS 13-20 OF THE THIRD WORD ARE THE PORT NUMBER.
0: GET TIME(BASES ONLY). SENT BY SUPERVISORY TO (USUALLY) ITS OWN
BASE TO FIND OUT WHAT TIME IT IS.
1: TURN SPEAKER ON( BASES ONLY). SOUND THE SPEAKER TO GET THE 
ATTENTION OF AN OPERATOR.
2: GOING TO SLEEP(BASES ONLY). USED TO WARN THE BASE THAT PAGE
0 OF THE SUPERVISOR IS ABOUT TO BE RELEASED SO THAT THE BASE
WILL STOP WRITING INTO THAT ABSOLUTE LOCATION OF CORE.

*LOGIN SEQUENCE

   THIS IS A DESCRIPTION OF A TYPICAL LOGIN SEQUENCE TO ILLUSTRATE
SOME OF THE MACHINARY INVOLVED. A USER NAMED FRED CALLS A TELEPHONE
ROTARY ATTACHED TO A REMOTE. WHEN THE REMOTE DETECTS BOTH CARRIER
PRESENCE AND DATA SET READY ON THE DATA SET, IT SENDS A MESSAGE
AT 110 BAUD TO ASK FRED TO IDENTIFY HIS TERMINAL. FRED TYPES A
CHARACTER AND THE REMOTE SETS UP THE APPROPRIATE TERMINAL
PARAMETERS AND SENDS THE CHARACTER TO THE SUPERVISOR. IT ALSO
SENDS FRED A PLEASE LOG IN MESSAGE. WHEN THE SUPERVISOR GETS THE
CHARACTER IT SCANS THE LOGIN LIST TO SEE IF ANYONE IS CURRENTLY
LOGGING IN  ON THAT PORT OF THAT 620. WHEN IT FINDS NO ENTRY, IT
DEDUCES THAT THIS IS A NEW PERSON. IT MAKES AN ENTRY ON THE LOGIN
LIST AND A TIMEOUT ENTRY ON THE TIMEOUT LIST. IT SAVES IN
THE ENTRY ON THE LOGIN LIST THE NODE NUMBER AND PORT NUMBER ON
WHICH THIS LOGIN IS OCCURING. IT ALSO PUTS IN THAT ENTRY A POINTER
TO AN AUXILLIARY LIST TO CONTAIN OTHER INFORMATION PERTINANT TO
THIS PARTICULAR LOGIN. THE TOTAL INFORMATION STORED BY THE
SUPERVISOR AT THIS TIME IS THE NODE NUMBER, BUFFER NUMBER IN THE NODE,
TERMINAL IDENTIFYING CHARACTER, AND TIMEOUT ITEM NUMBER.
   FRED NOW TYPES HIS USER NAME. AS HE TYPES, EACH CHARACTER IS
SENT TO THE SUPERVISOR IN TYPE 1 RECORDS. IF HE TYPES A
CONTROL H WHEN HIS ECHO IS ON (DURING EITHER USER NAME OR PROJECT
CODE) THE REMOTE CONSIDERS HIM TO BE HALF DUPLEX. WHEN HE
TYPES A SEMICOLON, HIS ECHO IS TURNED OFF. WHEN HE TYPES A CARRIAGE
RETURN, HIS ECHO IS TURNED OFF AND HE DROPS OUT OF LOGIN MODE.
THAT IS, CHARACTERS STOP GOING IN TO THE SUPERVISOR. IF HE
SHOULD TYPE A CARRIAGE RETURN AFTER HIS USER NAME INSTEAD OF
A SEMICOLON, THE SUPERVISOR WILL TELL THE REMOTE TO SEND THE
"PASSWORD" MESSAGE AND PUT FRED BACK INTO LOGIN MODE WITH HIS
ECHO OFF. AFTER FRED HAS TYPED IN ALL THE CHARACTERS
NEEDED FOR A LOGIN, ANY OTHER CHARACTERS HE TYPES WILL BE
HELD IN THE REMOTE'S INPUT BUFFER UNTIL A CIRCUIT IS BUILT.
THE LOGGER ROUTINE IN THE SUPERVISOR HASHES THE USER NAME TO FIND
THE VIRTUAL MUD FILE ADDRESS AND MAKES A REQUEST FOR THAT DATA BLOCK.
WHEN THAT DATA BLOCK HAS BEEN BROUGHT IN FROM THE DISK, THE
CIPHER OF THE PASSWORD IS CHECKED AND, IF FRED HAS NOT SPECIFIED A
HOST MACHINE NUMBER, HIS NORMAL HOST NUMBER IS FOUND. THE
AFTER CHECKING TO FIND IF THAT HOST IS UP AND FINDING WHICH
BASE SERVICES THAT HOST, THE CIRCUIT BUILDER GOES THROUGH THE
NODE DESCRIPTORS TO FIND A PATH FOR THAT CIRCUIT, ADDING
APPROPRIATE PERMUTER CHANGING COMMANDS TO THE LCOM LIST AS IT
DOES SO. IT DOES NOT ISSUE A COMMAND TO CHANGE THE ENTRY IN THE
REMOTE YET. WHEN ALL THE RESPONSES HAVE BEEN RECIEVED FOR THE PERMUTER
TABLE CHANGES, IT SENDS THE COMMAND TO CHANGE THE PERMUTER TABLE
IN THE REMOTE. WHEN THE RESPONSE FOR THIS CHANGE HAS BEEN
RECIEVED, THE LOGGER SENDS A COMMAND TO THE BASE TO START A NEW
JOB FOR THE APPROPRIATE PORT. BEFORE SENDING THE COMMAND TO CHANGE
THE PERMUTER TABLE IN THE REMOTE, THE LOGGER HAS PLACED INTO THE
BUFFER WHICH INPUTS INTO THE 940 ON THAT PORT THE TERMINAL IDENTIFYING
CHARACTER FOLLOWED BY 2 CHARACTERS SPECIFYING THE NODE AND PORT
OF THE REMOTE FOLLOWED BY THE USER NAME. THESE CHARACTERS ARE THEREFORE
GUARRENTEED TO GET INTO THE 940 BEFORE ANY OTHER CHARACTERS FROM
THE USERS TERMINAL. THE EXEC READS THESE CHARACTERS, INITIALIZES
THE TERMINAL CHARACTERISTICS INTERNAL TO THE 940, STORES THE
NODE AND PORT NUMBER FOR ACCOUNTING, AND HASHES THE USER NAME TO
FIND ITS VIRTUAL LUD ADDRESS. THIS COMPLETES THE LOGIN AS FAR AS
THE SUPERVISOR IS CONCERNED.

*CIRCUIT ZAPPER EFFECTS

   THE CIRCUIT ZAPPER IS ONE OF THE SPECIAL CONTROL CHARACTERS(3)
WITH SPECIAL MEANING TO TYMNET MACHINARY. ITS EFFECT IS TO CLEAR
ALL THE BUFFERS ALONG A CIRCUIT AND SET ALL PERMUTER TABLE ENTRIES
TO -1 (THE NULL ENTRY). IT COMPLETELY DESTROYS THE CIRCUIT. ITS ACTION
IS INDEPENDENT OF THE SUPERVISOR IN ALL CASES AND THEREFORE DOES
NOT NEED THE SUPERVISOR TO DO ITS JOB. IT IS RELEASED BY A REMOTE
WHEN THE USER HANGS UP HIS PHONE. IT IS RELEASED BY A HOST WHEN
AN AUXILLIARY CIRCIUT IS CANCELED, OR ON A NORMAL CIRCUIT
WHEN A USER LOGS OUT OR WHEN AN OPERATOR HANGS SOMEONE.
IT IS RELEASED BY A BASE WHEN A HOST GOES DOWN. IT IS RELEASED
BY ANY NODE WHEN A 201 LINE GOES OUT.
   EXCEPT FOR THE CASES OF A LINE GOING OUT OR A HOST GOING DOWN,
THE SUPERVISOR WILL BE SPECIFICLY INFORMED OF THE RELEASE OF A
CIRCUIT ZAPPER. WHEN A ZAPPER REACHES A HOST ON A NORMAL CIRCUIT,
THAT JOB IS LOGGED OUT. THAT PORT WILL NOT BE USED AGAIN UNTIL THE
HOST OUTPUTS A ZAPPER ON THAT PORT. THUS THE SUPERVISOR MUST REMEMBER
THAT THE PORT IS "IN USE" EVEN THOUGH NO CIRCUIT IS ATTACHED TO IT
   WHEN A ZAPPER REACHES A REMOTE, THE PLEASE LOG IN MESSAGE IS SENT,
THE TERMINAL IDENTIFYING CHARACTER IS SENT TO THE SUPERVISOR, AND
THE TERMINAL IS PLACED IN LOGIN MODE. IF THE USER SHOULD HANG UP
AT THIS TIME, THE "CIRCUIT ZAPPER" WILL BE SENT TO THE SUPERVISOR.
TO ENABLE THE LOGGER TO DISTINGUISH A CIRCUIT ZAPPER (3) FROM A
CONTROL C, ALL ASCII CHARACTERS WILL HAVE A 200 MERGED INTO THEM.
THUS, ASCII CHARACTERS WILL HAVE A NUMERICAL RANGE OF 200-377.
THE SUPERVISOR DOES NOT DISTINGUISH BETWEEN A NEW LOGIN STARTING
THIS WAY AND A LOGIN INITIATED BY A PERSON CALLING IN.
   NOTE THAT ONE IMPLICATION OF THE ABOVE IS THAT WE WILL NOT INITIALLY
TRY TO REROUT CIRCUITS WHEN A 201 LINE GOES OUT. WHEN A LIES
OUT, THE USER DROPS BACK TO LOGGIN MODE AND LOGS IN AGAIN. THIS
IS MUCH SIMPLER THAN TRYING TO SALVAGE A DAMAGED CIRCUIT.
  GWm