PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1
PAM.MAC	26-AUG-82 14:25	

     1				TITLE PAM
     2
     3				;REQUIRES WC OP SY ST JL AC WF LICENSE FOR ALL HIGH SEGMENTS
     4
     5	000137			LOC 137
     6	000137	000000	000014	14	;VERSION - IF DEBUG SW ON, DON'T LOG USER OUT 6/20/79
     7	000000'			RELOC
     8
     9			000001	DEBUGS=1	;DEBUGS = 0 IF NO DEBUGGING, =1 IF DEBUG VERSION
    10
    11				PRINTX
    12				PRINTX DEBUG SWITCH IS
    13				IFN DEBUGS, <PRINTX ON>
    14				IFE DEBUGS, <PRINTX OFF>
    15
    16				EXTERN PAMJOB, .JBHRL
    17
    18				INTERN SYSTAB, NCHARS, ERROR, SAVAC
    19				INTERN BL1LST, BLOCK1, BL2LST, BLOCK2
    20				INTERN THISYS
    21				INTERN SYSLST, SYSBLK
    22
    23				;AC'S
    24			000000	F=0
    25			000001	A=1
    26			000002	B=2
    27			000003	C=3
    28			000004	D=4
    29			000006	BP=6
    30			000010	NOW=10
    31			000012	THISJB=12
    32			000010	HGHJOB=^D8
    33			000014	INDEX=14
    34			000016	CH=16
    35			000017	P=17
    36
    37				;CHANNELS
    38			000017	ERRCH==17
    39
    40				;UUO'S
    41			000022	TIMER==22
    42			000024	GETPPN==24
    43			000030	PJOB==30
    44
    45			002640	MAXTIM==^D1440
    46			000012	TEN==^D10
    47			000012	MAXJOB==TEN
    48
    49				;INDEX FOR JOBBLK
    50			000000	JOBCTL==0		;CONTROL WORD (SHOULD BE OCT 525252000101)
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-2
PAM.MAC	26-AUG-82 14:25	

    51			000001	JOBSNO==1		;THIS SYSTEM NUMBER
    52			000002	JOBSWD==2		;JOB CONTROL WORD
    53						;BITS 1 - 10 ON IF THAT JOB IS TO BE RUN
    54			000003	JOBINT==3		;TIME INTERVAL IN MINUTES FOR EACH JOB (WORDS 3 - 12)
    55			000015	JOBSYS==^D13	;SYSTEM NUMBER IN RIGHT HALF OF WORD, BITS IN LEFT HALF
    56						;TERMINATED BY -1
    57						;BIT 0 = CUD SYSTEM
    58						;    1 = MUD SYSTEM
    59						;    2-4 = MUD NUMBER
    60						;    5 = ACTG. SYSTEM
    61						;    6 = LICENSE PASSWORD SYSTEM
    62						;    7 = IMS SYSTEM
    63						;    8 = PDP-10 SYSTEM
    64
    65
    66			002640	ADAY==^D1440	;MINUTES IN A DAY
    67
    68
    69				;RETURNS IN RIGHT HALF OF B FOR ERROR  ROUTINE
    70			000001	GOBAK==1	;JUST OUTPUT ERROR AND RETURN
    71			000000	NXTJ==0		;SKIP TO NEXT PJ JOB
    72		777777	777777	NORET==-1	;FATAL ERROR - LOGOUT
    73
    74				DEFINE SETUPF (TAG,NAME,EXT,PPN)
    75				   <INTERN TAG'FIL, TAG'LST, TAG'BLK
    76				TAG'FIL:	SIXBIT /NAME/
    77					SIXBIT /EXT/
    78					0
    79					PPN
    80					BLOCK 32
    81				TAG'LST:	IOWD 200,TAG'BLK
    82					0
    83				TAG'BLK:	BLOCK 200
    84				>
    85
    86				;ERROR MACRO - ARGUMENTS ARE:
    87				;	ERROR CODE
    88				;	JOB NUMBER
    89				;	SYSTEM NUMBER
    90				;	RETURN CODE
    91				DEFINE MAKERR (ERRN,JN,SN,RET)
    92				<XLIST
    93					SKIPA
    94					JRST .+6
    95					HRLZI A,ERRN
    96					HRRI A,JN
    97					HRLZI B,SN
    98					HRRI B,RET
    99					PUSHJ P,ERROR
   100				LIST>
   101
   102	000000'	047000	000000	START:	RESET			;INITIALIZE
   103	000001'	400040	000000		SETZ 1,
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-3
PAM.MAC	26-AUG-82 14:25	

   104	000002'	200000	002367'		MOVE F,[XWD 1,2]
   105	000003'	251000	000017		BLT F,17
   106	000004'	200740	002370'		MOVE P,[IOWD 20,PDL]
   107	000005'	400000	000000		SETZ F,
   108	000006'	254000	000037'	IFN DEBUGS, <JRST PJOK>
   109	000007'	047040	000024		CALLI A,GETPPN		;GET THIS PPN
   110	000010'	255000	000000		 JFCL
   111	000011'	312040	000407'		CAME A,PJPPN		;IF NOT PJ, LOGOUT
   112	000012'	254000	000360'		JRST AWAY
   113	000013'	047500	000030		CALLI THISJB,PJOB	;GET THIS JOB NO.
   114	000014'	200400	002371'		MOVE HGHJOB,[XWD 20,12]
   115	000015'	047400	000041		GETTAB HGHJOB,		;GET HIGHEST JOB NO.
   116	000016'			BADGTB:	MAKERR 1,0,0,NORET^XLIST
   117	000025'	514100	000010	NXTJOB:	HRLZ B,HGHJOB		;SEE IF PJ ALLREADY LOGGED IN
   118	000026'	541100	000002		HRRI B,2
   119	000027'	047100	000041		GETTAB B,		;GET PPN FOR THIS JOB
   120	000030'	254000	000016'		 JRST BADGTB
   121	000031'	312100	000407'		CAME B,PJPPN		;IS PPN = PJ?
   122	000032'	254000	000035'		JRST .+3		;NO, LOOK AT NEXT JOB
   123	000033'	312400	000012		CAME HGHJOB,THISJB	;YES, SEE IF IT IS THIS JOB
   124	000034'	254000	000360'		 JRST AWAY		;NO - ANOTHER JOB RUNNING - LOGOUT
   125	000035'	367400	000025'		SOJG HGHJOB,NXTJOB	;CHECK ALL JOBS
   126	000036'	400040	000000		SETZ A,			;ALLOW WRITING IN HIGH SEGMENT
   127	000037'	041040	000017	PJOK:	INIT 1,17
   128	000040'	446353	000000		SIXBIT /DSK/
   129	000041'	000000	000000		0
   130					 MAKERR 2,0,0,NORET^XLIST
   131	000051'	076040	000443'		LOOKUP 1,JOBFIL		;GET JOB CONTROL FILE
   132					 MAKERR 3,0,0,NORET^XLIST
   133	000061'	066040	000450'		INPUT 1,JOBLST
   134	000062'	063040	760000		STATZ 1,760000
   135	000063'			BADJOB:	 MAKERR 4,0,0,NORET^XLIST
   136	000072'	200040	000452'		MOVE A,JOBBLK+JOBCTL	;BE SURE WE HAVE THE CORRECT FILE
   137
   138	000073'	312040	002372'		CAME A,[525252000101]
   139	000074'	254000	000063'		 JRST BADJOB	;THE CONTROL FILE IS BAD...
   140	000075'	200040	000453'		MOVE A,JOBBLK+JOBSNO		;SAVE THIS SYSTEM NUMBER
   141	000076'	202040	000412'		MOVEM A,THISYS
   142	000077'	505040	000455'		HRLI A,JOBBLK+JOBINT
   143	000100'	541040	000653'		HRRI A,INTTAB+1
   144	000101'	251040	000664'		BLT  A,INTTAB+MAXJOB	;SET UP INTERVAL TABBLE
   145	000102'	400600	000000		SETZ INDEX,
   146	000103'	200054	000467'		MOVE A,JOBBLK+JOBSYS(INDEX)
   147	000104'	316040	000410'		CAMN A,MONE
   148	000105'	254000	000110'		JRST .+3
   149	000106'	202041	000665'		MOVEM A,SYSTAB(A)	;MAKE SYSTAB TABLE
   150	000107'	344600	000103'		AOJA INDEX,.-4
   151	000110'	070040	000000		CLOSE 1,	;CLOSE JOBS FILE
   152	000111'	071040	000000		RELEASE 1,	;RELEASE CHANNEL
   153	000112'	260740	000164'		PUSHJ P,GETIME	;GET CURRENT TIME
   154	000113'	201600	000012		MOVEI INDEX,MAXJOB
   155	000114'	336054	000652'		SKIPN A,INTTAB(INDEX)
   156	000115'	254000	000121'		JRST .+4
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-4
PAM.MAC	26-AUG-82 14:25	

   157	000116'	270040	000010		ADD A,NOW
   158	000117'	301040	002640		CAIL A,ADAY	;IS IT AFTER MIDNIGHT?
   159	000120'	275040	002640		SUBI A,ADAY	;IF SO, MAKE IT THE NEXT DAY
   160	000121'	202054	001176'		MOVEM A,EXETAB(INDEX)	;SET UP EXECUTION TIME TABLE
   161	000122'	367600	000114'		SOJG INDEX,.-6
   162	000123'	515040	635062		HRLZI A,(SIXBIT/SHR/)
   163	000124'	202040	000444'		MOVEM A,JOBFIL+1
   164	000125'	476000	000411'		SETOM NCHARS
   165	000126'	400040	000000		SETZ A,
   166	000127'	254000	000132'	IFN DEBUGS, <JRST LOOP>
   167	000130'	047040	777772		ATTACH A,	;DETACH JOB
   168	000131'	255000	000000		JFCL
   169	000132'	260740	000167'	LOOP:	PUSHJ P,SLEEPR	;SLEEP IF NECESSARY
   170	000133'	211600	000012		MOVNI INDEX,MAXJOB
   171	000134'	517600	000014		HRLZS INDEX,INDEX
   172	000135'	200300	000365'		MOVE BP,JOBPTR
   173	000136'	253600	000137'		AOBJN INDEX,.+1
   174	000137'	134040	000006	CONT:	ILDB A,BP		;POINTER TO NEXT JOB
   175	000140'	322040	000162'		JUMPE A,LPEND		;IF ZERO, NO JOB TO RUN
   176	000141'	254000	000145'	IFN DEBUGS, <JRST CONT1>
   177	000142'	260740	000164'		PUSHJ P,GETIME
   178	000143'	315414	001176'		CAMGE NOW,EXETAB(INDEX)	;TIME TO RUN THIS JOB?
   179	000144'	254000	000162'		JRST LPEND		;NO
   180	000145'	260740	000236'	CONT1:	PUSHJ P,SETJOB		;YES, SET IT UP
   181	000146'	202000	000414'		MOVEM 0,SAVAC		;SAVE AC'S
   182	000147'	200000	002373'		MOVE 0,[XWD 1,SAVAC+1]
   183	000150'	251000	000433'		BLT 0,SAVAC+17
   184	000151'	260740	000000*	STOP:	PUSHJ P,PAMJOB		;GO DO THE JOB
   185	000152'	200700	002374'	NXT:	MOVE 16,[XWD SAVAC,0]		;RESTORE AC'S
   186	000153'	251700	000016		BLT 16,16
   187	000154'	200740	002375'		MOVE P,[XWD 20,PDL]
   188	000155'	260740	000164'		PUSHJ P,GETIME		;INCREMENT EXECUTION TABLE
   189	000156'	270414	000652'		ADD NOW,INTTAB(INDEX)
   190	000157'	301400	002640		CAIL NOW,ADAY	;IS IT AFTER MIDNIGHT?
   191	000160'	275400	002640		SUBI NOW,ADAY	;IF SO, MAKE IT THE NEXT DAY
   192	000161'	202414	001176'		MOVEM NOW,EXETAB(INDEX)
   193	000162'	253600	000137'	LPEND:	AOBJN INDEX,CONT
   194	000163'	254000	000132'		JRST LOOP
   195
   196	000164'	047400	000022	GETIME:	CALLI NOW,TIMER
   197	000165'	231400	007020		IDIVI NOW,^D3600	;GET TIME IN MINUTES
   198	000166'	263740	000000		POPJ P,0
   199
   200				;ROUTIE TO HIBERNATE FOR THE SHORTEST TIME NECESASARY
   201	000167'	550040	000000*	SLEEPR:	HRRZ A,.JBHRL		;DO WE HAVE A HIGH SEGMENT TO ZERO?
   202	000170'	263740	000000	IFN DEBUGS, <POPJ P,0>
   203	000171'	322040	000203'		JUMPE A,SLPA		;IF NOT, DO NOT TRY TO ZERO IT!
   204	000172'	515040	000001		HRLZI A,1
   205	000173'	047040	000011		CORE A,			;ZERO HIGH SEGMENT, KEEP LOW SEGMENT
   206					MAKERR 16,0,0,GOBAK^XLIST
   207	000203'	260740	000164'	SLPA:	PUSHJ P,GETIME
   208	000204'	200100	000010		MOVE B,NOW
   209	000205'	201040	002640		MOVEI A,MAXTIM	;MINUTES IN A DAY
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-5
PAM.MAC	26-AUG-82 14:25	

   210	000206'	201600	000001		MOVEI  INDEX,1
   211	000207'	200300	000365'		MOVE BP,JOBPTR
   212	000210'	134700	000006	NXTSLP:	ILDB CH,BP
   213	000211'	322700	000220'		JUMPE CH,SLP1
   214	000212'	200154	001176'		MOVE C,EXETAB(INDEX)
   215	000213'	274140	000010		SUB C,NOW
   216	000214'	327140	000216'		JUMPG C,.+2
   217	000215'	271140	002640		ADDI C,ADAY
   218	000216'	315140	000001		CAMGE C,A
   219	000217'	200040	000003		MOVE A,C
   220	000220'	340600	000000	SLP1:	AOJ INDEX,
   221	000221'	307600	000012		CAIG INDEX,TEN
   222	000222'	254000	000210'		JRST NXTSLP
   223	000223'	221040	000074		IMULI A,^D60	;GET TIME IN SECONDS
   224	000224'	505040	000001		HRLI A,1	;SPECIFY TIME IS IN SECONDS
   225	000225'	047040	000072		HIBER A,
   226					MAKERR 17,0,0,NORET^XLIST
   227	000235'	263740	000000		POPJ P,0
   228
   229				;ROUTINE TO SET UP NEW HIGH SEGMENT
   230	000236'	550040	000014	SETJOB:	HRRZ A,INDEX		;GET JOB NUMBER
   231	000237'	231040	000010		IDIVI A,^D8		;MAKE IT SIXBIT
   232	000240'	240040	000006		ASH A,6
   233	000241'	270040	000002		ADD A,B
   234	000242'	271040	202020		ADDI A,202020	;ASCIZ "000"
   235	000243'	542040	000443'		HRRM A,JOBFIL
   236	000244'	201040	000442'		MOVEI A,SEGBLK
   237	000245'	402000	000445'		SETZM SEGBLK+3
   238	000246'	402000	000446'		SETZM SEGBLK+4
   239	000247'	402000	000447'		SETZM SEGBLK+5
   240	000250'	550100	000014		HRRZ B,INDEX
   241	000251'	047040	000040		GETSEG A,		;TRY TO GET IT
   242					 MAKERR 5,@B,0,NORET^XLIST
   243	000261'	263740	000000		POPJ P,0
   244
   245				;ERRORS IN PAM
   246				;1	UUO FAILED
   247				;2	INIT FAILURE
   248				;3	LOOKUP ON JOBS.DAT FAILED
   249				;4	JOBS.DAT BAD
   250				;5	GETSEG FAILUED
   251				;6	CIRCUIT ZAP
   252				;7	TIMEOUT ON CIRCUIT
   253				;10	LOOKUPP OR ENTER  FAILURE
   254				;11	INPUT OR OUTPUT ERROR
   255				;12	CHECKSUM ERROR
   256				;13	SYSTEM NOT NOTIFIED
   257				;14	PASSWORD CHANGE CONTROL FILE BAD
   258				;15	RENAME ERROR
   259				;16	CANNOT ZERO HIGH SEGMENT
   260				;17	HIBER UUO FAILED
   261				;20	ERROR IN COPYING FILE
   262				;21	LTCURT.DAT BAD
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-6
PAM.MAC	26-AUG-82 14:25	

   263				;22	GETTAB FAILED
   264				;23	FILE BUSY
   265				;24	NO UFD
   266				;25	ERROR IN SPOOLING ACCTG. UPDATE
   267
   268				; A/ ERROR CODE, JOB NUMBER
   269				; B/ SYSTEM, RETURN
   270				;	RETURN =1 TO RETURN; =0 TO CONTINUE IN PAM; =-1 TO EXIT & LOGOUT
   271	000262'	041740	000017	ERROR:	INIT ERRCH,17
   272	000263'	446353	000000		SIXBIT /DSK/
   273	000264'	000000	000000		0
   274	000265'	254000	000360'		JRST AWAY
   275	000266'	402000	000413'		SETZM ERRFLG
   276	000267'	076740	001211'		LOOKUP ERRCH,ERRFIL
   277					PUSHJ P,[AOS ERRFLG	;FLAG FOR NEW ERROR FILE
   278						SETZ C,
   279						AOS (P)
   280	000270'	260740	002376'			POPJ P,0]
   281	000271'	574140	001214'		HLRE C,ERRFIL+3
   282	000272'	200200	000407'		MOVE D,PJPPN
   283	000273'	202200	001214'		MOVEM D,ERRFIL+3
   284	000274'	077740	001211'		ENTER ERRCH,ERRFIL
   285	000275'	254000	000360'		JRST AWAY
   286	000276'	332000	000413'		SKIPE ERRFLG
   287					JRST [SETZ C,
   288	000277'	254000	002402'			JRST NEWERR]
   289	000300'	213000	000003		MOVNS C	;NO OF WORDS IN FILE
   290	000301'	322140	000307'		JUMPE C,.+6
   291	000302'	231140	000200		IDIVI C,^D128
   292	000303'	074760	000003		USETI ERRCH,@C
   293	000304'	066740	001247'		INPUT ERRCH,ERRLST
   294	000305'	063740	760000		STATZ ERRCH,760000
   295	000306'	254000	000360'		JRST AWAY
   296	000307'	400200	000000		SETZ D,
   297	000310'	336004	001251'		SKIPN ,ERRBLK(D)
   298	000311'	254000	000314'		JRST .+3
   299	000312'	271200	000003		ADDI  D,3
   300	000313'	254000	000310'		JRST .-3
   301	000314'	305200	000200		CAIGE D,^D128
   302	000315'	254000	000323'		JRST .+6
   303	000316'	402000	001251'	NEWERR:	SETZM ERRBLK	;READY FOR A NEW BLOCK
   304	000317'	200200	002404'		MOVE D,[XWD ERRBLK,ERRBLK+1]
   305	000320'	251200	001450'		BLT D,ERRBLK+177
   306	000321'	400200	000000		SETZ D,
   307	000322'	340140	000000		AOJ C,
   308	000323'	202044	001251'		MOVEM A,ERRBLK(D)
   309	000324'	554040	000002		HLRZ A,B
   310	000325'	200060	000001		MOVE A,@A
   311	000326'	546104	001252'		HLRM B,ERRBLK+1(D)
   312	000327'	261740	000002		PUSH P,B
   313	000330'	047100	000014		DATE B,
   314	000331'	202104	001253'		MOVEM B,ERRBLK+2(D)
   315	000332'	047100	000023		MSTIME B,	;TIME IN MS
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-7
PAM.MAC	26-AUG-82 14:25	

   316	000333'	261740	000003		PUSH P,C
   317	000334'	231100	165140		IDIVI B,^D60000	;GET MINUTES
   318	000335'	262740	000003		POP P,C
   319	000336'	506104	001253'		HRLM B,ERRBLK+2(D)
   320	000337'	322140	000341'		JUMPE C,.+2
   321	000340'	075760	000003		USETO ERRCH,@C
   322	000341'	067740	001247'		OUTPUT ERRCH,ERRLST
   323	000342'	063740	760000		STATZ ERRCH,760000
   324	000343'	254000	000360'		JRST AWAY
   325	000344'	070740	000000		CLOSE ERRCH,
   326	000345'	071740	000000		RELEASE ERRCH,
   327	000346'	262740	000002		POP P,B
   328	000347'	573000	000002		HRRES B
   329	000350'	333000	000002		SKIPLE B
   330	000351'	263740	000000		POPJ P,0	;RETURN TO WHERE ERROR WAS CALLED FROM
   331	000352'	205040	340000		MOVSI A,340000		;DISABLE INTERRUPTS
   332	000353'	047040	777744		INTENB A,
   333	000354'	255000	000000		 JFCL
   334	000355'	474040	000000		SETO A,
   335	000356'	047040	777733		ZAPCIR A,
   336	000357'	322100	000152'		JUMPE B,NXT		;GO DO NEXT PJ JOB
   337	000360'	515040	000001	AWAY:	HRLZI A,1
   338	000361'	047000	000012	IFN DEBUGS, <EXIT>
   339	000362'	541040	000434'		HRRI A,AWYBLK
   340	000363'	047040	000035		RUN 1,
   341	000364'	047000	000012		EXIT
   342
   343	000365'	440100	000454'	JOBPTR:	POINT 1,JOBBLK+JOBSWD
   344	000366'			PDL:	BLOCK 21
   345	000407'	000006	000214	PJPPN:	6000214
   346	000410'	777777	777777	MONE: -1
   347	000411'	000000	000000	NCHARS:	0
   348	000412'	000000	000000	THISYS:	0
   349	000413'	000000	000000	ERRFLG:	0	;FLAG FOR NEW ERROR FILE.
   350	000414'			SAVAC:	BLOCK 20
   351	000434'	637163	000000	AWYBLK:	SIXBIT /SYS/
   352	000435'	545747	576564		SIXBIT /LOGOUT/
   353	000436'	000000	000000		0
   354	000437'	000000	000000		0
   355	000440'	000001	000004		1,,4
   356	000441'	000000	000000		0
   357	000442'	446353	000000	SEGBLK:	SIXBIT /DSK/
   358	000443'	525742	630000	JOBFIL:	SIXBIT /JOBS/
   359	000444'	444164	000000		SIXBIT /DAT/
   360	000445'	000000	000000		0
   361	000446'	000006	000214		XWD 6,214
   362	000447'	000000	000000		0
   363	000450'	777600	000451'	JOBLST:	IOWD 200,JOBBLK
   364	000451'	000000	000000		0
   365	000452'			JOBBLK:	BLOCK 200
   366	000652'	000000	000000	INTTAB:	0		;INTERVAL TABLE FOR JOBS
   367	000653'				BLOCK TEN
   368	000665'	000000	000000	SYSTAB:	0		;SYSTEMS
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-8
PAM.MAC	26-AUG-82 14:25	

   369	000666'				BLOCK 2*TEN*TEN
   370	001176'	000000	000000	EXETAB:	0		;EXECUTION TIME TABLE
   371	001177'				BLOCK TEN
   372					SETUPF ERR,PAM,ERR,6000214^INTERN ERRFIL, ERRLST, ERRBLK
   373	001211'	604155	000000	ERRFIL:	SIXBIT /PAM/
   374	001212'	456262	000000		SIXBIT /ERR/
   375	001213'	000000	000000		0
   376	001214'	000006	000214		6000214
   377	001247'	777600	001250'	ERRLST:	IOWD 200,ERRBLK
   378	001250'	000000	000000		0
   379	001451'	777600	001452'	SYSLST:	IOWD 200,SYSBLK
   380	001452'	000000	000000		0
   381	001453'			SYSBLK:	BLOCK ^D200	;SYSBLK MUST BE AT LEAST 160. WORDS
   382	001763'	777600	001764'	BL1LST:	IOWD 200,BLOCK1
   383	001764'	000000	000000		0
   384	001765'			BLOCK1:	BLOCK 200
   385	002165'	777600	002166'	BL2LST:	IOWD 200,BLOCK2
   386	002166'	000000	000000		0
   387	002167'			BLOCK2:	BLOCK 200
   388			000000'		END START
   389
NO ERRORS DETECTED
PROGRAM BREAK IS 002405
3K CORE USED
PAM	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 2
PAM.MAC	26-AUG-82 14:25		SYMBOL TABLE

A		000001		MONE		000410'		
ADAY		002640	SPD	MSTIME	047000	000023		
ATTACH	047000	777772		NCHARS		000411'	INT	
AWAY		000360'		NEWERR		000316'		
AWYBLK		000434'		NORET	777777	777777	SPD	
B		000002		NOW		000010		
BADGTB		000016'		NXT		000152'		
BADJOB		000063'		NXTJ		000000	SPD	
BL1LST		001763'	INT	NXTJOB		000025'		
BL2LST		002165'	INT	NXTSLP		000210'		
BLOCK1		001765'	INT	P		000017		
BLOCK2		002167'	INT	PAMJOB		000151'	EXT	
BP		000006		PDL		000366'		
C		000003		PJOB		000030	SPD	
CH		000016		PJOK		000037'		
CONT		000137'		PJPPN		000407'		
CONT1		000145'		RESET	047000	000000		
CORE	047000	000011		RUN	047000	000035		
D		000004		SAVAC		000414'	INT	
DATE	047000	000014		SEGBLK		000442'		
DEBUGS		000001		SETJOB		000236'		
ERRBLK		001251'	INT	SLEEPR		000167'		
ERRCH		000017	SPD	SLP1		000220'		
ERRFIL		001211'	INT	SLPA		000203'		
ERRFLG		000413'		START		000000'		
ERRLST		001247'	INT	STOP		000151'		
ERROR		000262'	INT	SYSBLK		001453'	INT	
EXETAB		001176'		SYSLST		001451'	INT	
EXIT	047000	000012		SYSTAB		000665'	INT	
0000		TEN		000012	SPD	
GETIME		000164'		THISJB		000012		
GETPPN		000024	SPD	THISYS		000412'	INT	
GETSEG	047000	000040		TIMER		000022	SPD	
GETTAB	047000	000041		ZAPCIR	047000	777733		
GOBAK		000001	SPD	.JBHRL		000167'	EXT	
HGHJOB		000010		
HIBER	047000	000072		
INDEX		000014		
INTENB	047000	777744		
INTTAB		000652'		
JOBBLK		000452'		
JOBCTL		000000	SPD	
JOBFIL		000443'		
JOBINT		000003	SPD	
JOBLST		000450'		
JOBPTR		000365'		
JOBSNO		000001	SPD	
JOBSWD		000002	SPD	
JOBSYS		000015	SPD	
LOOP		000132'		
LPEND		000162'		
MAXJOB		000012	SPD	

PAM	MACRO 12.5-46.0 17:51 13-NOV-86
PAM.MAC	26-AUG-82 14:25		Symbol cross reference

A	    25#	   109	   111	   117	   126	   131	   133	   136	   138	   140	   141	   142	   143	   144
	   146	   147	   149	   155	   157	   158	   159	   160	   162	   163	   165	   167	   174	   175
	   201	   203	   204	   205	   207	   209	   218	   219	   223	   224	   225	   227	   230	   231
	   232	   233	   234	   235	   236	   241	   243	   308	   309	   310	   331	   332	   334	   335
	   337	   339
ADAY	    66#	   158	   159	   190	   191	   217
AWAY	   112	   124	   274	   285	   295	   324	   337#
AWYBLK	   339	   351#
B	    26#	   117	   118	   119	   121	   131	   133	   136	   207	   208	   227	   233	   240	   243
	   309	   311	   312	   313	   314	   315	   317	   319	   327	   328	   329	   336
BADGTB	   116#	   120
BADJOB	   135#	   139
BL1LST	    19	   382#
BL2LST	    19	   385#
BLOCK1	    19	   382	   384#
BLOCK2	    19	   385	   387#
BP	    29#	   172	   174	   211	   212
C	    27#	   214	   215	   216	   217	   218	   219	   278	   281	   287	   289	   290	   291	   292
	   307	   316	   318	   320	   321
CH	    34#	   212	   213
CONT	   174#	   193
CONT1	   176	   180#
D	    28#	   282	   283	   296	   297	   299	   301	   304	   305	   306	   308	   311	   314	   319
DEBUGS	     9#	    13	    14	   108	   166	   176	   202	   338
ERRBLK	   297	   303	   304	   305	   308	   311	   314	   319	   372	   377	   379#
ERRCH	    38#	   271	   276	   284	   292	   293	   294	   321	   322	   323	   325	   326
ERRFIL	   276	   281	   283	   284	   372	   373#
ERRFLG	   275	   277	   286	   349#
ERRLST	   293	   322	   372	   377#
ERROR	    18	   117	   131	   133	   136	   207	   227	   243	   271#
EXETAB	   160	   178	   192	   214	   370#
F	    24#	   104	   105	   107
GETIME	   153	   177	   188	   196#	   207
GETPPN	    42#	   109
GOBAK	    70#	   207
HGHJOB	    32#	   114	   115	   117	   123	   125
INDEX	    33#	   145	   146	   150	   154	   155	   160	   161	   170	   171	   173	   178	   189	   192
	   193	   210	   214	   220	   221	   230	   240
INTTAB	   143	   144	   155	   189	   366#
JOBBLK	   136	   140	   142	   146	   343	   363	   365#
JOBCTL	    50#	   136
JOBFIL	   131	   163	   235	   358#
JOBINT	    54#	   142
JOBLST	   133	   363#
JOBPTR	   172	   211	   343#
JOBSNO	    51#	   140
JOBSWD	    52#	   343
JOBSYS	    55#	   146
LOOP	   166	   169#	   194
LPEND	   175	   179	   193#
MAXJOB	    47#	   144	   154	   170
MAXTIM	    45#	   209
MONE	   147	   346#
PAM	MACRO 12.5-46.0 17:51 13-NOV-86
PAM.MAC	26-AUG-82 14:25		Symbol cross reference

NCHARS	    18	   164	   347#
NEWERR	   288	   303#
NORET	    72#	   117	   131	   133	   136	   227	   243
NOW	    30#	   157	   178	   189	   190	   191	   192	   196	   197	   208	   215
NXT	   185#	   336
NXTJ	    71#
NXTJOB	   117#	   125
NXTSLP	   212#	   222
P	    35#	   106	   117	   131	   133	   136	   153	   169	   177	   180	   184	   187	   188	   198
	   202	   207	   227	   243	   277	   279	   280	   312	   316	   318	   327	   330
PAMJOB	    16%	   184
PDL	   106	   187	   344#
PJOB	    43#	   113
PJOK	   108	   127#
PJPPN	   111	   121	   282	   345#
SAVAC	    18	   181	   182	   183	   185	   350#
SEGBLK	   236	   237	   238	   239	   357#
SETJOB	   180	   230#
SLEEPR	   169	   201#
SLP1	   213	   220#
SLPA	   203	   207#
START	   102#	   388
STOP	   184#
SYSBLK	    21	   379	   381#
SYSLST	    21	   379#
SYSTAB	    18	   149	   368#
TEN	    46#	    47	   221	   367	   369	   371
THISJB	    31#	   113	   123
THISYS	    20	   141	   348#
TIMER	    41#	   196
.JBHRL	    16%	   201
PAM	MACRO 12.5-46.0 17:51 13-NOV-86
PAM.MAC	26-AUG-82 14:25		Macro/Opdef cross reference

ATTACH	   167
CORE	   205
DATE	   313
EXIT	   338	   341
GETSEG	   241
GETTAB	   115	   119
HIBER	   225
INTENB	   332
MAKERR	    92#	   116	   130	   132	   135	   206	   226	   242
MSTIME	   315
RESET	   102
RUN	   340
SETUPF	    75#	   372
ZAPCIR	   335JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1
JOB001.MAC	26-AUG-82 16:57	

     1				TITLE JOB001 - JOB 1 FOR NON 33 PDP-10'S
     2				; UPDATE PASSWORD FILE ON THIS SYSTEM
     3				; UPDATE NODE FILE ON THIS SYSTEM
     4
     5	000000'			HISEG	;ALL GOES IN HIGH SEGMENT
     6
     7				;VERSION 15 - (8/26/82) CORRECT READ OF SYSTAB TO BE DEC, SAME AS INDEX
     8				;VERSION 14 - (10/9/80) WAIT FOR EVENT ON GET CHAR FAIL
     9				;VERSION 13 - (2/6/80) CHANGE GET CHAR TO WAIT CHAR
    10				;VERSION 12 - (8/22/79) SET UP TIMEOUT ROUTINE
    11				;VERSION 11 - SLEEP BEFORE ZAPPING CIRCUIT
    12
    13				;REQUIRES WF AC WC LICENSE
    14
    15				INTERN PAMJOB
    16
    17				EXTERN ERROR, SAVAC
    18				EXTERN THISYS
    19				EXTERN SYSTAB
    20				EXTERN BL1LST, BLOCK1, BL2LST, BLOCK2
    21
    22			000001	A=1
    23			000002	B=2
    24			000003	C=3
    25			000004	COUNT=4
    26			000005	BP=5
    27			000006	NCHARS=6	;NUMBER OF CHARS RECIEVED SINCE LAST TIMEOUT
    28			000011	SYSTEM=11
    29			000012	AC12==12
    30			000013	AUX=13
    31			000015	WHICH=15	;=1 IF PASSWORD, 2 IF NODE
    32			000016	CH=16
    33			000017	P=17
    34
    35			000001	PASSW==1
    36			000002	NODES==2
    37			000001	JOB==1
    38
    39				;RETURNS FROM ERROR
    40			000000	NXTJ==0
    41		777777	777777	NORET==-1
    42
    43				DEFINE MAKERR (ERRN, JN, SN, RET)
    44				<XLIST
    45					SKIPA
    46					JRST .+6
    47					HRLZI A,ERRN
    48					HRRI A,JN
    49					HRLZI B,SN
    50					HRRI  B,RET
    51					PUSHJ P,ERROR
    52				LIST>
    53
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-2
JOB001.MAC	26-AUG-82 16:57	

    54
    55	000000'	403040	000006	PAMJOB:	SETZB A,NCHARS
    56	000001'	047040	000036		SETUWP A,
    57	000002'	255000	000000		JFCL
    58	000003'	474040	000000		SETO A,
    59	000004'	047040	777733		ZAPCIR A,
    60	000005'	400440	000000		SETZ SYSTEM,
    61	000006'	201640	000001		MOVEI WHICH,PASSW
    62	000007'	202740	000017*		MOVEM P,SAVAC+17
    63	000010'	041040	000017		INIT 1,17
    64	000011'	446353	000000		SIXBIT /DSK/
    65	000012'	000000	000000		0
    66					MAKERR 2,JOB,THISYS,NORET^XLIST
    67	000022'	260740	000106'	NXTCTL:	PUSHJ P,LOKCTL
    68	000023'	254000	000043'		 JRST CHKCTL
    69	000024'	326440	000026'		JUMPN SYSTEM,.+2
    70	000025'	260740	000162'		PUSHJ P,GETSYS
    71	000026'	260740	000207'		PUSHJ P,SETCIR
    72	000027'	202640	000500'		MOVEM WHICH,SAVWHI
    73	000030'	260740	000051'		PUSHJ P,GETIT
    74	000031'	200640	000500'		MOVE WHICH,SAVWHI
    75	000032'	260740	000222'		PUSHJ P,RENFIL
    76	000033'	260740	000255'		PUSHJ P,DELCTL
    77	000034'	205040	300000	RET:	MOVSI A,300000
    78	000035'	047040	777744		INTENB A,
    79	000036'	255000	000000		 JFCL
    80	000037'	201040	000017		MOVEI A,^D15	;SLEEP FOR 15 SEC. BEFORE ZAPPING CIRCUIT
    81	000040'	047040	000031		SLEEP A,
    82	000041'	200040	000417'		MOVE A,CHAN
    83	000042'	047040	777733		ZAPCIR A,
    84	000043'	340640	000000	CHKCTL:	AOJ WHICH,
    85	000044'	307640	000002		CAIG WHICH,NODES
    86	000045'	254000	000022'		JRST NXTCTL
    87	000046'	071040	000000		RELEASE 1,
    88	000047'	200740	000017*		MOVE P,SAVAC+17
    89	000050'	263740	000000		POPJ P,0
    90
    91	000051'	514540	000417'	GETIT:	HRLZ AUX,CHAN
    92	000052'	541540	000001	        HRRI AUX,1
    93	000053'	042540	000016		AUXCAL AUX,CH
    94	000054'	260740	000143'	        PUSHJ P,IOWAIT
    95	000055'	340300	000000		AOJ NCHARS,	;COUNT BLOCK RECIEVED
    96	000056'	302700	000001		CAIE CH,1
    97					JRST [CAIE CH,2
    98						JRST RET
    99						CLOSE 1,
   100						MOVE A,WORDIO
   101						MOVEM A,BL1LST
   102	000057'	254000	000615'			POPJ P,0]
   103	000060'	042540	000004		AUXCAL AUX,COUNT
   104	000061'	260740	000143'		 PUSHJ P,IOWAIT
   105	000062'	042540	000001		AUXCAL AUX,A
   106	000063'	260740	000143'		PUSHJ P,IOWAIT
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-3
JOB001.MAC	26-AUG-82 16:57	

   107	000064'	242200	000010		LSH COUNT,8
   108	000065'	270200	000001		ADD COUNT,A
   109	000066'	200040	000004		MOVE A,COUNT
   110	000067'	231040	000006		IDIVI A,6
   111	000070'	213000	000001		MOVNS A
   112	000071'	506040	000000*		HRLM A,BL1LST
   113	000072'	200240	000623'		MOVE BP,[POINT 6,BLOCK1]
   114	000073'	042540	000016		AUXCAL AUX,CH
   115	000074'	260740	000143'		 PUSHJ P,IOWAIT
   116	000075'	136700	000005		IDPB CH,BP
   117	000076'	367200	000073'		SOJG COUNT,.-3
   118	000077'	067040	000071*		OUTPUT 1,BL1LST
   119	000100'	063040	760000		STATZ 1,760000
   120	000101'	254000	000034'		 JRST RET
   121	000102'	514540	000417'		HRLZ AUX,CHAN
   122	000103'	541540	000004		HRRI AUX,4
   123	000104'	042540	000001		AUXCAL AUX,1
   124	000105'	254000	000051'		JRST GETIT
   125
   126	000106'	200040	000624'	LOKCTL:	MOVE A,[XWD PCFILE,LK1FIL]
   127	000107'	302640	000001		CAIE WHICH,PASSW
   128	000110'	200040	000625'		MOVE A,[XWD NCFILE,LK1FIL]
   129	000111'	251040	000437'		BLT A,LK1FIL+3
   130	000112'	076040	000434'		LOOKUP 1,LK1FIL
   131					JRST [CLOSE 1,
   132	000113'	254000	000626'			POPJ P,0]
   133	000114'	066040	000077*		INPUT 1,BL1LST
   134	000115'	063040	760000		STATZ 1,760000
   135					MAKERR 11,JOB,THISYS,NXTJ^XLIST
   136	000125'	200040	000000*		MOVE A,BLOCK1
   137	000126'	200100	000466'		MOVE B,PCTL
   138	000127'	302640	000001		CAIE WHICH,PASSW
   139	000130'	200100	000467'		MOVE B,NCTL
   140	000131'	312040	000002		CAME A,B
   141	000132'			BADFIL:	MAKERR 14,JOB,THISYS,NXTJ^XLIST
   142	000141'	350017	000000		AOS (P)
   143	000142'	263740	000000		POPJ P,0
   144
   145	000143'	200140	000417'	IOWAIT: MOVE C,CHAN
   146	000144'	242140	000011	        LSH C,^D9
   147	000145'	271140	000011	        ADDI C,11
   148	000146'	507140	000003	        HRLS C,C
   149	000147'	541140	000005	        HRRI C,5
   150	000150'	047140	000072	        HIBER C,
   151	000151'	254000	000153'	        JRST IOERR
   152	000152'	263740	000000	        POPJ P,0
   153
   154	000153'			IOERR:  MAKERR 11,JOB,THISYS,NXTJ^XLIST
   155
   156	000162'	211040	000170	GETSYS:	MOVNI A,^D120
   157	000163'	135100	000506'		LDB B,PSYSPT	;SEARCH THRU SYSTAB TO FIND SYSTEM WHERE
   158	000164'	326100	000167'		JUMPN B,.+3
   159	000165'	341040	000163'		AOJL A,.-2	;MASTER PASSWORD FILE IS KEPT
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-4
JOB001.MAC	26-AUG-82 16:57	

   160	000166'	254000	000132'		JRST BADFIL	;NONE FOUND
   161	000167'	550041	000170*		HRRZ A,SYSTAB+^D120(A)	;FOUND IT - GET SYSTEM NUMBER
   162	000170'	200440	000001		MOVE SYSTEM,A
   163	000171'	231040	000012		IDIVI A,^D10
   164	000172'	261740	000002		PUSH P,B
   165	000173'	261740	000001		PUSH P,A
   166	000174'	200040	000630'		MOVE A,[POINT 7,LOGINS]	;FIND PLACE IN LOGIN STRING TO PUT SYSTEM
   167	000175'	134700	000001		ILDB CH,A
   168	000176'	302700	000072		CAIE CH,":"
   169					JRST [JUMPE CH,BADFIL
   170	000177'	254000	000631'			JRST .-2]
   171	000200'	262740	000016		POP P,CH
   172	000201'	271700	000060		ADDI CH,60
   173	000202'	136700	000001		IDPB CH,A
   174	000203'	262740	000016		POP P,CH
   175	000204'	271700	000060		ADDI CH,60
   176	000205'	136700	000001		IDPB CH,A
   177	000206'	263740	000000		POPJ P,0
   178
   179	000207'	201040	000501'	SETCIR:	MOVEI A,LOGINS
   180	000210'	201100	000422'		MOVEI B,PGOMES
   181	000211'	302640	000001		CAIE WHICH,PASSW
   182	000212'	201100	000427'		MOVEI B,NGOMES
   183	000213'	260740	000315'		PUSHJ P,GETCIR
   184	000214'	400040	000000		SETZ A,
   185	000215'	260740	000276'		PUSHJ P,JSETNAM
   186	000216'	070040	000000		CLOSE 1,
   187	000217'	077040	000440'		ENTER 1,LOKBLK
   188	000220'	254000	000227'		JRST LOKERR
   189	000221'	263740	000000		POPJ P,0
   190
   191	000222'	200040	000415'	RENFIL:	MOVE A,UFDPPN
   192	000223'	302640	000001		CAIE WHICH,PASSW
   193	000224'	200040	000416'		MOVE A,TYMPPN
   194	000225'	202040	000441'		MOVEM A,LOKBLK+1
   195	000226'	076040	000440'		LOOKUP 1,LOKBLK
   196	000227'			LOKERR:	MAKERR 10,JOB,@THISYS,NXTJ^XLIST
   197	000236'	402000	000442'		SETZM LOKBLK+2
   198	000237'	402000	000443'		SETZM LOKBLK+3
   199	000240'	055040	000440'		RENAME 1,LOKBLK
   200	000241'	254000	000264'		 JRST RENERR
   201	000242'	400040	000000		SETZ A,
   202	000243'	260740	000276'		PUSHJ P,JSETNAM
   203	000244'	076040	000440'		LOOKUP 1,LOKBLK
   204	000245'	254000	000227'		 JRST LOKERR
   205	000246'	200040	000415'		MOVE A,UFDPPN
   206	000247'	302640	000001		CAIE WHICH,PASSW
   207	000250'	200040	000416'		MOVE A,TYMPPN
   208	000251'	202040	000441'		MOVEM A,LOKBLK+1
   209	000252'	055040	000440'		RENAME 1,LOKBLK
   210	000253'	254000	000264'		 JRST RENERR
   211	000254'	263740	000000		POPJ P,0
   212
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-5
JOB001.MAC	26-AUG-82 16:57	

   213	000255'	260740	000106'	DELCTL:	PUSHJ P,LOKCTL
   214	000256'	254000	000132'		 JRST BADFIL
   215	000257'	402000	000434'		SETZM LK1FIL
   216	000260'	402000	000435'		SETZM LK1FIL+1
   217	000261'	200040	000461'		MOVE A,PCFILE+3
   218	000262'	202040	000437'		MOVEM A,LK1FIL+3
   219	000263'	055040	000434'		RENAME 1,LK1FIL
   220	000264'			RENERR:	MAKERR 15,JOB,THISYS,NXTJ^XLIST
   221	000273'	263740	000000		POPJ P,0
   222
   223	000274'	070040	000000	NOCIR:	CLOSE 1,
   224	000275'	254000	000043'		JRST CHKCTL
   225
   226	000276'	200040	000633'	JSETNAM:	MOVE A,[XWD PDFILE,LOKBLK]
   227	000277'	302640	000001		CAIE WHICH,PASSW
   228	000300'	200040	000634'		MOVE A,[XWD NDFILE,LOKBLK]
   229	000301'	251040	000443'		BLT A,LOKBLK+3
   230	000302'	402000	000444'		SETZM LOKBLK+4
   231	000303'	200040	000635'		MOVE A,[XWD LOKBLK+4,LOKBLK+5]
   232	000304'	251040	000454'		BLT A,LOKBLK+14
   233	000305'	515040	044000		HRLZI A,44000	;ALL RD RD - NODES.MAP ONLY
   234	000306'	302640	000001		CAIE WHICH,PASSW
   235	000307'	202040	000444'		MOVEM A,LOKBLK+4
   236	000310'	302640	000001		CAIE WHICH,PASSW
   237	000311'	263740	000000		POPJ P,0
   238	000312'	551040	400000		HRRZI A,400000
   239	000313'	202040	000454'		MOVEM A,LOKBLK+14	;WC LICENSE
   240	000314'	263740	000000		POPJ P,0
   241
   242	000315'	047040	777734	GETCIR:	CREAUX A,
   243	000316'	254000	000274'		JRST NOCIR
   244	000317'	202040	000417'		MOVEM A,CHAN
   245	000320'	507000	000001		HRLS A
   246	000321'	541040	000004		HRRI A,4
   247	000322'	042040	000015		AUXCAL A,15	;2CR'S
   248	000323'	042040	000015		AUXCAL A,15
   249	000324'	541040	000005		HRRI A,5
   250	000325'	505140	440700		HRLI C,440700	;SEND START UP STRING
   251	000326'	540140	000002		HRR C,B
   252	000327'	042040	000003		AUXCAL A,C
   253	000330'	201040	000507'		MOVEI A,TRPTAB
   254	000331'	505040	000006		HRLI A,6	;DISABLE AND CLEAR INTERRUPT SSSTEM
   255	000332'	047040	777745		INTADR A,
   256	000333'	255000	000000		 JFCL
   257	000334'	550040	000417'		HRRZ A,CHAN
   258	000335'	505040	007001		HRLI A,7001
   259	000336'	047040	777736		TINASS A,	;CIRCUIT ZAP ON CHAN 1
   260	000337'	255000	000000		 JFCL
   261	000340'	400040	000000		SETZ A,
   262	000341'	047040	777741		SETTIM A,	;RESET TIMER
   263	000342'	255000	000000		 JFCL
   264	000343'	505040	000004		HRLI A,4
   265	000344'	541040	000002		HRRI A,2
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-6
JOB001.MAC	26-AUG-82 16:57	

   266	000345'	047040	777742		INTASS A,	;TIMER ON CHAN 2
   267	000346'	255000	000000		 JFCL
   268	000347'	550040	000417'		HRRZ A,CHAN
   269	000350'	205040	700000		MOVSI A,700000
   270	000351'	047040	777744		INTENB A,	;ENABLE INTERRUPTS ON CHAN 1, 2
   271	000352'	255000	000000		 JFCL
   272	000353'	200040	000421'		MOVE A,TIMO
   273	000354'	047040	777741		SETTIM A,
   274	000355'	255000	000000		 JFCL
   275	000356'	514040	000417'		HRLZ A,CHAN
   276	000357'	541040	000001	        HRRI A,1
   277	000360'	042040	000016	TRYAGN:	AUXCAL A,CH
   278	000361'	260740	000143'		 PUSHJ P,IOWAIT
   279	000362'	302700	000001		CAIE CH,1
   280	000363'	254000	000360'		 JRST TRYAGN
   281	000364'	042040	000016		AUXCAL A,CH
   282	000365'	260740	000143'		 PUSHJ P,IOWAIT
   283	000366'	302700	000002		CAIE CH,2
   284	000367'	254000	000360'		 JRST TRYAGN
   285	000370'	042040	000016		AUXCAL A,CH
   286	000371'	260740	000143'		 PUSHJ P,IOWAIT
   287	000372'	302700	000003		CAIE CH,3
   288	000373'	254000	000360'		 JRST TRYAGN
   289	000374'	042040	000016		AUXCAL A,CH
   290	000375'	260740	000143'		 PUSHJ P,IOWAIT
   291	000376'	302700	000004		CAIE CH,4
   292	000377'	254000	000360'		 JRST TRYAGN
   293	000400'	514040	000417'		HRLZ A,CHAN
   294	000401'	541040	000004		HRRI A,4
   295	000402'	042040	000001		AUXCAL A,1
   296	000403'	042040	000002		AUXCAL A,2
   297	000404'	042040	000003		AUXCAL A,3
   298	000405'	042040	000004		AUXCAL A,4
   299	000406'	263740	000000		POPJ P,0
   300
   301
   302	000407'	322300	000034'	TIMEUP:	JUMPE NCHARS,RET
   303	000410'	402000	000006		SETZM NCHARS
   304	000411'	200500	000421'		MOVE AC12,TIMO
   305	000412'	047500	777741		SETTIM AC12,
   306	000413'	255000	000000		 JFCL
   307	000414'	047000	777755		DISMIS
   308	
   309
   310
   311	000415'	000001	000004	UFDPPN: 1000004
   312	000416'	021477	175251	TYMPPN:	21477175251	;TYMNET
   313	000417'	000000	000000	CHAN:	0
   314		000006	000214	PJPPN==6000214
   315	000420'	777600	777777*	WORDIO:	IOWD 200,BLOCK1
   316	000421'	000001	000360	TIMO:	XWD 1,^D240	;4 MINUTE TIME OUT
   317	000422'	516132	420230	PGOMES: ASCIZ/SET LOGOUT
	000423'	476171	752650
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-7
JOB001.MAC	26-AUG-82 16:57	

   318	000424'	064252	252634	RUN PSWUPD
	000425'	202412	353652
   319	000426'	502101	505000	/
   320	000427'	516132	420230	NGOMES:	ASCIZ /SET LOGOUT
	000430'	476171	752650
   321	000431'	064252	252634	RUN NDMUPD
	000432'	202350	446652
   322	000433'	502101	505000	/
   323	000434'			LK1FIL:	BLOCK 4
   324	000440'			LOKBLK:	BLOCK 16
   325	000456'	555360	416363	PCFILE:	SIXBIT /MKPASS/
   326	000457'	435047	000000		SIXBIT /CHG/
   327	000460'	000000	000000		0
   328	000461'	000006	000214		PJPPN
   329	000462'	555356	574445	NCFILE:	SIXBIT /MKNODE/
   330	000463'	435047	000000		SIXBIT /CHG/
   331	000464'	000000	000000		0
   332	000465'	000006	000214		PJPPN
   333
   334	000466'	525252	000103	PCTL:	525252000103
   335	000467'	525252	000106	NCTL:	525252000106
   336
   337	000470'	000000	000014	PDFILE:	14
   338	000471'	000000	000000		0
   339	000472'	446267	636062		SIXBIT /DRWSPR/
   340	000473'	456057	000000		SIXBIT /EPO/
   341
   342	000474'	000000	000014	NDFILE:	14
   343	000475'	000000	000000		0
   344	000476'	565744	456300		SIXBIT /NODES/
   345	000477'	554160	000000		SIXBIT /MAP/
   346	000500'	000000	000000	SAVWHI:	0
   347	000501'	516472	040632	LOGINS:	ASCIZ /SSPAMBIN:38;/
	000502'	412231	635146
	000503'	341660	000000
   348	000504'	000000	000000		0
   349	000505'	000000	000000		0
   350	000506'	350101	000170*	PSYSPT:	POINT 1,SYSTAB+^D120(A),6
   351	000507'	000000	000000	TRPTAB:	0
   352	000510'	000000	000034'		RET
   353	000511'	000000	000000		0
   354	000512'	000000	000407'		TIMEUP
   355	000513'				BLOCK ^D66
   356				END
   357
NO ERRORS DETECTED
HI-SEG. BREAK IS 000636
3K CORE USED
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 2
JOB001.MAC	26-AUG-82 16:57		SYMBOL TABLE

A		000001		PSYSPT		000506'		
AC12		000012	SPD	RENERR		000264'		
AUX		000013		RENFIL		000222'		
B		000002		RET		000034'		
BADFIL		000132'		SAVAC		000000	EXT	
BL1LST		000621'	EXT	SAVWHI		000500'		
BL2LST		000000	EXT	SETCIR		000207'		
BLOCK1		000623'	EXT	SETTIM	047000	777741		
BLOCK2		000000	EXT	SETUWP	047000	000036		
BP		000005		SLEEP	047000	000031		
C		000003		SYSTAB		000000	EXT	
CH		000016		SYSTEM		000011		
CHAN		000417'		THISYS		000270'	EXT	
CHKCTL		000043'		TIMEUP		000407'		
COUNT		000004		TIMO		000421'		
CREAUX	047000	777734		TINASS	047000	777736		
DELCTL		000255'		TRPTAB		000507'		
DISMIS	047000	777755		TRYAGN		000360'		
ERROR		000272'	EXT	TYMPPN		000416'		
GETCIR		000315'		UFDPPN		000415'		
GETIT		000051'		WHICH		000015		
GETSYS		000162'		WORDIO		000420'		
HIBER	047000	000072		ZAPCIR	047000	777733		
INTADR	047000	777745		
INTASS	047000	777742		
INTENB	047000	777744		
IOERR		000153'		
IOWAIT		000143'		
JOB		000001	SPD	
JSETNA		000276'		
LK1FIL		000434'		
LOGINS		000501'		
LOKBLK		000440'		
LOKCTL		000106'		
LOKERR		000227'		
NCFILE		000462'		
NCHARS		000006		
NCTL		000467'		
NDFILE		000474'		
NGOMES		000427'		
NOCIR		000274'		
NODES		000002	SPD	
NORET	777777	777777	SPD	
NXTCTL		000022'		
NXTJ		000000	SPD	
P		000017		
PAMJOB		000000'	INT	
PASSW		000001	SPD	
PCFILE		000456'		
PCTL		000466'		
PDFILE		000470'		
PGOMES		000422'		

JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB001.MAC	26-AUG-82 16:57		Symbol cross reference

A	    22#	    55	    56	    58	    59	    67	    77	    78	    80	    81	    82	    83	   100	   101
	   105	   108	   109	   110	   111	   112	   126	   128	   129	   136	   140	   142	   155	   156
	   159	   161	   162	   163	   165	   166	   167	   173	   176	   179	   184	   191	   193	   194
	   197	   201	   205	   207	   208	   217	   218	   221	   226	   228	   229	   231	   232	   233
	   235	   238	   239	   242	   244	   245	   246	   247	   248	   249	   252	   253	   254	   255
	   257	   258	   259	   261	   262	   264	   265	   266	   268	   269	   270	   272	   273	   275
	   276	   277	   281	   285	   289	   293	   294	   295	   296	   297	   298	   350
AC12	    29#	   304	   305
AUX	    30#	    91	    92	    93	   103	   105	   114	   121	   122	   123
B	    23#	    67	   136	   137	   139	   140	   142	   155	   157	   158	   164	   180	   182	   197
	   221	   251
BADFIL	   141#	   160	   169	   214
BL1LST	    20%	   101	   112	   118	   133
BL2LST	    20%
BLOCK1	    20%	   113	   136	   315
BLOCK2	    20%
BP	    26#	   113	   116
C	    24#	   145	   146	   147	   148	   149	   150	   250	   251	   252
CH	    32#	    93	    96	    97	   114	   116	   167	   168	   169	   171	   172	   173	   174	   175
	   176	   277	   279	   281	   283	   285	   287	   289	   291
CHAN	    82	    91	   121	   145	   244	   257	   268	   275	   293	   313#
CHKCTL	    68	    84#	   224
COUNT	    25#	   103	   107	   108	   109	   117
DELCTL	    76	   213#
ERROR	    17%	    67	   136	   142	   155	   197	   221
GETCIR	   183	   242#
GETIT	    73	    91#	   124
GETSYS	    70	   156#
IOERR	   151	   154#
IOWAIT	    94	   104	   106	   115	   145#	   278	   282	   286	   290
JOB	    37#	    67	   136	   142	   155	   197	   221
JSETNA	   185	   202	   226#
LK1FIL	   126	   128	   129	   130	   215	   216	   218	   219	   323#
LOGINS	   166	   179	   347#
LOKBLK	   187	   194	   195	   197	   198	   199	   203	   208	   209	   226	   228	   229	   230	   231
	   232	   235	   239	   324#
LOKCTL	    67	   126#	   213
LOKERR	   188	   196#	   204
NCFILE	   128	   329#
NCHARS	    27#	    55	    95	   302	   303
NCTL	   139	   335#
NDFILE	   228	   342#
NGOMES	   182	   320#
NOCIR	   223#	   243
NODES	    36#	    85
NORET	    41#	    67
NXTCTL	    67#	    86
NXTJ	    40#	   136	   142	   155	   197	   221
P	    33#	    62	    67	    70	    71	    73	    75	    76	    88	    89	    94	   102	   104	   106
	   115	   132	   136	   142	   143	   152	   155	   164	   165	   171	   174	   177	   183	   185
	   189	   197	   202	   211	   213	   221	   237	   240	   278	   282	   286	   290	   299
PAMJOB	    15	    55#
PASSW	    35#	    61	   127	   138	   181	   192	   206	   227	   234	   236
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB001.MAC	26-AUG-82 16:57		Symbol cross reference

PCFILE	   126	   217	   325#
PCTL	   137	   334#
PDFILE	   226	   337#
PGOMES	   180	   317#
PJPPN	   314#	   328	   332
PSYSPT	   157	   350#
RENERR	   200	   210	   220#
RENFIL	    75	   191#
RET	    77#	    98	   120	   302	   352
SAVAC	    17%	    62	    88
SAVWHI	    72	    74	   346#
SETCIR	    71	   179#
SYSTAB	    19%	   161	   350
SYSTEM	    28#	    60	    69	   162
THISYS	    18%	    67	   136	   142	   155	   197	   221
TIMEUP	   302#	   354
TIMO	   272	   304	   316#
TRPTAB	   253	   351#
TRYAGN	   277#	   280	   284	   288	   292
TYMPPN	   193	   207	   312#
UFDPPN	   191	   205	   311#
WHICH	    31#	    61	    72	    74	    84	    85	   127	   138	   181	   192	   206	   227	   234	   236
WORDIO	   100	   315#
JOB001 - JOB 1 FOR NON 33 PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB001.MAC	26-AUG-82 16:57		Macro/Opdef cross reference

CREAUX	   242
DISMIS	   307
HIBER	   150
INTADR	   255
INTASS	   266
INTENB	    78	   270
MAKERR	    44#	    66	   135	   141	   154	   196	   220
SETTIM	   262	   273	   305
SETUWP	    56
SLEEP	    81
TINASS	   259
ZAPCIR	    59	    83JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1
JOB002.MAC	 9-OCT-80 11:23	

     1				TITLE JOB002 - JOB 2 FOR ALL PDP-10'S
     2				;TRU CONTROL JOB
     3
     4	000000'			HISEG		;ALL GOES IN HIGH SEGMENT
     5
     6				;VERSION 10 - IF STOP AND START TIME SAME, DON'T CONTROL
     7
     8				;REQUIRES OP WF WC SY JL ST LICENSE
     9
    10				EXTERN ERROR, BL1LST, BLOCK1
    11				EXTERN BLOCK2, THISYS
    12
    13				INTERN PAMJOB
    14
    15				;AC'S
    16			000000	F=0
    17			000001	A=1
    18			000002	B=2
    19			000003	C=3
    20			000004	D=4
    21			000005	E=5
    22			000006	N=6
    23			000007	N1=7
    24			000010	N2=10
    25			000011	N3=11
    26			000012	INDEX=12
    27			000013	STRDEX=13	;INDEX FOR STRUCTURES
    28			000014	STR=14
    29			000015	SIZENT=15
    30			000016	JOBN=16
    31			000017	P=17
    32
    33				;FLAGS IN RIGHT HALF OF F
    34			000001	DUREST==1	;THIS IS DURING RESTRICT TIME
    35			000002	ONESTR==2	;SET CREDIT IN DSKB ONLY
    36			000004	ADDIT==4	;ADD TRU'S INSTEAD OF SETTING THEM
    37
    38				;I/O CHANNELS
    39			000001	DSK==1
    40			000002	UFD==2
    41
    42			000002	JOB==2
    43			000000	JBTSTS==0
    44			000001	JACCT==1
    45
    46				;VARIABLES
    47			000000	STRTRU=BLOCK2
    48			000001	STPTRU=BLOCK2+1
    49			000002	CLRTIM=BLOCK2+2
    50			000003	OVRIDE=BLOCK2+3
    51			000004	FIRSTR=BLOCK2+4
    52			000005	BNHERE=BLOCK2+5
    53			000006	TODAY=BLOCK2+6
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-2
JOB002.MAC	 9-OCT-80 11:23	

    54			000007	DATLOC=BLOCK2+7
    55
    56				;RETURNS IN RIGHT HALF OF B FOR ERROR ROUTINE
    57			000001	GOBAK==1
    58			000000	NXTJ==0
    59		777777	777777	NORET==-1
    60
    61				DEFINE MAKERR (ERRN, JN, SN, RET)
    62				<XLIST
    63					SKIPA
    64					JRST .+6
    65					HRLZI A,ERRN
    66					HRRI A,JN
    67					HRLZI B,SN
    68					HRRI B,RET
    69					PUSHJ P,ERROR
    70				LIST>
    71
    72
    73	000000'	403040	000000	PAMJOB:	SETZB A,F
    74	000001'	047040	000036		SETUWP A,
    75	000002'	255000	000000		JFCL
    76	000003'	047040	000014		DATE A,
    77	000004'	202040	000006*		MOVEM A,TODAY
    78	000005'	041040	000017		INIT DSK,17
    79	000006'	446353	000000		SIXBIT /DSK/
    80	000007'	000000	000000		0
    81	000010'			INIERR:	MAKERR 2,JOB,@THISYS,NORET^XLIST
    82	000017'	260740	000473'		PUSHJ P,LOKCTL	;LOOKUP AND READ CONTROL FILE
    83	000020'	070040	000000		CLOSE DSK,
    84	000021'	332000	000005*		SKIPE BNHERE	;FIRST RUN?
    85	000022'	254000	000025'		JRST .+3
    86	000023'	350000	000005*		AOS BNHERE	;YES
    87	000024'	260740	000332'		PUSHJ P,CLROVR	;CLEAR OVERRIDE IF VERY FIRST RUN
    88	000025'	260740	000060'		PUSHJ P,SETFLG	;SET FLAG FOR RESTRICT,NON-RESTR. TIME
    89	000026'	260740	000121'		PUSHJ P,CHKCLR
    90	000027'	336140	000003*	AGN:	SKIPN C,OVRIDE
    91	000030'	254000	000040'		JRST NOVRID
    92	000031'	321140	000035'		JUMPL C,.+4	;OVERRIDE IS SET,WAS IT SET DURING RESTR TIME?
    93	000032'	602000	000001		TRNE F,DUREST	;YES, IS THIS RESTR TIME?
    94	000033'	254000	000045'		JRST RET	;YES, SO RETURN
    95					JRST [PUSHJ P,CLROVR	;NO, CLEAR OVERRIDE AND CHECK AGAIN
    96	000034'	254000	001307'			JRST AGN]
    97	000035'	602000	000001		TRNE F,DUREST	;OVERRIDE WAS NOT SET DURING RESTR TIME
    98					JRST [PUSHJ P,CLROVR	;AND THIS IS NOT RESTRICT TIME-CLEAR IT AND CHECK AGAIN
    99	000036'	254000	001307'			JRST AGN]
   100	000037'	254000	000042'		JRST NOVRID+2	;AND THIS IS NOT RESTR TIME, SO CHECK USERS
   101	000040'	606000	000001	NOVRID:	TRNN F,DUREST	;IS THIS DURING RESTR. TIME?
   102	000041'	254000	000110'		JRST RESOFF	;NO, MAKE SURE IT'S NOT RESTR. AND RETURN
   103	000042'	260740	000047'		PUSHJ P,RESON	;YES, MAKE SURE SYSTEM IS RESTRICTED
   104	000043'	260740	000270'		PUSHJ P,CREDIT	;CREDIT USER'S IF THIS IS THE FIRST RUN
   105	000044'	260740	000413'		PUSHJ P,CHKHNG	;CHECK ON JOBS TO BE HUNG
   106	000045'	071040	000000	RET:	RELEASE DSK,
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-3
JOB002.MAC	 9-OCT-80 11:23	

   107	000046'	263740	000000		POPJ P,0
   108
   109	000047'	200040	001311'	RESON:	MOVE A,[XWD 17,11]
   110	000050'	047040	000041		GETTAB A,
   111	000051'	254000	000345'		 JRST BADGTT
   112	000052'	662040	100000		TROE A,100000
   113	000053'	254000	000057'		JRST .+4
   114	000054'	505040	000001		HRLI A,1
   115	000055'	047040	000075		SETUUO A,	;SET RESTRICT
   116	000056'	254000	000201'		 JRST UUOERR
   117	000057'	263740	000000		POPJ P,0
   118
   119	000060'	200040	000006*	SETFLG:	MOVE A,TODAY
   120	000061'	202040	000007*		MOVEM A,DATLOC
   121	000062'	047040	000022		TIMER A,
   122	000063'	202040	000010*		MOVEM A,DATLOC+1
   123	000064'	551040	400000		HRRZI A,400000
   124	000065'	202040	000011*		MOVEM A,DATLOC+2
   125	000066'	201040	000007*		MOVEI A,DATLOC
   126	000067'	047040	777723		DATUUO A,
   127	000070'	254000	000201'		 JRST UUOERR
   128	000071'	200040	000007*		MOVE A,DATLOC
   129	000072'	231040	000007		IDIVI A,7
   130	000073'	302100	000003		CAIE B,3	;SATURDAY?
   131	000074'	306100	000004		CAIN B,4	;OR SUNDAY?
   132	000075'	254000	000105'		JRST NOTSET	;YES,ITS A WEEKEND, SO NOT RESTRICTED TIME
   133	000076'	047040	000023		MSTIME A,
   134	000077'	231040	165140		IDIVI A,^D60000
   135	000100'	200100	000000*		MOVE B,STRTRU
   136	000101'	316100	000001*		CAMN B,STPTRU	;IF START=STOP, FORGET IT
   137	000102'	254000	000105'		JRST NOTSET
   138	000103'	311040	000002		CAML A,B
   139	000104'	311040	000001*		CAML A,STPTRU
   140	000105'	624000	000001	NOTSET:	TRZA F,DUREST
   141	000106'	660000	000001		TRO F,DUREST
   142	000107'	263740	000000		POPJ P,0
   143
   144	000110'	200040	001311'	RESOFF:	MOVE A,[XWD 17,11]
   145	000111'	047040	000041		GETTAB A,
   146	000112'	254000	000345'		 JRST BADGTT
   147	000113'	626040	100000		TRZN A,100000
   148	000114'	254000	000045'		JRST RET	;RETURN TO PJ
   149	000115'	505040	000001		HRLI A,1
   150	000116'	047040	000075		SETUUO A,
   151	000117'	254000	000201'		JRST UUOERR
   152	000120'	254000	000045'		JRST RET
   153
   154				;IF TOTALS HAVE NOT BEEN CLEARED TODAY - CLEAR THEM
   155	000121'	550040	000002*	CHKCLR:	HRRZ A,CLRTIM	;GET DATE TOTALS WERE LAST CLEARED
   156	000122'	316040	000006*		CAMN A,TODAY	;CLEARED TODAY?
   157	000123'	263740	000000		POPJ P,0	;YES, OK
   158	000124'	260740	000150'		PUSHJ P,CLRTOT	;NO, CLEAR THEM
   159	000125'	260740	000473'		PUSHJ P,LOKCTL	;UPDATE CLRTIM IN CONTROL FILE
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-4
JOB002.MAC	 9-OCT-80 11:23	

   160	000126'	260740	000547'		PUSHJ P,ENTCTL	;OPEN FILE FOR UPDATING
   161	000127'	200040	000006*			MOVE A,TODAY
   162	000130'	552040	000003*		HRRZM A,BLOCK1+3	;SAVE DATE
   163	000131'	047040	000023		MSTIME A,
   164	000132'	231040	165140		IDIVI A,^D60000
   165	000133'	506040	000003*		HRLM A,BLOCK1+3	;SAVE TIME
   166	000134'	075040	000001	WRCTL:	USETO DSK,1
   167	000135'	067040	000000*		OUTPUT DSK,BL1LST
   168	000136'	063040	760000		STATZ DSK,760000
   169					MAKERR 11,JOB,@THISYS,NXTJ^XLIST
   170	000146'	070040	000000		CLOSE DSK,
   171	000147'	263740	000000		POPJ P,0
   172
   173
   174
   175				;READ THRU LUD AND CLEAR TOTAL FOR ANY USER WITH TRU CONTROL BIT ON.
   176	000150'	260740	000573'	CLRTOT:	PUSHJ P,LOKLUD
   177	000151'	260740	000174'		PUSHJ P,SETJA
   178	000152'	400400	000000		SETZ N2,
   179	000153'	066040	000135*	NXTBLK:	INPUT DSK,BL1LST	;READ NEXT BLOCK
   180	000154'	063040	020000		STATZ DSK,20000
   181	000155'	254000	000211'		JRST CLRDON	;END OF FILE FOUND
   182	000156'	063040	740000		STATZ DSK,740000
   183	000157'	254000	000506'		JRST IOERR
   184	000160'	400500	000000		SETZ INDEX,
   185	000161'	337052	000000*	NXTU:	SKIPG A,BLOCK1(INDEX)	;CHECK NEXT USER
   186	000162'	254000	000153'		JRST NXTBLK	;DONE WITH THIS BLOCK
   187	000163'	135640	000745'		LDB SIZENT,SIZPTR
   188	000164'	336012	000004*		SKIPN BLOCK1+4(INDEX)	;IIF NOT VALID
   189	000165'	254000	000172'		JRST INCDEX	;DON'T CHECK IT
   190	000166'	135100	000744'		LDB B,CBTPTR	;GET TRU CONTROL BIT
   191	000167'	336000	000002		SKIPN ,B
   192	000170'	254000	000172'		JRST INCDEX	;IF THIS USER DOES NOT HAVE A BUDGET, GO TO NEXT
   193	000171'	260740	000226'		PUSHJ P,CHGUFD	;SET ZERO IN UFD
   194	000172'	270500	000015	INCDEX:	ADD INDEX,SIZENT
   195	000173'	254000	000161'		JRST NXTU
   196
   197				;SET JACCT STATUS
   198	000174'	561040	000000	SETJA:	HRROI A,JBTSTS
   199	000175'	047040	000041		GETTAB A,
   200	000176'	254000	000345'		 JRST BADGTT
   201	000177'	661040	000001		TLO A,JACCT
   202	000200'	047040	777757		SETJAL A,
   203	000201'			UUOERR:	MAKERR 1,JOB,@THISYS,NORET^XLIST
   204	000210'	263740	000000		POPJ P,0
   205
   206	000211'	070040	000000	CLRDON:	CLOSE DSK,
   207	000212'	260740	000214'		PUSHJ P,UNSETJ	;RESET JACCT BIT
   208	000213'	263740	000000		POPJ P,0
   209
   210	000214'	561040	000000	UNSETJ:	HRROI A,JBTSTS
   211	000215'	047040	000041		GETTAB A,
   212	000216'	254000	000345'		 JRST BADGTT
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-5
JOB002.MAC	 9-OCT-80 11:23	

   213	000217'	621040	000001		TLZ A,JACCT
   214	000220'	047040	777757		SETJAL A,
   215	000221'	254000	000201'		 JRST UUOERR
   216	000222'	051100	000001		INCHRS A
   217	000223'	334000	000000		SKIPA
   218	000224'	047000	000012		EXIT
   219	000225'	263740	000000		POPJ P,0
   220
   221
   222				;N2 CONTAINS THE NUMBER OF TRUS TO PUT IN UFD ENTRY
   223				;A CONTAINS PPN
   224	000226'	200300	000001	CHGUFD:	MOVE N,A
   225	000227'	260740	000676'		PUSHJ P,SETRDX	;SET STRDEX UP FOR GETTING STR
   226	000230'	200613	000161*	NXTSTR:	MOVE STR,BLOCK1(STRDEX)
   227	000231'	404600	001312'		AND STR,[XWD 777777,770000]
   228	000232'	260740	000657'		PUSHJ P,LOKSTR	;GET THE INTERLOCK
   229	000233'	201040	000017		MOVEI A,17
   230	000234'	505040	400000		HRLI A,400000
   231	000235'	201140	000000		MOVEI C,0
   232	000236'	200100	000014		MOVE B,STR
   233	000237'	050100	000001		OPEN UFD,A
   234					JRST [PUSHJ P,NLKSTR
   235	000240'	254000	001313'			JRST INIERR]
   236	000241'	260740	000605'		PUSHJ P,LKUFST
   237	000242'	076100	001256'		LOOKUP UFD,UFDFIL
   238	000243'	254000	000254'		 JRST NOUFD1
   239	000244'	602000	000004		TRNE F,ADDIT
   240	000245'	254000	000250'		JRST .+3
   241	000246'	202400	001307'		MOVEM N2,UFDFIL+31
   242	000247'	334000	000000		SKIPA
   243	000250'	272400	001307'		ADDM N2,UFDFIL+31
   244	000251'	476000	001303'		SETOM UFDFIL+25	;SET IN USE WORD
   245	000252'	055100	001256'		RENAME UFD,UFDFIL
   246	000253'	255000	000000		 JFCL
   247	000254'	260740	000667'	NOUFD1:	PUSHJ P,NLKSTR
   248	000255'	070100	000000		CLOSE UFD,
   249	000256'	071100	000000		RELEASE UFD,
   250	000257'	602000	000002		TRNE F,ONESTR
   251	000260'	254000	000267'		JRST UFDDON
   252	000261'	326400	000267'		JUMPN N2,UFDDON
   253	000262'	271540	000003		ADDI STRDEX,3
   254	000263'	200040	000012		MOVE A,INDEX
   255	000264'	270040	000015		ADD A,SIZENT
   256	000265'	315540	000001		CAMGE STRDEX,A
   257	000266'	254000	000230'		JRST NXTSTR
   258	000267'	263740	000000	UFDDON:	POPJ P,0
   259
   260				;CREDIT ALL BUDGETED USERS LOGGED IN WITH THE AMOUNT OF TRU'S USED SO FAR
   261	000270'	200100	000006*	CREDIT:	MOVE B,TODAY
   262	000271'	316100	000004*		CAMN B,FIRSTR
   263	000272'	263740	000000		POPJ P,0
   264	000273'	260740	000337'		PUSHJ P,ISEARCH
   265	000274'	260740	000355'		PUSHJ P,SEARCH
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-6
JOB002.MAC	 9-OCT-80 11:23	

   266	000275'	254000	000311'		JRST SETCRE
   267	000276'	254000	000303'		JRST .+5	;ALLREADY IN TABLE
   268	000277'	350000	001251'		AOS USRDEX	;NEW USER
   269	000300'	200440	001251'		MOVE N3,USRDEX
   270	000301'	200352	000230*		MOVE N1,BLOCK1(INDEX)
   271	000302'	202351	000751'		MOVEM N1,USRTAB(N3)	;SAVE PPN
   272	000303'	551340	000004		HRRZI N1,4
   273	000304'	504340	000016		HRL N1,JOBN
   274	000305'	047340	000041		GETTAB N1,	;GET TRU'S
   275	000306'	201340	000000		 MOVEI N1,0
   276	000307'	272351	001151'		ADDM N1,CURTAB(N3)	;SAVE CURRENT TRU'S
   277	000310'	367700	000274'		SOJG JOBN,CREDIT+4
   278	000311'	200440	001251'	SETCRE:	MOVE N3,USRDEX
   279	000312'	260740	000174'		PUSHJ P,SETJA
   280	000313'	322440	000323'		JUMPE N3,.+10
   281	000314'	660000	000006		TRO F,ONESTR+ADDIT
   282	000315'	200051	000751'		MOVE A,USRTAB(N3)
   283	000316'	210411	001151'		MOVN N2,CURTAB(N3)
   284	000317'	200300	000001		MOVE N,A
   285	000320'	200600	001315'		MOVE STR,[SIXBIT /DSKB/]
   286	000321'	260740	000232'		PUSHJ P,CHGUFD+4
   287	000322'	367440	000315'		SOJG N3,.-5
   288	000323'	620000	000006		TRZ F,ONESTR+ADDIT
   289	000324'	260740	000214'		PUSHJ P,UNSETJ
   290	000325'	260740	000473'		PUSHJ P,LOKCTL
   291	000326'	260740	000547'		PUSHJ P,ENTCTL
   292	000327'	200040	000006*		MOVE A,TODAY
   293	000330'	202040	000005*		MOVEM A,BLOCK1+5
   294	000331'	254000	000134'		JRST WRCTL
   295
   296
   297	000332'	260740	000473'	CLROVR:	PUSHJ P,LOKCTL
   298	000333'	260740	000547'		PUSHJ P,ENTCTL
   299	000334'	402000	000004*		SETZM BLOCK1+4
   300	000335'	402000	000003*		SETZM OVRIDE
   301	000336'	254000	000134'		JRST WRCTL
   302
   303	000337'	200040	001316'	ISEARCH: MOVE A,[XWD USRTAB,USRTAB+1]
   304	000340'	402000	000751'		SETZM USRTAB
   305	000341'	251040	001251'		BLT A,CURTAB+MAXUSR
   306	000342'	402000	001251'		SETZM USRDEX
   307	000343'	200700	001317'		MOVE JOBN,[XWD 20,12]
   308	000344'	047700	000041		GETTAB JOBN,
   309	000345'			BADGTT:	MAKERR 22,JOB,@THISYS,NXTJ^XLIST
   310	000354'	263740	000000		POPJ P,0
   311
   312				;SEARCH THRU USERS LOGGED IN WHO HAVE BUDGETS
   313	000355'	201300	000006	SEARCH:	MOVEI N,6
   314	000356'	504300	000016		HRL N,JOBN
   315	000357'	047300	000041		GETTAB N,	;LOOK UP JBTPRV WORD FOR JOB
   316	000360'	254000	000345'		 JRST BADGTT
   317	000361'	606300	002000		TRNN N,2000
   318	000362'	254000	000411'		JRST CHKN	;USER DOES NOT HAVE A BUDGET
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-7
JOB002.MAC	 9-OCT-80 11:23	

   319	000363'	211300	000022		MOVNI N,22
   320	000364'	504300	000016		HRL N,JOBN
   321	000365'	047300	000041		GETTAB N,	;GET FIRST HALF OF USR NAME
   322	000366'	254000	000345'		JRST BADGTT
   323	000367'	322300	000411'		JUMPE N,CHKN
   324	000370'	211340	000021		MOVNI N1,21
   325	000371'	504340	000016		HRL N1,JOBN
   326	000372'	047340	000041		GETTAB N1,
   327	000373'	254000	000345'		JRST BADGTT
   328	000374'	260740	000621'		PUSHJ P,FNDUSR	;NAME IN N,N1
   329	000375'	254000	000411'		JRST CHKN	;USER NOT IN LUD???????
   330	000376'	135100	000744'		LDB B,CBTPTR	;GET CONTROL BIT
   331	000377'	322100	000411'		JUMPE B,CHKN	;IF BUDGET NOT SET, SKIP USER
   332	000400'	350017	000000		AOS (P)
   333	000401'	200440	001251'		MOVE N3,USRDEX	;GET INDEX INTO USER TABLE
   334	000402'	550352	000301*		HRRZ N1,BLOCK1(INDEX)	;GET UUN OF USER
   335	000403'	550051	000751'		HRRZ A,USRTAB(N3)
   336	000404'	316040	000007		CAMN A,N1
   337	000405'	263740	000000		POPJ P,0
   338	000406'	367440	000403'		SOJG N3,.-3
   339	000407'	350017	000000		AOS (P)
   340	000410'	263740	000000		POPJ P,0
   341	000411'	367700	000355'	CHKN:	SOJG JOBN,SEARCH
   342	000412'	263740	000000		POPJ P,0
   343
   344				;CHECK EACH USER LOGGED IN
   345				;IF THE CURRENT TRU'S + TOTAL > BUDGET, HANG USER
   346	000413'	260740	000337'	CHKHNG:	PUSHJ P,ISEARCH
   347	000414'	261740	000016		PUSH P,JOBN
   348	000415'	260740	000355'	NXTJOB:	PUSHJ P,SEARCH
   349	000416'	254000	000447'		JRST NXTCHK-2	;NO MORE JOBS
   350	000417'	254000	000441'		JRST ADDTRU	;ALLREADY IN TABLE
   351	000420'	350000	001251'		AOS USRDEX	;NEW USER
   352	000421'	200440	001251'		MOVE N3,USRDEX
   353	000422'	200312	000005*		MOVE N,BLOCK1+5(INDEX)
   354	000423'	202311	001051'		MOVEM N,BUDTAB(N3)
   355	000424'	552351	000751'		HRRZM N1,USRTAB(N3)
   356	000425'	200312	000402*		MOVE N,BLOCK1(INDEX)	;GET PPN
   357	000426'	260740	000676'		PUSHJ P,SETRDX
   358	000427'	200613	000425*		MOVE STR,BLOCK1(STRDEX)
   359	000430'	404600	001312'		AND STR,[XWD 777777,770000]
   360	000431'	202600	000433'		MOVEM STR,.+2
   361	000432'	041100	000017		INIT UFD,17
   362	000433'	000000	000000		0
   363	000434'	000000	000000		0
   364	000435'	254000	000010'		JRST INIERR
   365	000436'	260740	000615'		PUSHJ P,LOKUFD
   366	000437'	200140	001307'		MOVE C,UFDFIL+31	;GET TOTAL FOR DAY
   367	000440'	202151	001151'		MOVEM C,CURTAB(N3)
   368	000441'	551340	000004	ADDTRU:	HRRZI N1,4
   369	000442'	504340	000016		HRL N1,JOBN
   370	000443'	047340	000041		GETTAB N1,	;GET CURRENT TRU'S FOR JOB
   371	000444'	254000	000345'		 JRST BADGTT
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-8
JOB002.MAC	 9-OCT-80 11:23	

   372	000445'	272351	001151'		ADDM N1,CURTAB(N3)
   373	000446'	367700	000415'		SOJG JOBN,NXTJOB
   374	000447'	071100	000000		RELEASE UFD,
   375	000450'	262740	000016		POP P,JOBN
   376	000451'	211300	000023	NXTCHK:	MOVNI N,23
   377	000452'	504300	000016		HRL  N,JOBN
   378	000453'	047300	000041		GETTAB N,	;GET GAN,UUN FOR JOB
   379	000454'	254000	000345'		 JRST BADGTT
   380	000455'	550040	000006		HRRZ A,N
   381	000456'	200440	001251'		MOVE N3,USRDEX
   382	000457'	550311	000751'		HRRZ N,USRTAB(N3)
   383	000460'	312300	000001		CAME N,A	;FIND UUN IN TABLE
   384	000461'	254000	000471'		JRST NUSR
   385	000462'	200311	001151'		MOVE N,CURTAB(N3)
   386	000463'	315311	001051'		CAMGE N,BUDTAB(N3)	;SHOULD JOB BE HUNG?
   387	000464'	254000	000467'		JRST NXTJ1
   388				;	MOVNI A,27
   389				;	HRL A,JOBN	;SEE IF JOB ALLREADY DETACHED
   390				;	GETTAB A,
   391				;	JRST BADGTT
   392				;	HLRZS A
   393				;	JUMPN A,HNGDET+1	;JOB IS NOT DETACHED, SEND A DISCONNECT
   394				;	HRLZ A,JOBN
   395				;	GETTAB A,	;GET JOB STATUS WORD
   396				;	 JRST BADGTT
   397				;	TLNE A,400000	;COMMAND WAIT
   398				;	JRST HNGDET	;YES, KILL JOB
   399				;	TLNN A,200000	;IF JOB NOT IN ^C STATE WHILE DETACHED,
   400				;	TRNE A,20000
   401				;	JRST HNGDET	;KILL IT!
   402				;	JUMPGE A,CHKN	;^C STATE - LET IT BE
   403	000465'	260740	000646'	HNGDET:	PUSHJ P,HANGIT
   404	000466'	260740	000641'		PUSHJ P,DISCIT
   405	000467'	367700	000451'	NXTJ1:	SOJG JOBN,NXTCHK
   406	000470'	263740	000000		POPJ P,0
   407	000471'	367440	000457'	NUSR:	SOJG N3,NXTCHK+6
   408	000472'	254000	000467'		JRST NXTJ1
   409
   410				;LOOKUP CONTROL FILE
   411	000473'	260740	000563'	LOKCTL:	PUSHJ P,SETUPC
   412	000474'	076040	001252'		LOOKUP DSK,LK1FIL
   413	000475'			LOKERR:	MAKERR 10,JOB,@THISYS,NXTJ^XLIST
   414	000504'	066040	000153*		INPUT DSK,BL1LST
   415	000505'	063040	760000		STATZ DSK,760000
   416	000506'			IOERR:	MAKERR 11,JOB,@THISYS,NXTJ^XLIST
   417	000515'	200040	000427*		MOVE A,BLOCK1
   418	000516'	312040	001320'		CAME A,[XWD 525252,104]
   419					MAKERR 21,JOB,@THISYS,NXTJ^XLIST
   420	000526'	200040	000001*		MOVE A,BLOCK1+1
   421	000527'	231040	000144		IDIVI A,^D100
   422	000530'	221040	000074		IMULI A,^D60
   423	000531'	270040	000002		ADD A,B
   424	000532'	202040	000100*		MOVEM A,STRTRU	;START TIME
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-9
JOB002.MAC	 9-OCT-80 11:23	

   425	000533'	200040	000002*		MOVE A,BLOCK1+2
   426	000534'	231040	000144		IDIVI A,^D100
   427	000535'	221040	000074		IMULI A,^D60
   428	000536'	270040	000002		ADD A,B
   429	000537'	202040	000001*		MOVEM A,STPTRU	;STOP TIME
   430	000540'	200040	000003*		MOVE A,BLOCK1+3
   431	000541'	202040	000002*		MOVEM A,CLRTIM	;DATE & TIME TOTALS WERE LAST CLEARED
   432	000542'	200040	000004*		MOVE A,BLOCK1+4
   433	000543'	202040	000003*		MOVEM A,OVRIDE	;OVERRIDE
   434	000544'	200040	000005*		MOVE A,BLOCK1+5
   435	000545'	202040	000004*		MOVEM A,FIRSTR	;TIME FOR FIRST RUN TODAY
   436	000546'	263740	000000		POPJ P,0
   437
   438				;ENTER CONTROL FILE
   439	000547'	201100	000012	ENTCTL:	MOVEI B,^D10
   440	000550'	260740	000563'		PUSHJ P,SETUPC
   441	000551'	077040	001252'		ENTER DSK,LK1FIL
   442	000552'	334000	000000		SKIPA
   443	000553'	263740	000000		POPJ P,0
   444	000554'	550040	001255'		HRRZ A,LK1FIL+3
   445	000555'	302040	000003		CAIE A,3	;IF NOT BUSY THIS IS A REGULAR
   446	000556'	254000	000475'		JRST LOKERR	;!!ERROR!!
   447	000557'	201140	000012		MOVEI C,^D10	;DO A 10 SEC.
   448	000560'	047140	000031		SLEEP C,	;SLEEP
   449	000561'	367100	000550'		SOJG B,ENTCTL+1	;AND TRY AGAIN
   450	000562'	254000	000475'		JRST LOKERR	;TRIED 10 TIMES...GIVE UP!
   451
   452				;SET UP CONTROL FILE INFO
   453	000563'	200040	001321'	SETUPC:	MOVE A,[SIXBIT /LTCURT/]
   454	000564'	202040	001252'		MOVEM A,LK1FIL
   455	000565'	515040	444164		HRLZI A,(SIXBIT /DAT/)
   456	000566'	202040	001253'		MOVEM A,LK1FIL+1
   457	000567'	402000	001254'		SETZM LK1FIL+2
   458	000570'	200040	000746'		MOVE A,PJPPN
   459	000571'	202040	001255'		MOVEM A,LK1FIL+3
   460	000572'	263740	000000		POPJ P,0
   461
   462
   463				;LOOKUP LUD
   464	000573'	515040	546544	LOKLUD:	HRLZI A,(SIXBIT /LUD/)
   465	000574'	202040	001252'		MOVEM A,LK1FIL
   466	000575'	515040	637163		HRLZI A,(SIXBIT /SYS/)
   467	000576'	202040	001253'		MOVEM A,LK1FIL+1
   468	000577'	402040	001254'		SETZM A,LK1FIL+2
   469	000600'	200040	000747'		MOVE A,SYSPPN
   470	000601'	202040	001255'		MOVEM A,LK1FIL+3
   471	000602'	076040	001252'		LOOKUP DSK,LK1FIL
   472	000603'	254000	000475'		JRST LOKERR
   473	000604'	263740	000000		POPJ P,0
   474
   475				;LOOKUP UFD FOR PPN IN N
   476	000605'	201040	000032	LKUFST:	MOVEI A,32
   477	000606'	202040	001256'		MOVEM A,UFDFIL
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-10
JOB002.MAC	 9-OCT-80 11:23	

   478	000607'	200040	000750'		MOVE A,UFDPPN
   479	000610'	202040	001257'		MOVEM A,UFDFIL+1
   480	000611'	202300	001260'		MOVEM N,UFDFIL+2
   481	000612'	515040	654644		HRLZI A,(SIXBIT/UFD/)
   482	000613'	202040	001261'		MOVEM A,UFDFIL+3
   483	000614'	263740	000000		POPJ P,0
   484
   485	000615'	260740	000605'	LOKUFD:	PUSHJ P,LKUFST
   486	000616'	076100	001256'		LOOKUP UFD,UFDFIL
   487	000617'	402000	001307'		SETZM UFDFIL+31
   488	000620'	263740	000000		POPJ P,0
   489
   490
   491	000621'	260740	000704'	FNDUSR:	PUSHJ P,HASHER
   492	000622'	200140	000007		MOVE C,N1
   493	000623'	260740	000573'		PUSHJ P,LOKLUD
   494	000624'	074060	000007		USETI DSK,@N1
   495	000625'	066040	000504*		INPUT DSK,BL1LST
   496	000626'	063040	760000		STATZ DSK,760000
   497	000627'	254000	000506'		JRST IOERR
   498	000630'	400500	000000		SETZ INDEX,
   499	000631'	336112	000515*	FND1:	SKIPN B,BLOCK1(INDEX)
   500	000632'	263740	000000		POPJ P,0
   501					JUMPL B,[HRRZ N,B
   502	000633'	321100	001322'			JRST FNDUSR+3]
   503	000634'	316312	000004*		CAMN N,BLOCK1+4(INDEX)
   504					JRST [AOS (P)
   505	000635'	254000	001324'			POPJ P,0]
   506	000636'	135100	000745'		LDB B,SIZPTR
   507	000637'	270500	000002		ADD INDEX,B
   508	000640'	254000	000631'		JRST FND1
   509
   510	000641'	515040	000001	DISCIT:	HRLZI A,1	;DO LIKE A DISCONNECT ON A JOB NUMBER
   511	000642'	540040	000016		HRR A,JOBN
   512	000643'	047040	777746		HANG A,
   513	000644'	255000	000000		 JFCL
   514	000645'	263740	000000		POPJ P,0
   515
   516	000646'	515040	000003	HANGIT:	HRLZI A,3
   517	000647'	260740	000642'		PUSHJ P,DISCIT+1
   518	000650'	350017	000000		AOS (P)
   519	000651'	263740	000000		POPJ P,0
   520
   521				WTLOK:	SOJLE N1,[MAKERR 23,JOB,@THISYS,NORET]^XLIST
   522					SKIPA
   523					JRST .+6
   524					HRLZI A,23
   525					HRRI A,JOB
   526					HRLZI B,@THISYS
   527	000652'	363340	001326'		HRRI B,NORET]
   528	000653'	260740	000525*		PUSHJ P,ERROR
   529	000654'	201040	000001		MOVEI A,1
   530	000655'	047040	000031		SLEEP A,
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-11
JOB002.MAC	 9-OCT-80 11:23	

   531	000656'	254000	000045'	        JRST RET        ;DONT TRY AGAIN
   532	000657'	201340	000764	LOKSTR:	MOVEI N1,^D500
   533	000660'	201100	000006		MOVEI B,6	;CODE TO LOCK IT
   534	000661'	200140	000014		MOVE C,STR
   535	000662'	200200	000006		MOVE D,N
   536	000663'	200040	001334'		MOVE A,[XWD 3,B]
   537	000664'	047040	000050		STRUUO A,
   538	000665'	254000	000652'		JRST WTLOK
   539	000666'	263740	000000		POPJ P,0
   540
   541	000667'	201100	000007	NLKSTR:	MOVEI B,7	;UNLOCK CODE
   542	000670'	200200	000006		MOVE D,N
   543	000671'	200140	000014		MOVE C,STR	;STR NAME
   544	000672'	200040	001334'		MOVE A,[XWD 3,B]
   545	000673'	047040	000050		STRUUO A,
   546	000674'	255000	000000		 JFCL
   547	000675'	263740	000000		POPJ P,0
   548
   549	000676'	201540	000006	SETRDX:	MOVEI STRDEX,6
   550	000677'	270540	000012		ADD STRDEX,INDEX
   551	000700'	135040	001335'		LDB A,[POINT 1,BLOCK1+2(INDEX),27]
   552	000701'	322040	000703'		JUMPE A,.+2
   553	000702'	271540	000003		ADDI STRDEX,3
   554	000703'	263740	000000		POPJ P,0
   555	000704'	201100	000000	HASHER:	MOVEI B,0
   556	000705'	200140	001336'		MOVE C,[555555555555]
   557	000706'	200200	001337'		MOVE D,[361275431652]
   558	000707'	200240	001340'		MOVE E,[612754316523]
   559	000710'	264000	000724'		JSR RND
   560	000711'	264000	000724'		JSR RND
   561	000712'	264000	000724'		JSR RND
   562	000713'	264000	000724'		JSR RND
   563	000714'	430240	000004		XOR E,D
   564	000715'	200300	000005		MOVE N,E
   565	000716'	621300	400000		TLZ N,400000
   566	000717'	231300	001567		IDIVI N,^D887
   567	000720'	200300	000005		MOVE N,E
   568	000721'	430300	000003		XOR N,C
   569	000722'	271340	000001		ADDI N1,1
   570	000723'	263740	000000		POPJ P,0
   571
   572	000724'	000000	000000	RND:	0
   573	000725'	270200	000006		ADD D,N
   574	000726'	245300	777756		ROTC N,-22
   575	000727'	201040	000005		MOVEI A,5
   576	000730'	200402	000004	RND1:	MOVE N2,C+1(B)
   577	000731'	224400	001341'		MUL N2,[5*5*5*5*5*5*5*5*5*5*5*5*5*5*5]
   578	000732'	272442	000005		ADDM N3,D+1(B)
   579	000733'	342100	000741'		AOJE B,RND2
   580	000734'	211100	000001		MOVNI B,1
   581	000735'	602200	000001		TRNE D,1
   582	000736'	331000	000005		SKIPL E
   583	000737'	201100	000000		MOVEI B,0
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 1-12
JOB002.MAC	 9-OCT-80 11:23	

   584	000740'	250140	000005		EXCH C,E
   585	000741'	367040	000730'	RND2:	SOJG A,RND1
   586	000742'	254020	000724'		JRST @RND
   587	000743'	263740	000000		POPJ P,0
   588
   589	000744'	370112	000002*	CBTPTR:	POINT 1,BLOCK1+2(INDEX),4
   590	000745'	000712	000002*	SIZPTR:	POINT 7,BLOCK1+2(INDEX),35
   591	000746'	000006	000214	PJPPN:	6000214
   592	000747'	000001	000004	SYSPPN:	1000004
   593	000750'	000001	000001	UFDPPN:	1000001
   594			000100	MAXUSR==100
   595	000751'			USRTAB:	BLOCK MAXUSR
   596	001051'			BUDTAB:	BLOCK MAXUSR
   597	001151'			CURTAB:	BLOCK MAXUSR
   598	001251'	000000	000000	USRDEX: 0
   599	001252'			LK1FIL:	BLOCK 4
   600	001256'			UFDFIL:	BLOCK 31
   601					END
   602
NO ERRORS DETECTED
HI-SEG. BREAK IS 001342
3K CORE USED
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86 PAGE 2
JOB002.MAC	 9-OCT-80 11:23		SYMBOL TABLE

A		000001		JOBN		000016		STRTRU		000000		
ADDIT		000004	SPD	LK1FIL		001252'		STRUUO	047000	000050		
ADDTRU		000441'		LKUFST		000605'		SYSPPN		000747'		
AGN		000027'		LOKCTL		000473'		THISYS		001332'	EXT	
B		000002		LOKERR		000475'		TIMER	047000	000022		
BADGTT		000345'		LOKLUD		000573'		TODAY		000006		
BL1LST		000625'	EXT	LOKSTR		000657'		UFD		000002	SPD	
BLOCK1		000631'	EXT	LOKUFD		000615'		UFDDON		000267'		
BLOCK2		000532'	EXT	MAXUSR		000100	SPD	UFDFIL		001256'		
BNHERE		000005		MSTIME	047000	000023		UFDPPN		000750'		
BUDTAB		001051'		N		000006		UNSETJ		000214'		
C		000003		N1		000007		USRDEX		001251'		
CBTPTR		000744'		N2		000010		USRTAB		000751'		
CHGUFD		000226'		N3		000011		UUOERR		000201'		
CHKCLR		000121'		NLKSTR		000667'		WRCTL		000134'		
CHKHNG		000413'		NORET	777777	777777	SPD	WTLOK		000652'		
CHKN		000411'		NOTSET		000105'		
CLRDON		000211'		NOUFD1		000254'		
CLROVR		000332'		NOVRID		000040'		
CLRTIM		000002		NUSR		000471'		
CLRTOT		000150'		NXTBLK		000153'		
CREDIT		000270'		NXTCHK		000451'		
CURTAB		001151'		NXTJ		000000	SPD	
D		000004		NXTJ1		000467'		
DATE	047000	000014		NXTJOB		000415'		
DATLOC		000007		NXTSTR		000230'		
DATUUO	047000	777723		NXTU		000161'		
DISCIT		000641'		ONESTR		000002	SPD	
DSK		000001	SPD	OVRIDE		000003		
DUREST		000001	SPD	P		000017		
E		000005		PAMJOB		000000'	INT	
ENTCTL		000547'		PJPPN		000746'		
ERROR		000653'	EXT	RESOFF		000110'		
EXIT	047000	000012		RESON		000047'		
F		000000		RET		000045'		
FIRSTR		000004		RND		000724'		
FND1		000631'		RND1		000730'		
FNDUSR		000621'		RND2		000741'		
GETTAB	047000	000041		SEARCH		000355'		
GOBAK		000001	SPD	SETCRE		000311'		
HANG	047000	777746		SETFLG		000060'		
HANGIT		000646'		SETJA		000174'		
HASHER		000704'		SETJAL	047000	777757		
HNGDET		000465'		SETRDX		000676'		
INCDEX		000172'		SETUPC		000563'		
INCHRS	051100	000000		SETUUO	047000	000075		
INDEX		000012		SETUWP	047000	000036		
INIERR		000010'		SIZENT		000015		
IOERR		000506'		SIZPTR		000745'		
ISEARC		000337'		SLEEP	047000	000031		
JACCT		000001	SPD	STPTRU		000001		
JBTSTS		000000	SPD	STR		000014		
JOB		000002	SPD	STRDEX		000013		

JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB002.MAC	 9-OCT-80 11:23		Symbol cross reference

A	    17#	    73	    74	    76	    77	    82	   109	   110	   112	   114	   115	   119	   120	   121
	   122	   123	   124	   125	   126	   128	   129	   133	   134	   138	   139	   144	   145	   147
	   149	   150	   155	   156	   161	   162	   163	   164	   165	   170	   185	   198	   199	   201
	   202	   204	   210	   211	   213	   214	   216	   224	   229	   230	   233	   254	   255	   256
	   282	   284	   292	   293	   303	   305	   310	   335	   336	   380	   383	   414	   417	   418
	   420	   421	   422	   423	   424	   425	   426	   427	   428	   429	   430	   431	   432	   433
	   434	   435	   444	   445	   453	   454	   455	   456	   458	   459	   464	   465	   466	   467
	   468	   469	   470	   476	   477	   478	   479	   481	   482	   510	   511	   512	   516	   524
	   525	   529	   530	   536	   537	   544	   545	   551	   552	   575	   585
ADDIT	    36#	   239	   281	   288
ADDTRU	   350	   368#
AGN	    90#	    96	    99
B	    18#	    82	   130	   131	   135	   136	   138	   170	   190	   191	   204	   232	   261	   262
	   310	   330	   331	   414	   417	   420	   423	   428	   439	   449	   499	   501	   506	   507
	   526	   527	   533	   536	   541	   544	   555	   576	   578	   579	   580	   583
BADGTT	   111	   146	   200	   212	   309#	   316	   322	   327	   371	   379
BL1LST	    10%	   167	   179	   414	   495
BLOCK1	    10%	   162	   165	   185	   188	   226	   270	   293	   299	   334	   353	   356	   358	   417
	   420	   425	   430	   432	   434	   499	   503	   551	   589	   590
BLOCK2	    11%	    47	    48	    49	    50	    51	    52	    53	    54
BNHERE	    52#	    84	    86
BUDTAB	   354	   386	   596#
C	    19#	    90	    92	   231	   366	   367	   447	   448	   492	   534	   543	   556	   568	   576
	   584
CBTPTR	   190	   330	   589#
CHGUFD	   193	   224#	   286
CHKCLR	    89	   155#
CHKHNG	   105	   346#
CHKN	   318	   323	   329	   331	   341#
CLRDON	   181	   206#
CLROVR	    87	    95	    98	   297#
CLRTIM	    49#	   155	   431
CLRTOT	   158	   176#
CREDIT	   104	   261#	   277
CURTAB	   276	   283	   305	   367	   372	   385	   597#
D	    20#	   535	   542	   557	   563	   573	   578	   581
DATLOC	    54#	   120	   122	   124	   125	   128
DISCIT	   404	   510#	   517
DSK	    39#	    78	    83	   106	   166	   167	   168	   170	   179	   180	   182	   206	   412	   414
	   415	   441	   471	   494	   495	   496
DUREST	    34#	    93	    97	   101	   140	   141
E	    21#	   558	   563	   564	   567	   582	   584
ENTCTL	   160	   291	   298	   439#	   449
ERROR	    10%	    82	   170	   204	   310	   414	   417	   420	   528
F	    16#	    73	    93	    97	   101	   140	   141	   239	   250	   281	   288
FIRSTR	    51#	   262	   435
FND1	   499#	   508
FNDUSR	   328	   491#	   502
GOBAK	    57#
HANGIT	   403	   516#
HASHER	   491	   555#
HNGDET	   403#
INCDEX	   189	   192	   194#
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB002.MAC	 9-OCT-80 11:23		Symbol cross reference

INDEX	    26#	   184	   185	   188	   194	   254	   270	   334	   353	   356	   498	   499	   503	   507
	   550	   551	   589	   590
INIERR	    81#	   235	   364
IOERR	   183	   416#	   497
ISEARC	   264	   303#	   346
JACCT	    44#	   201	   213
JBTSTS	    43#	   198	   210
JOB	    42#	    82	   170	   204	   310	   414	   417	   420	   525
JOBN	    30#	   273	   277	   307	   308	   314	   320	   325	   341	   347	   369	   373	   375	   377
	   405	   511
LK1FIL	   412	   441	   444	   454	   456	   457	   459	   465	   467	   468	   470	   471	   599#
LKUFST	   236	   476#	   485
LOKCTL	    82	   159	   290	   297	   411#
LOKERR	   413#	   446	   450	   472
LOKLUD	   176	   464#	   493
LOKSTR	   228	   532#
LOKUFD	   365	   485#
MAXUSR	   305	   594#	   595	   596	   597
N	    22#	   224	   284	   313	   314	   315	   317	   319	   320	   321	   323	   353	   354	   356
	   376	   377	   378	   380	   382	   383	   385	   386	   480	   501	   503	   535	   542	   564
	   565	   566	   567	   568	   573	   574
N1	    23#	   270	   271	   272	   273	   274	   275	   276	   324	   325	   326	   334	   336	   355
	   368	   369	   370	   372	   492	   494	   521	   532	   569
N2	    24#	   178	   241	   243	   252	   283	   576	   577
N3	    25#	   269	   271	   276	   278	   280	   282	   283	   287	   333	   335	   338	   352	   354
	   355	   367	   372	   381	   382	   385	   386	   407	   578
NLKSTR	   234	   247	   541#
NORET	    59#	    82	   204	   527
NOTSET	   132	   137	   140#
NOUFD1	   238	   247#
NOVRID	    91	   100	   101#
NUSR	   384	   407#
NXTBLK	   179#	   186
NXTCHK	   349	   376#	   405	   407
NXTJ	    58#	   170	   310	   414	   417	   420
NXTJ1	   387	   405#	   408
NXTJOB	   348#	   373
NXTSTR	   226#	   257
NXTU	   185#	   195
ONESTR	    35#	   250	   281	   288
OVRIDE	    50#	    90	   300	   433
P	    31#	    82	    87	    88	    89	    95	    98	   103	   104	   105	   107	   117	   142	   157
	   158	   159	   160	   170	   171	   176	   177	   193	   204	   207	   208	   219	   225	   228
	   234	   236	   247	   258	   263	   264	   265	   279	   286	   289	   290	   291	   297	   298
	   310	   328	   332	   337	   339	   340	   342	   346	   347	   348	   357	   365	   375	   403
	   404	   406	   411	   414	   417	   420	   436	   440	   443	   460	   473	   483	   485	   488
	   491	   493	   500	   504	   505	   514	   517	   518	   519	   528	   539	   547	   554	   570
	   587
PAMJOB	    13	    73#
PJPPN	   458	   591#
RESOFF	   102	   144#
RESON	   103	   109#
RET	    94	   106#	   148	   152	   531
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB002.MAC	 9-OCT-80 11:23		Symbol cross reference

RND	   559	   560	   561	   562	   572#	   586
RND1	   576#	   585
RND2	   579	   585#
SEARCH	   265	   313#	   341	   348
SETCRE	   266	   278#
SETFLG	    88	   119#
SETJA	   177	   198#	   279
SETRDX	   225	   357	   549#
SETUPC	   411	   440	   453#
SIZENT	    29#	   187	   194	   255
SIZPTR	   187	   506	   590#
STPTRU	    48#	   136	   139	   429
STR	    28#	   226	   227	   232	   285	   358	   359	   360	   534	   543
STRDEX	    27#	   226	   253	   256	   358	   549	   550	   553
STRTRU	    47#	   135	   424
SYSPPN	   469	   592#
THISYS	    11%	    82	   170	   204	   310	   414	   417	   420	   526
TODAY	    53#	    77	   119	   156	   161	   261	   292
UFD	    40#	   233	   237	   245	   248	   249	   361	   374	   486
UFDDON	   251	   252	   258#
UFDFIL	   237	   241	   243	   244	   245	   366	   477	   479	   480	   482	   486	   487	   600#
UFDPPN	   478	   593#
UNSETJ	   207	   210#	   289
USRDEX	   268	   269	   278	   306	   333	   351	   352	   381	   598#
USRTAB	   271	   282	   303	   304	   335	   355	   382	   595#
UUOERR	   116	   127	   151	   203#	   215
WRCTL	   166#	   294	   301
WTLOK	   521#	   538
JOB002 - JOB 2 FOR ALL PDP-10'S	MACRO 12.5-46.0 17:50 13-NOV-86
JOB002.MAC	 9-OCT-80 11:23		Macro/Opdef cross reference

DATE	    76
DATUUO	   126
EXIT	   218
GETTAB	   110	   145	   199	   211	   274	   308	   315	   321	   326	   370	   378
HANG	   512
INCHRS	   216
MAKERR	    62#	    81	   169	   203	   309	   413	   416	   419	   521
MSTIME	   133	   163
SETJAL	   202	   214
SETUUO	   115	   150
SETUWP	    74
SLEEP	   448	   530
STRUUO	   537	   545
TIMER	   121JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1
JOB003.MAC	26-AUG-82 16:14	

     1				TITLE JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.
     2
     3	000000'			HISEG	;ALL GOES IN HIGH SEGMENT
     4
     5
     6
     7				EXTERN ERROR, SYSTAB
     8				EXTERN SAVAC, THISYS
     9				EXTERN BL1LST, BLOCK1, BLOCK2
    10
    11				INTERN PAMJOB
    12
    13				;VERSION 6      ;CORRECT BUG IN READING SYSTAB, INDEXED DEC AND READ DEC
    14				                ;MOVE A LOCATION TO REGIS C BEFORE ALL JUMPS TO OPNTAP
    15				;VERSION 5	;REWRITE FOR NEW PJ 5/17/78
    16				;VERSION 4	;REWRITE 11/17/77 J. MARCIN
    17
    18
    19				;AC'S
    20			000001	A=1
    21			000002	B=2
    22			000003	C=3
    23			000006	BP=6
    24			000010	INDEX=10
    25			000011	SYSTEM=11
    26			000016	CH=16
    27			000017	P=17
    28
    29			000003	JOB==3
    30
    31			000001	MINDEX==BLOCK2+1	;MASTER SEARCH INDEX
    32			000004	LSTCHG==BLOCK2+4	;LAST CHANGE
    33
    34			000200	MAXWD==^D128
    35				;IO CHANNEL
    36			000016	CHK=16
    37
    38				;RETURNS FROM ERROR
    39			000001	GOBAK==1
    40			000000	NXTJ==0
    41		777777	777777	NORET==-1
    42
    43				DEFINE MAKERR (ERRN, JN, SN, RET)
    44				<XLIST
    45					SKIPA
    46					JRST .+6
    47					HRLZI A,ERRN
    48					HRRI A,JN
    49					HRLZI B,SN
    50					HRRI B,RET
    51					PUSHJ P,ERROR
    52				LIST>
    53
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-2
JOB003.MAC	26-AUG-82 16:14	

    54	000000'	403040	000011	PAMJOB:	SETZB A,SYSTEM
    55	000001'	047040	000036		SETUWP A,	;ALLOW WRITING IN HIGH SEGMENT
    56	000002'	255000	000000		 JFCL
    57	000003'	202740	000017*		MOVEM P,SAVAC+17
    58	000004'	041040	000017		INIT 1,17
    59	000005'	446353	000000		SIXBIT /DSK/
    60	000006'	000000	000000		0
    61	000007'			ERRINI:	MAKERR 2,JOB,@THISYS,NORET^XLIST
    62	000016'	211400	000170		MOVNI INDEX,^D120
    63	000017'	336050	000170*	NSYS:	SKIPN A,SYSTAB+^D120(INDEX)
    64	000020'	254000	000023'		JRST NSYS1
    65	000021'	603040	001000		TLNE A,1000	;PDP-10?
    66	000022'	254000	000030'		JRST FNDSYS	;YES
    67	000023'	341400	000017'	NSYS1:	AOJL INDEX,NSYS
    68	000024'	254000	000175'		JRST LSTSYS
    69	000025'	200400	000404'	NXTSYS:	MOVE INDEX,SINDEX
    70	000026'	402000	000405'		SETZM FINDEX
    71	000027'	254000	000023'		JRST NSYS1
    72
    73				;FOUND A NEW PDP-10 SYSTEM - CHECK FOR ANY REQUESTS
    74	000030'	202400	000404'	FNDSYS:	MOVEM INDEX,SINDEX	;SAVE SYSTEM NO.
    75	000031'	400040	000000		SETZ A,		;OPEN FOR INPUT AND READ
    76	000032'	201140	000143'	        MOVEI C,BADRET
    77	000033'	260740	000226'		PUSHJ P,OPNTAP
    78	000034'	201040	000001		MOVEI A,1
    79	000035'	202040	000406'		MOVEM A,CBLK
    80	000036'	200400	000404'	NREC:	MOVE INDEX,SINDEX
    81	000037'	550150	000170*		HRRZ C,SYSTAB+^D120(INDEX)
    82	000040'	260740	000115'		PUSHJ P,FINREQ
    83	000041'	254000	000025'		JRST NXTSYS
    84	000042'	202400	000405'		MOVEM INDEX,FINDEX	;FILE INDEX
    85	000043'	336000	000011		SKIPN SYSTEM
    86	000044'	254000	000047'		JRST .+3
    87	000045'	200040	000011		MOVE A,SYSTEM
    88	000046'	260740	000167'		PUSHJ P,ZAPIT
    89	000047'	202140	000011		MOVEM C,SYSTEM
    90	000050'	260740	000272'		PUSHJ P,MAKSTR
    91	000051'	260740	000304'		PUSHJ P,GETCIR
    92	000052'	200400	000405'		MOVE INDEX,FINDEX
    93	000053'	200300	000533'	SENENT:	MOVE BP,[POINT 6,BLOCK1(INDEX),5]
    94	000054'	514040	000402'		HRLZ A,CHAN
    95	000055'	541040	000004		HRRI A,4
    96	000056'	201100	000005		MOVEI B,5
    97	000057'	134700	000006		ILDB CH,BP
    98	000060'	042056	000000		AUXCAL A,(CH)
    99	000061'	367100	000057'		SOJG B,.-2
   100	000062'	200300	000534'		MOVE BP,[POINT 8,BLOCK1+1(INDEX),9]
   101	000063'	135700	000006		LDB CH,BP
   102	000064'	042056	000000		AUXCAL A,(CH)
   103	000065'	134700	000006		ILDB CH,BP
   104	000066'	042056	000000		AUXCAL A,(CH)
   105	000067'	200300	000535'		MOVE BP,[POINT 8,BLOCK1+1(INDEX),27]
   106	000070'	135700	000006		LDB CH,BP
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-3
JOB003.MAC	26-AUG-82 16:14	

   107	000071'	042056	000000		AUXCAL A,(CH)
   108	000072'	134700	000006		ILDB CH,BP
   109	000073'	042056	000000		AUXCAL A,(CH)
   110	000074'	541040	000001		HRRI A,1
   111	000075'	042040	000016		AUXCAL A,CH
   112	000076'	254000	000075'		JRST .-1
   113	000077'	302700	000151		CAIE CH,151
   114	000100'	254000	000143'		JRST BADRET
   115	000101'	474040	000000	CHGENT:	SETO A,
   116	000102'	201140	000257'		MOVEI C,IOERR
   117	000103'	260740	000226'		PUSHJ P,OPNTAP
   118	000104'	200400	000405'		MOVE INDEX,FINDEX
   119	000105'	476010	000000*		SETOM BLOCK1(INDEX)
   120	000106'	075060	000406'		USETO 1,@CBLK
   121	000107'	067040	000000*		OUTPUT 1,BL1LST
   122	000110'	063040	760000		STATZ 1,760000
   123	000111'	254000	000257'		JRST IOERR
   124	000112'	070040	000000		CLOSE 1,
   125	000113'	200400	000405'		MOVE INDEX,FINDEX
   126	000114'	254000	000036'		JRST NREC
   127
   128
   129	000115'	200400	000405'	FINREQ:	MOVE INDEX,FINDEX
   130	000116'	336110	000105*		SKIPN B,BLOCK1(INDEX)
   131	000117'	263740	000000	NOREQ:	POPJ P,0
   132	000120'	400040	000000		SETZ A,
   133	000121'	246040	000014		LSHC A,^D12
   134	000122'	275040	000020		SUBI A,20
   135	000123'	221040	000012		IMULI A,^D10
   136	000124'	261740	000001		PUSH P,A
   137	000125'	400040	000000		SETZ A,
   138	000126'	246040	000006		LSHC A,6
   139	000127'	275040	000020		SUBI A,20
   140	000130'	262740	000002		POP P,B
   141	000131'	270040	000002		ADD A,B
   142	000132'	316040	000003		CAMN A,C	;SYSTEM WE'RE LOOKING FOR?
   143					JRST [AOS (P)
   144	000133'	254000	000536'			POPJ P,0]
   145	000134'	271400	000002		ADDI INDEX,2
   146	000135'	305400	000200		CAIGE INDEX,MAXWD
   147	000136'	254000	000116'		JRST FINREQ+1
   148	000137'	201140	000117'		MOVEI C,NOREQ
   149	000140'	260740	000255'		PUSHJ P,RDBLK
   150	000141'	350000	000406'		AOS CBLK
   151	000142'	254000	000116'		JRST FINREQ+1
   152
   153	000143'	302700	000153	BADRET:	CAIE CH,153	;IF REQUEST NOT FOUND
   154	000144'	254000	000155'		JRST BADR1
   155					MAKERR 25,JOB,@THISYS,GOBAK^XLIST
   156	000154'	263740	000000		POPJ P,0
   157	000155'			BADR1:	MAKERR 26,JOB,@THISYS,GOBAK	;IF OTHER ERROR
   158	000164'	263740	000000		POPJ P,0
   159
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-4
JOB003.MAC	26-AUG-82 16:14	

   160				;PROBLEM WITH CIRCUIT (TIME OUT OR CIR ZAP)
   161	000165'	260740	000167'	CIRPRB:	PUSHJ P,ZAPIT
   162	000166'	254000	000025'		JRST NXTSYS
   163	000167'	205040	300000	ZAPIT:	MOVSI A,300000	;DISABLE
   164	000170'	047040	777744		INTENB A,
   165	000171'	255000	000000		 JFCL
   166	000172'	474040	000000		SETO A,
   167	000173'	047040	777733		ZAPCIR A,
   168	000174'	263740	000000		POPJ P,0
   169
   170	000175'	200040	000011	LSTSYS:	MOVE A,SYSTEM
   171	000176'	260740	000167'		PUSHJ P,ZAPIT
   172	000177'	070040	000000		CLOSE 1,
   173	000200'	400040	000000		SETZ A,
   174	000201'	201140	000223'	        MOVEI C,RETURN
   175	000202'	260740	000226'		PUSHJ P,OPNTAP
   176	000203'	400400	000000		SETZ INDEX,
   177	000204'	331050	000116*	LST1:	SKIPL A,BLOCK1(INDEX)
   178				LST2:	JRST [JUMPN A,RETURN
   179	000205'	254000	000540'			JRST RENAME]
   180	000206'	271400	000002		ADDI INDEX,2
   181	000207'	305400	000200		CAIGE INDEX,MAXWD
   182	000210'	254000	000204'		JRST LST1
   183	000211'	400040	000000		SETZ A,
   184	000212'	201140	000205'	        MOVEI C,LST2
   185	000213'	260740	000255'		PUSHJ P,RDBLK
   186	000214'	254000	000205'		JRST LST2
   187
   188	000215'	402000	000414'	RENAME:	SETZM LK1FIL
   189	000216'	402000	000415'		SETZM LK1FIL+1
   190	000217'	402000	000416'		SETZM LK1FIL+2
   191	000220'	402000	000417'		SETZM LK1FIL+3
   192	000221'	055040	000414'		RENAME 1,LK1FIL
   193	000222'	255000	000000		 JFCL
   194	000223'	071040	000000	RETURN:	RELEASE 1,
   195	000224'	200740	000017*		MOVE P,SAVAC+17
   196	000225'	263740	000000		POPJ P,0
   197
   198	000226'	200100	000542'	OPNTAP:	MOVE B,[SIXBIT /SPOOL/]
   199	000227'	202100	000414'		MOVEM B,LK1FIL
   200	000230'	515100	644160		HRLZI B,(SIXBIT /TAP/)
   201	000231'	202100	000415'		MOVEM B,LK1FIL+1
   202	000232'	402000	000416'		SETZM LK1FIL+2
   203	000233'	200100	000401'		MOVE B,PJPPN
   204	000234'	202100	000417'		MOVEM B,LK1FIL+3
   205	000235'	076040	000414'		LOOKUP 1,LK1FIL
   206	000236'	254000	000223'		 JRST RETURN
   207	000237'	322040	000253'		JUMPE A,OPNEND
   208	000240'	402000	000416'		SETZM LK1FIL+2
   209	000241'	200100	000401'		MOVE B,PJPPN
   210	000242'	202100	000417'		MOVEM B,LK1FIL+3
   211	000243'	077040	000414'		ENTER 1,LK1FIL
   212	000244'			BADR10:	MAKERR 10,JOB,@SYSTEM,NXTJ^XLIST
   213	000253'	260740	000255'	OPNEND: PUSHJ P,RDBLK
   214	000254'	263740	000000		POPJ P,0
   215
   216	000255'	066040	000107*	RDBLK:	INPUT 1,BL1LST
   217	000256'	063040	740000		STATZ 1,740000
   218	000257'			IOERR:	MAKERR 11,JOB,@SYSTEM,NXTJ^XLIST
   219	000266'	063040	020000		STATZ 1,20000
   220	000267'	254020	000003		JRST @C
   221	000270'	400400	000000		SETZ INDEX,
   222	000271'	263740	000000		POPJ P,0
   223
   224	000272'	200300	000543'	MAKSTR:	MOVE BP,[POINT 7,LOGSTR+1,27]
   225	000273'	200040	000011		MOVE A,SYSTEM
   226	000274'	231040	000012		IDIVI A,^D10
   227	000275'	271040	000060		ADDI A,60
   228	000276'	136040	000006		IDPB A,BP
   229	000277'	271100	000060		ADDI B,60
   230	000300'	136100	000006		IDPB B,BP
   231	000301'	201700	000073		MOVEI CH,";"
   232	000302'	136700	000006		IDPB CH,BP
   233	000303'	263740	000000		POPJ P,0
   234
   235
   236	000304'	201040	000526'	GETCIR:	MOVEI A,LOGSTR
   237	000305'	047040	777734		CREAUX A,
   238					 JRST [POP P,0
   239	000306'	254000	000544'			JRST NXTSYS]
   240	000307'	202040	000402'		MOVEM A,CHAN
   241	000310'	507000	000001		HRLS A
   242	000311'	541040	000004		HRRI A,4
   243	000312'	042040	000015		AUXCAL A,15	;2 CR'S
   244	000313'	042040	000015		AUXCAL A,15
   245	000314'	541040	000005		HRRI A,5
   246	000315'	515140	440700		HRLZI C,440700	;SEND START UP STRING
   247	000316'	541140	000407'		HRRI C,GOMES
   248	000317'	042040	000003		AUXCAL A,C
   249	000320'	201040	000420'		MOVEI A,TRPTAB
   250	000321'	505040	000006		HRLI A,6
   251	000322'	047040	777745		INTADR A,	;DISABLE AND CLEAR INTERRUPT SYSTEM
   252	000323'	255000	000000		 JFCL
   253	000324'	550040	000402'		HRRZ A,CHAN
   254	000325'	505040	007001		HRLI A,7001
   255	000326'	047040	777736		TINASS A,	;CIRCUIT ZAP ON CHAN 1
   256	000327'	255000	000000		 JFCL
   257	000330'	400040	000000		SETZ A,
   258	000331'	047040	777741		SETTIM A,	;RESET TIMER
   259	000332'	255000	000000		 JFCL
   260	000333'	505040	000004		HRLI A,4
   261	000334'	541040	000002		HRRI A,2
   262	000335'	047040	777742		INTASS A,	;TIMER ON CHAN 2
   263	000336'	255000	000000		 JFCL
   264	000337'	550040	000402'		HRRZ A,CHAN
   265	000340'	205040	700000		MOVSI A,700000
   266	000341'	047040	777744		INTENB A,	;ENABLE INTERRUPTS ON CHAN 1 AND 2
   267	000342'	255000	000000		 JFCL
   268	000343'	200040	000546'		MOVE A,[XWD 1,^D240]	;FOUR MINUTES
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-6
JOB003.MAC	26-AUG-82 16:14	

   269	000344'	047040	777741		SETTIM A,
   270	000345'	255000	000000		 JFCL
   271	000346'	402000	000403'		SETZM NCHARS
   272	000347'	514040	000402'		HRLZ A,CHAN
   273	000350'	541040	000001		HRRI A,1
   274	000351'	042040	000016	TRYAGN:	AUXCAL A,CH
   275	000352'	254000	000351'		 JRST .-1
   276	000353'	302700	000001		CAIE CH,1
   277	000354'	254000	000351'		JRST TRYAGN
   278	000355'	042040	000016		AUXCAL A,CH
   279	000356'	254000	000355'		JRST .-1
   280	000357'	302700	000002		CAIE CH,2
   281	000360'	254000	000351'		 JRST TRYAGN
   282	000361'	042040	000016		AUXCAL A,CH
   283	000362'	254000	000361'		 JRST .-1
   284	000363'	302700	000003		CAIE CH,3
   285	000364'	254000	000351'		 JRST TRYAGN
   286	000365'	042040	000016		AUXCAL A,CH
   287	000366'	254000	000365'		 JRST .-1
   288	000367'	302700	000004		CAIE CH,4
   289	000370'	254000	000351'		 JRST TRYAGN
   290	000371'	350000	000403'		AOS NCHARS
   291	000372'	514040	000402'		HRLZ A,CHAN
   292	000373'	541040	000004		HRRI A,4
   293	000374'	042040	000001		AUXCAL A,1
   294	000375'	042040	000002		AUXCAL A,2
   295	000376'	042040	000003		AUXCAL A,3
   296	000377'	042040	000004		AUXCAL A,4
   297	000400'	263740	000000		POPJ P,0
   298
   299
   300	000401'	000006	000214	PJPPN:	6000214
   301	000402'	000000	000000	CHAN:	0
   302	000403'	000000	000000	NCHARS:	0
   303	000404'	000000	000000	SINDEX:	0	;INDEX INTO SYSTAB
   304	000405'	000000	000000	FINDEX:	0	;INDEX INTO FILE INFO
   305	000406'	000000	000000	CBLK:	0	;CURRENT BLOCK BEING WRITTEN INTO
   306	000407'	516132	420230	GOMES:	ASCIZ /SET LOGOUT
	000410'	476171	752650
   307	000411'	064252	252634	RUN TAPCHG
	000412'	202510	150206
   308	000413'	442161	505000	/
   309
   310	000414'			LK1FIL:	BLOCK 4
   311	000420'	000000	000000	TRPTAB:	0
   312	000421'	000000	000165'	CIRPRB
   313	000422'	000000	000000		0
   314	000423'	000000	000165'	CIRPRB
   315	000424'				BLOCK ^D66
   316	000526'	516472	040632	LOGSTR:	ASCIZ /SSPAMBIN:38/
	000527'	412231	635146
	000530'	340000	000000
   317	000531'				BLOCK 2
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-7
JOB003.MAC	26-AUG-82 16:14	

   318				END
   319
NO ERRORS DETECTED
HI-SEG. BREAK IS 000547
3K CORE USED
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 2
JOB003.MAC	26-AUG-82 16:14		SYMBOL TABLE

A		000001		RDBLK		000255'		
B		000002		RENAME		000215'		
BADR1		000155'		RETURN		000223'		
BADR10		000244'		SAVAC		000000	EXT	
BADRET		000143'		SENENT		000053'		
BL1LST		000255'	EXT	SETTIM	047000	777741		
BLOCK1		000533'	EXT	SETUWP	047000	000036		
BLOCK2		000000	EXT	SINDEX		000404'		
BP		000006		SYSTAB		000000	EXT	
C		000003		SYSTEM		000011		
CBLK		000406'		THISYS		000161'	EXT	
CH		000016		TINASS	047000	777736		
CHAN		000402'		TRPTAB		000420'		
CHGENT		000101'		TRYAGN		000351'		
CHK		000016		ZAPCIR	047000	777733		
CIRPRB		000165'		ZAPIT		000167'		
CREAUX	047000	777734		
ERRINI		000007'		
ERROR		000265'	EXT	
FINDEX		000405'		
FINREQ		000115'		
FNDSYS		000030'		
GETCIR		000304'		
GOBAK		000001	SPD	
GOMES		000407'		
INDEX		000010		
INTADR	047000	777745		
INTASS	047000	777742		
INTENB	047000	777744		
IOERR		000257'		
JOB		000003	SPD	
LK1FIL		000414'		
LOGSTR		000526'		
LST1		000204'		
LST2		000205'		
LSTCHG		000004	SPD	
LSTSYS		000175'		
MAKSTR		000272'		
MAXWD		000200	SPD	
MINDEX		000001	SPD	
NCHARS		000403'		
NOREQ		000117'		
NORET	777777	777777	SPD	
NREC		000036'		
NSYS		000017'		
NSYS1		000023'		
NXTJ		000000	SPD	
NXTSYS		000025'		
OPNEND		000253'		
OPNTAP		000226'		
P		000017		
PAMJOB		000000'	INT	

JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86
JOB003.MAC	26-AUG-82 16:14		Symbol cross reference

A	    20#	    54	    55	    62	    63	    65	    75	    78	    79	    87	    94	    95	    98	   102
	   104	   107	   109	   110	   111	   115	   132	   133	   134	   135	   136	   137	   138	   139
	   141	   142	   156	   158	   163	   164	   166	   167	   170	   173	   177	   178	   183	   207
	   213	   219	   225	   226	   227	   228	   236	   237	   240	   241	   242	   243	   244	   245
	   248	   249	   250	   251	   253	   254	   255	   257	   258	   260	   261	   262	   264	   265
	   266	   268	   269	   272	   273	   274	   278	   282	   286	   291	   292	   293	   294	   295
	   296
B	    21#	    62	    96	    99	   130	   140	   141	   156	   158	   198	   199	   200	   201	   203
	   204	   209	   210	   213	   219	   229	   230
BADR1	   154	   157#
BADR10	   212#
BADRET	    76	   114	   153#
BL1LST	     9%	   121	   216
BLOCK1	     9%	    93	   100	   105	   119	   130	   177
BLOCK2	     9%	    31	    32
BP	    23#	    93	    97	   100	   101	   103	   105	   106	   108	   224	   228	   230	   232
C	    22#	    76	    81	    89	   116	   142	   148	   174	   184	   220	   246	   247	   248
CBLK	    79	   120	   150	   305#
CH	    26#	    97	    98	   101	   102	   103	   104	   106	   107	   108	   109	   111	   113	   153
	   231	   232	   274	   276	   278	   280	   282	   284	   286	   288
CHAN	    94	   240	   253	   264	   272	   291	   301#
CHGENT	   115#
CHK	    36#
CIRPRB	   161#	   312	   314
ERRINI	    61#
ERROR	     7%	    62	   156	   158	   213	   219
FINDEX	    70	    84	    92	   118	   125	   129	   304#
FINREQ	    82	   129#	   147	   151
FNDSYS	    66	    74#
GETCIR	    91	   236#
GOBAK	    39#	   156	   158
GOMES	   247	   306#
INDEX	    24#	    62	    63	    67	    69	    74	    80	    81	    84	    92	    93	   100	   105	   118
	   119	   125	   129	   130	   145	   146	   176	   177	   180	   181	   221
IOERR	   116	   123	   218#
JOB	    29#	    62	   156	   158	   213	   219
LK1FIL	   188	   189	   190	   191	   192	   199	   201	   202	   204	   205	   208	   210	   211	   310#
LOGSTR	   224	   236	   316#
LST1	   177#	   182
LST2	   178#	   184	   186
LSTCHG	    32#
LSTSYS	    68	   170#
MAKSTR	    90	   224#
MAXWD	    34#	   146	   181
MINDEX	    31#
NCHARS	   271	   290	   302#
NOREQ	   131#	   148
NORET	    41#	    62
NREC	    80#	   126
NSYS	    63#	    67
NSYS1	    64	    67#	    71
NXTJ	    40#	   213	   219
NXTSYS	    69#	    83	   162	   239
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86
JOB003.MAC	26-AUG-82 16:14		Symbol cross reference

OPNEND	   207	   213#
OPNTAP	    77	   117	   175	   198#
P	    27#	    57	    62	    77	    82	    88	    90	    91	   117	   131	   136	   140	   143	   144
	   149	   156	   158	   161	   168	   171	   175	   185	   195	   196	   213	   214	   219	   222
	   233	   238	   297
PAMJOB	    11	    54#
PJPPN	   203	   209	   300#
RDBLK	   149	   185	   213	   216#
RENAME	   179	   188#
RETURN	   174	   178	   194#	   206
SAVAC	     8%	    57	   195
SENENT	    93#
SINDEX	    69	    74	    80	   303#
SYSTAB	     7%	    63	    81
SYSTEM	    25#	    54	    85	    87	    89	   170	   213	   219	   225
THISYS	     8%	    62	   156	   158
TRPTAB	   249	   311#
TRYAGN	   274#	   277	   281	   285	   289
ZAPIT	    88	   161	   163#	   171
JOB003 - JOB 3 FOR ALL PDP-10'S - COPY SPOOLED ACTG RECORDS.	MACRO 12.5-46.0 17:51 13-NOV-86
JOB003.MAC	26-AUG-82 16:14		Macro/Opdef cross reference

CREAUX	   237
INTADR	   251
INTASS	   262
INTENB	   164	   266
MAKERR	    44#	    61	   155	   157	   212	   218
SETTIM	   258	   269
SETUWP	    55
TINASS	   255
ZAPCIR	   167JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1
JOB004.MAC	26-AUG-82 17:13	

     1				TITLE JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL
     2
     3	000000'			HISEG	;ALL GOES IN HIGH SEGMENT
     4
     5				EXTERN THISYS, ERROR
     6				EXTERN SAVAC, SYSTAB
     7				EXTERN BL1LST, BLOCK1, BLOCK2
     8
     9				INTERN PAMJOB
    10
    11				;VERSION 4 INCREASE MAXSYS TO 120
    12				;VERSION 3 PJ RE-WRITE 5/17/78
    13
    14				;AC'S
    15			000001	A=1
    16			000002	B=2
    17			000003	C=3
    18			000005	BP=5
    19			000006	CFLAG=6	;CIRCUIT FLAG = 0 IF NO CIRCUIT BUILT TO SYS H8 AS YET
    20			000010	INDEX=10
    21			000016	CH=16
    22			000017	P=17
    23
    24			000004	JOB==4
    25
    26			000001	BLK==BLOCK2+1	;BLK NUMBER WE ARE CURRENTLY READING
    27			000002	SAVCNT==BLOCK2+2	;COUNT FOR CURRENT RECORD
    28
    29			000200	MAXWD==^D128
    30			000170	MAXSYS==^D120
    31
    32				;IO CHANNEL
    33			000016	CHK=16
    34
    35				;RETURNS FROM ERROR
    36			000001	GOBAK==1
    37			000000	NXTJ==0
    38		777777	777777	NORET==-1
    39
    40				DEFINE MAKERR (ERRN, JN, SN, RET)
    41				<XLIST
    42					SKIPA
    43					JRST .+6
    44					HRLZI A,ERRN
    45					HRRI A,JN
    46					HRLZI B,SN
    47					HRRI B,RET
    48					PUSHJ P,ERROR
    49				LIST>
    50
    51	000000'	403040	000006	PAMJOB:	SETZB A,CFLAG
    52	000001'	047040	000036		SETUWP A,
    53	000002'	255000	000000		 JFCL
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-2
JOB004.MAC	26-AUG-82 17:13	

    54	000003'	202740	000017*		MOVEM P,SAVAC+17
    55	000004'	041040	000017		INIT 1,17
    56	000005'	446353	000000		SIXBIT /DSK/
    57	000006'	000000	000000		0
    58	000007'			ERRINI:	MAKERR 2, JOB, @THISYS, NORET^XLIST
    59	000016'	201040	000001		MOVEI A,1
    60	000017'	202040	000001*		MOVEM A,BLK
    61	000020'	400040	000000		SETZ A,
    62	000021'	260740	000257'		PUSHJ P,OPNTAP	;LOOKUP AND READ (SPOOL)REMCNT
    63	000022'	254000	000252'		JRST RETURN
    64	000023'	400400	000000		SETZ INDEX,
    65	000024'	331010	000000*	AGN:	SKIPL BLOCK1(INDEX)
    66	000025'	254000	000072'		JRST INCDEX
    67	000026'	336000	000006		SKIPN CFLAG
    68	000027'	260740	000076'		PUSHJ P,BLDIT
    69	000030'	514040	000325'	SENSAM:	HRLZ A,CHAN
    70	000031'	541040	000004		HRRI A,4
    71	000032'	042040	000002		AUXCAL A,2	;START TRANSMISSION
    72	000033'	200700	000013*		MOVE CH,THISYS
    73	000034'	042056	000000		AUXCAL A,(CH)	;SEND SYSTEM NUMBER
    74	000035'	042050	000000		AUXCAL A,(INDEX)	;SEND PRINTER LOCATION
    75	000036'	550710	000024*		HRRZ CH,BLOCK1(INDEX)
    76	000037'	202700	000002*		MOVEM CH,SAVCNT
    77	000040'	042056	000000		AUXCAL A,(CH)	;SEND COUNT
    78	000041'	541040	000001		HRRI A,1
    79	000042'	042040	000016		AUXCAL A,CH
    80	000043'	254000	000042'		JRST .-1	;WAIT FOR ANSWER
    81	000044'	302700	000006		CAIE CH,6
    82	000045'			ERR1:	MAKERR ^D23, JOB, @THISYS, NXTJ^XLIST
    83	000054'	261740	000010	CHGENT:	PUSH P,INDEX	;SAVE INDEX
    84	000055'	474040	000000		SETO A,
    85	000056'	260740	000257'		PUSHJ P,OPNTAP
    86	000057'	254000	000007'		JRST ERRINI
    87	000060'	262740	000010		POP P,INDEX
    88	000061'	550710	000036*		HRRZ CH,BLOCK1(INDEX)
    89	000062'	312700	000002*		CAME CH,SAVCNT
    90					JRST [CLOSE 1,
    91	000063'	254000	000447'			JRST SENSAM]
    92	000064'	553010	000061*		HRRZS BLOCK1(INDEX)
    93	000065'	075060	000001*		USETO 1,@BLK
    94	000066'	067040	000000*		OUTPUT 1,BL1LST
    95	000067'	063040	760000		STATZ 1,760000
    96	000070'	254000	000311'		JRST IOERR
    97	000071'	070040	000000		CLOSE 1,
    98	000072'	350000	000010	INCDEX:	AOS INDEX
    99	000073'	301400	000200		CAIL INDEX,MAXWD
   100					PUSHJ P,[AOS BLK
   101						SETZ A,
   102						PUSHJ P,OPNTAP
   103						JRST ERRINI
   104						SETZ INDEX,
   105	000074'	260740	000451'			POPJ P,0]
   106	000075'	254000	000024'		JRST AGN
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-3
JOB004.MAC	26-AUG-82 17:13	

   107
   108	000076'	211040	000170	BLDIT:	MOVNI A,MAXSYS
   109	000077'	135100	000457'		LDB B,[POINT 1,SYSTAB+MAXSYS(A),7]
   110	000100'	326100	000103'		JUMPN B,GOTIMS
   111	000101'	341040	000077'		AOJL A,.-2
   112	000102'	254000	000045'		JRST ERR1
   113	000103'	550041	000170*	GOTIMS:	HRRZ A,SYSTAB+MAXSYS(A)
   114	000104'	200240	000460'		MOVE BP,[POINT 7,LOGSTR]
   115	000105'	134700	000005		ILDB CH,BP
   116	000106'	302700	000072		CAIE CH,":"
   117	000107'	254000	000105'		JRST .-2
   118	000110'	231040	000012		IDIVI A,^D10
   119	000111'	322040	000114'		JUMPE A,.+3
   120	000112'	271040	000060		ADDI A,60
   121	000113'	136040	000005		IDPB A,BP
   122	000114'	271100	000060		ADDI B,60
   123	000115'	136100	000005		IDPB B,BP
   124	000116'	201700	000073		MOVEI CH,";"
   125	000117'	136700	000005		IDPB CH,BP
   126	000120'	260740	000155'		PUSHJ P,GETCIR
   127	000121'	514040	000325'		HRLZ A,CHAN
   128	000122'	541040	000001		HRRI A,1
   129	000123'	042040	000016		AUXCAL A,CH
   130	000124'	254000	000123'		JRST .-1
   131	000125'	302700	000007		CAIE CH,7	;IS ALL OK?
   132	000126'	302700	000001		CAIE CH,1
   133	000127'	254000	000253'		JRST RETURN+1	;NO, ZAP CIR
   134	000130'	350000	000006		AOS CFLAG
   135	000131'	263740	000000		POPJ P,0
   136
   137	000132'	336000	000006	ENDFIL:	SKIPN CFLAG
   138	000133'	254000	000252'		JRST RETURN
   139	000134'	514040	000325'		HRLZ A,CHAN
   140	000135'	541040	000004		HRRI A,4
   141	000136'	042040	000003		AUXCAL A,3
   142	000137'	541040	000001		HRRI A,1
   143	000140'	042040	000016		AUXCAL A,CH
   144	000141'	254000	000140'		JRST .-1
   145	000142'	302700	000006		CAIE CH,6
   146	000143'	254000	000045'		JRST ERR1
   147	000144'	254000	000252'		JRST RETURN
   148
   149	000145'	260740	000147'	CPROB:	PUSHJ P,ZAPIT
   150	000146'	254000	000252'		JRST RETURN
   151
   152	000147'	205040	300000	ZAPIT:	MOVSI A,300000	;DISABLE
   153	000150'	047040	777744		INTENB A,
   154	000151'	255000	000000		 JFCL
   155	000152'	474040	000000		SETO A,
   156	000153'	047040	777733		ZAPCIR A,
   157	000154'	263740	000000		POPJ P,0
   158
   159	000155'	201040	000332'	GETCIR:	MOVEI A,LOGSTR
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-4
JOB004.MAC	26-AUG-82 17:13	

   160	000156'	047040	777734		CREAUX A,
   161	000157'	254000	000252'		 JRST RETURN
   162	000160'	202040	000325'		MOVEM A,CHAN
   163	000161'	507000	000001		HRLS A
   164	000162'	541040	000004		HRRI A,4
   165	000163'	042040	000015		AUXCAL A,15	;2 CR'S
   166	000164'	042040	000015		AUXCAL A,15
   167	000165'	541040	000005		HRRI A,5
   168	000166'	515140	440700		HRLZI C,440700	;SEND START UP STRING
   169	000167'	541140	000336'		HRRI C,GOMES
   170	000170'	042040	000003		AUXCAL A,C
   171	000171'	201040	000341'		MOVEI A,TRPTAB
   172	000172'	505040	000006		HRLI A,6
   173	000173'	047040	777745		INTADR A,	;DISABLE AND CLEAR INTERRUPT SYSTEM
   174	000174'	255000	000000		 JFCL
   175	000175'	550040	000325'		HRRZ A,CHAN
   176	000176'	505040	007001		HRLI A,7001
   177	000177'	047040	777736		TINASS A,	;CIRCUIT ZAP ON CHAN 1
   178	000200'	255000	000000		 JFCL
   179	000201'	400040	000000		SETZ A,
   180	000202'	047040	777741		SETTIM A,	;RESET TIMER
   181	000203'	255000	000000		 JFCL
   182	000204'	505040	000004		HRLI A,4
   183	000205'	541040	000002		HRRI A,2
   184	000206'	047040	777742		INTASS A,	;TIMER ON CHAN 2
   185	000207'	255000	000000		 JFCL
   186	000210'	550040	000325'		HRRZ A,CHAN
   187	000211'	205040	700000		MOVSI A,700000
   188	000212'	047040	777744		INTENB A,	;ENABLE INTERRUPTS ON CHAN 1 AND 2
   189	000213'	255000	000000		 JFCL
   190	000214'	200040	000461'		MOVE A,[XWD 1,^D240]	;FOUR MINUTES
   191	000215'	047040	777741		SETTIM A,
   192	000216'	255000	000000		 JFCL
   193	000217'	402000	000324'		SETZM NCHARS
   194	000220'	514040	000325'		HRLZ A,CHAN
   195	000221'	541040	000001		HRRI A,1
   196	000222'	042040	000016	TRYAGN:	AUXCAL A,CH
   197	000223'	254000	000222'		 JRST .-1
   198	000224'	302700	000001		CAIE CH,1
   199	000225'	254000	000222'		JRST TRYAGN
   200	000226'	042040	000016		AUXCAL A,CH
   201	000227'	254000	000226'		JRST .-1
   202	000230'	302700	000002		CAIE CH,2
   203	000231'	254000	000222'		 JRST TRYAGN
   204	000232'	042040	000016		AUXCAL A,CH
   205	000233'	254000	000232'		 JRST .-1
   206	000234'	302700	000003		CAIE CH,3
   207	000235'	254000	000222'		 JRST TRYAGN
   208	000236'	042040	000016		AUXCAL A,CH
   209	000237'	254000	000236'		 JRST .-1
   210	000240'	302700	000004		CAIE CH,4
   211	000241'	254000	000222'		 JRST TRYAGN
   212	000242'	350000	000324'		AOS NCHARS
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-5
JOB004.MAC	26-AUG-82 17:13	

   213	000243'	514040	000325'		HRLZ A,CHAN
   214	000244'	541040	000004		HRRI A,4
   215	000245'	042040	000001		AUXCAL A,1
   216	000246'	042040	000002		AUXCAL A,2
   217	000247'	042040	000003		AUXCAL A,3
   218	000250'	042040	000004		AUXCAL A,4
   219	000251'	263740	000000		POPJ P,0
   220
   221	000252'	332000	000006	RETURN:	SKIPE CFLAG
   222	000253'	260740	000147'		PUSHJ P,ZAPIT
   223	000254'	071040	000000		RELEASE 1,
   224	000255'	200740	000017*		MOVE P,SAVAC+17
   225	000256'	263740	000000		POPJ P,0
   226
   227	000257'	200100	000462'	OPNTAP:	MOVE B,[SIXBIT /REMCNT/]
   228	000260'	202100	000326'		MOVEM B,LK1FIL
   229	000261'	402000	000327'		SETZM LK1FIL+1
   230	000262'	402000	000330'		SETZM LK1FIL+2
   231	000263'	200100	000335'		MOVE B,SPLPPN
   232	000264'	202100	000331'		MOVEM B,LK1FIL+3
   233	000265'	076040	000326'		LOOKUP 1,LK1FIL
   234	000266'	254000	000252'		 JRST RETURN
   235	000267'	322040	000303'		JUMPE A,OPNEND
   236	000270'	402000	000330'		SETZM LK1FIL+2
   237	000271'	200100	000335'		MOVE B,SPLPPN
   238	000272'	202100	000331'		MOVEM B,LK1FIL+3
   239	000273'	077040	000326'		ENTER 1,LK1FIL
   240	000274'			BADR10:	MAKERR 10,JOB,@THISYS,NXTJ^XLIST
   241	000303'	260740	000306'	OPNEND:	PUSHJ P,RDBLK
   242	000304'	350017	000000		AOS (P)
   243	000305'	263740	000000		POPJ P,0
   244
   245	000306'	074060	000001*	RDBLK:	USETI 1,@BLK
   246	000307'	066040	000066*		INPUT 1,BL1LST
   247	000310'	063040	740000		STATZ 1,740000
   248	000311'			IOERR:	MAKERR 11,JOB,@THISYS,NXTJ^XLIST
   249	000320'	063040	020000		STATZ 1,20000
   250	000321'	254000	000132'		JRST ENDFIL
   251	000322'	400400	000000		SETZ INDEX,
   252	000323'	263740	000000		POPJ P,0
   253
   254	000324'	000000	000000	NCHARS:	0
   255	000325'	000000	000000	CHAN:	0
   256	000326'			LK1FIL:	BLOCK 4
   257	000332'	516411	747630	LOGSTR:	ASCIZ /SPOOL:/
	000333'	350000	000000
   258	000334'			BLOCK 1
   259
   260	000335'	000001	133677	SPLPPN:	1133677
   261
   262	000336'	436364	051212	GOMES:	ASCIZ /GO REMUPD
	000337'	466532	042032
   263	000340'	050000	000000	/
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-6
JOB004.MAC	26-AUG-82 17:13	

   264
   265	000341'	000000	000000	TRPTAB:	0
   266	000342'	000000	000145'		CPROB
   267	000343'	000000	000000		0
   268	000344'	000000	000145'		CPROB
   269	000345'				BLOCK ^D66
   270				END
   271
NO ERRORS DETECTED
HI-SEG. BREAK IS 000463
3K CORE USED
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 2
JOB004.MAC	26-AUG-82 17:13		SYMBOL TABLE

A		000001		THISYS		000315'	EXT	
AGN		000024'		TINASS	047000	777736		
B		000002		TRPTAB		000341'		
BADR10		000274'		TRYAGN		000222'		
BL1LST		000307'	EXT	ZAPCIR	047000	777733		
BLDIT		000076'		ZAPIT		000147'		
BLK		000001	SPD	
BLOCK1		000064'	EXT	
BLOCK2		000000	EXT	
BP		000005		
C		000003		
CFLAG		000006		
CH		000016		
CHAN		000325'		
CHGENT		000054'		
CHK		000016		
CPROB		000145'		
CREAUX	047000	777734		
ENDFIL		000132'		
ERR1		000045'		
ERRINI		000007'		
ERROR		000317'	EXT	
GETCIR		000155'		
GOBAK		000001	SPD	
GOMES		000336'		
GOTIMS		000103'		
INCDEX		000072'		
INDEX		000010		
INTADR	047000	777745		
INTASS	047000	777742		
INTENB	047000	777744		
IOERR		000311'		
JOB		000004	SPD	
LK1FIL		000326'		
LOGSTR		000332'		
MAXSYS		000170	SPD	
MAXWD		000200	SPD	
NCHARS		000324'		
NORET	777777	777777	SPD	
NXTJ		000000	SPD	
OPNEND		000303'		
OPNTAP		000257'		
P		000017		
PAMJOB		000000'	INT	
RDBLK		000306'		
RETURN		000252'		
SAVAC		000000	EXT	
SAVCNT		000002	SPD	
SENSAM		000030'		
SETTIM	047000	777741		
SETUWP	047000	000036		
SPLPPN		000335'		

JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86
JOB004.MAC	26-AUG-82 17:13		Symbol cross reference

A	    15#	    51	    52	    59	    60	    61	    69	    70	    71	    73	    74	    77	    78	    79
	    83	    84	   101	   108	   109	   111	   113	   118	   119	   120	   121	   127	   128	   129
	   139	   140	   141	   142	   143	   152	   153	   155	   156	   159	   160	   162	   163	   164
	   165	   166	   167	   170	   171	   172	   173	   175	   176	   177	   179	   180	   182	   183
	   184	   186	   187	   188	   190	   191	   194	   195	   196	   200	   204	   208	   213	   214
	   215	   216	   217	   218	   235	   241	   249
AGN	    65#	   106
B	    16#	    59	    83	   109	   110	   122	   123	   227	   228	   231	   232	   237	   238	   241
	   249
BADR10	   240#
BL1LST	     7%	    94	   246
BLDIT	    68	   108#
BLK	    26#	    60	    93	   100	   245
BLOCK1	     7%	    65	    75	    88	    92
BLOCK2	     7%	    26	    27
BP	    18#	   114	   115	   121	   123	   125
C	    17#	   168	   169	   170
CFLAG	    19#	    51	    67	   134	   137	   221
CH	    21#	    72	    73	    75	    76	    77	    79	    81	    88	    89	   115	   116	   124	   125
	   129	   131	   132	   143	   145	   196	   198	   200	   202	   204	   206	   208	   210
CHAN	    69	   127	   139	   162	   175	   186	   194	   213	   255#
CHGENT	    83#
CHK	    33#
CPROB	   149#	   266	   268
ENDFIL	   137#	   250
ERR1	    82#	   112	   146
ERRINI	    58#	    86	   103
ERROR	     5%	    59	    83	   241	   249
GETCIR	   126	   159#
GOBAK	    36#
GOMES	   169	   262#
GOTIMS	   110	   113#
INCDEX	    66	    98#
INDEX	    20#	    64	    65	    74	    75	    83	    87	    88	    92	    98	    99	   104	   251
IOERR	    96	   248#
JOB	    24#	    59	    83	   241	   249
LK1FIL	   228	   229	   230	   232	   233	   236	   238	   239	   256#
LOGSTR	   114	   159	   257#
MAXSYS	    30#	   108	   109	   113
MAXWD	    29#	    99
NCHARS	   193	   212	   254#
NORET	    38#	    59
NXTJ	    37#	    83	   241	   249
OPNEND	   235	   241#
OPNTAP	    62	    85	   102	   227#
P	    22#	    54	    59	    62	    68	    83	    85	    87	   100	   102	   105	   126	   135	   149
	   157	   219	   222	   224	   225	   241	   242	   243	   249	   252
PAMJOB	     9	    51#
RDBLK	   241	   245#
RETURN	    63	   133	   138	   147	   150	   161	   221#	   234
SAVAC	     6%	    54	   224
SAVCNT	    27#	    76	    89
SENSAM	    69#	    91
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86
JOB004.MAC	26-AUG-82 17:13		Symbol cross reference

SPLPPN	   231	   237	   260#
SYSTAB	     6%	   109	   113
THISYS	     5%	    59	    72	    83	   241	   249
TRPTAB	   171	   265#
TRYAGN	   196#	   199	   203	   207	   211
ZAPIT	   149	   152#	   222
JOB004 - JOB 4 FOR ALL PDP-10'S - UPDATE REMOTE COUNT FOR SPOOL	MACRO 12.5-46.0 17:51 13-NOV-86
JOB004.MAC	26-AUG-82 17:13		Macro/Opdef cross reference

CREAUX	   160
INTADR	   173
INTASS	   184
INTENB	   153	   188
MAKERR	    41#	    58	    82	   240	   248
SETTIM	   180	   191
SETUWP	    52
TINASS	   177
ZAPCIR	   156JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1
JOB005.MAC	 2-OCT-80 16:39		J. MARCIN 4/14/77

     1				TITLE JOB005 - JOB 5 FOR SYSTEM 30 ONLY
     2				SUBTTL J. MARCIN 4/14/77
     3				;START UP A JOB TO COPY NETWORK ACCTG. FROM THE 7/32'S
     4
     5	000000'			HISEG	;ALL GOES IN HIGH SEGMENT
     6
     7				EXTERN ERROR, THISYS
     8				EXTERN SAVAC
     9
    10				;VERSION 11 (5/21/79) IF GETCIR FAILS, KEEP GOING
    11				;VERSION 10 (5/18/78) NEW PJ
    12				;VERSION 7 (4/12/78)START UP 1 JOB PER SUP
    13				;VERSION 6 (11/21/77) RUN FROM COLLECTR
    14				;VERSION 5 (4/14/77)TAPE LIBRARY RUN SEPARATELY
    15				;VERSION 4	FIX BUG IN RUNNING PROGRAMS....3/30/77
    16				;VERSION 3	ADD TAPE LIBRARY JOB
    17
    18
    19				;REQUIRES SY AC LICENSE
    20
    21				INTERN PAMJOB
    22
    23				;AC'S
    24			000001	A=1
    25			000002	B=2
    26			000003	C=3
    27			000004	D=4
    28			000005	BP=5
    29			000006	CH=6
    30			000007	HGHJOB==7
    31			000015	COUNT==15
    32			000016	INDEX=16
    33			000017	P=17
    34
    35
    36
    37			000005	JOB==5
    38
    39				;RETURN FROM ERROR
    40			000000	NXTJ==0	; GO RUN THE NEXT PJ JOB
    41
    42				DEFINE MAKERR (ERRN, JN, SN, RET)
    43				<XLIST
    44					SKIPA
    45					JRST .+6
    46					HRLZI A,ERRN
    47					HRRI A,JN
    48					HRLZ B,SN
    49					HRRI B,RET
    50					PUSHJ P,ERROR
    51				LIST>
    52
    53	000000'	400040	000000	PAMJOB:	SETZ A,
JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-2
JOB005.MAC	 2-OCT-80 16:39		J. MARCIN 4/14/77

    54	000001'	047040	000036		SETUWP A,		;ALLOW WRITING IN HIGH SEGMENT
    55	000002'	255000	000000		 JFCL
    56	000003'	202740	000017*		MOVEM P,SAVAC+17	;SAVE P
    57
    58	000004'	041740	000000		INIT 17,0
    59	000005'	637163	000000		SIXBIT /SYS/
    60	000006'	000000	000000		0
    61	000007'	254000	000200'		 JRST BADGTB
    62	000010'	200040	000430'		MOVE A,[XWD 21477,214621]
    63	000011'	515100	654644		HRLZI B,(SIXBIT /UFD/)
    64	000012'	400140	000000		SETZ C,
    65	000013'	200200	000431'		MOVE D,[XWD 1,1]
    66	000014'	076740	000001		LOOKUP 17,A
    67	000015'	254000	000200'		 JRST BADGTB
    68	000016'	200040	000432'		MOVE A,[XWD UFDINF,UFDINF+1]
    69	000017'	402000	000262'		SETZM UFDINF
    70	000020'	251040	000321'		BLT A,UFDINF+37
    71	000021'	200040	000433'	RDUFD:	MOVE A,[XWD 33,17]
    72	000022'	043040	000252'		CHANIO A,UFDBLK
    73					JRST [STATZ 17,20000
    74						JRST RETURN
    75						SKIPE UFDBLK+7
    76						JRST BADGTB
    77	000023'	254000	000434'			JRST RDUFD]
    78	000024'	336640	000261'		SKIPN COUNT,UFDBLK+7
    79	000025'	254000	000075'		 JRST RETURN
    80	000026'	400700	000000		SETZ INDEX,
    81	000027'	200056	000262'	CNXTF:	MOVE A,UFDINF(INDEX)
    82	000030'	510100	000001		HLLZ B,A
    83	000031'	312100	000250'		CAME B,CPN
    84	000032'	254000	000072'		JRST CNXTFL
    85	000033'	202040	000246'		MOVEM A,COPNET
    86	000034'	260740	000176'		PUSHJ P,CKLOG
    87	000035'	254000	000072'		JRST CNXTFL
    88	000036'	200240	000441'		MOVE BP,[POINT 7,SSLOG+1,27]
    89	000037'	200040	000000*		MOVE A,THISYS
    90	000040'	231040	000012		IDIVI A,^D10
    91	000041'	271040	000060		ADDI A,60
    92	000042'	136040	000005		IDPB A,BP
    93	000043'	271100	000060		ADDI B,60
    94	000044'	136100	000005		IDPB B,BP
    95	000045'	201040	000073		MOVEI A,";"
    96	000046'	136040	000005		IDPB A,BP
    97	000047'	200040	000442'		MOVE A,[POINT 6,UFDINF(INDEX)]
    98	000050'	200240	000443'		MOVE BP,[POINT 7,SSGOM+4]
    99	000051'	133000	000001		IBP A
   100	000052'	201100	000005		MOVEI B,5
   101	000053'	134140	000001		ILDB C,A
   102	000054'	271140	000040		ADDI C,40
   103	000055'	136140	000005		IDPB C,BP
   104	000056'	367100	000053'		SOJG B,.-3
   105	000057'	261740	000016		PUSH P,INDEX
   106	000060'	260740	000077'		PUSHJ P,GETCIR
JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-3
JOB005.MAC	 2-OCT-80 16:39		J. MARCIN 4/14/77

   107	000061'	205040	300000		MOVSI A,300000
   108	000062'	047040	777744		INTENB A,		;DO NOT TRAP ON ZAPPED CIRCUIT
   109	000063'	255000	000000		 JFCL			;BECAUSE SLAVE WILL DETACH
   110	000064'	262740	000016		POP P,INDEX
   111	000065'	201040	000036		MOVEI A,^D30
   112	000066'	047040	000031		SLEEP A,
   113	000067'	255000	000000		 JFCL
   114	000070'	200040	000251'		MOVE A,CHAN
   115	000071'	047040	777733		ZAPCIR A,
   116	000072'	271700	000002	CNXTFL:	ADDI INDEX,2
   117	000073'	367640	000027'		SOJG COUNT,CNXTF
   118	000074'	254000	000021'		JRST RDUFD
   119	000075'	200740	000017*	RETURN:	MOVE P,SAVAC+17
   120	000076'	263740	000000		POPJ P,0
   121
   122	000077'	201040	000235'	GETCIR:	MOVEI A,SSLOG
   123	000100'	047040	777734		CREAUX A,
   124	000101'	263740	000000		 POPJ P,0
   125	000102'	202040	000251'		MOVEM A,CHAN
   126	000103'	507000	000001		HRLS A
   127	000104'	541040	000004		HRRI A,4
   128	000105'	042040	000015		AUXCAL A,15
   129	000106'	042040	000015		AUXCAL A,15
   130	000107'	541040	000005		HRRI A,5
   131	000110'	515140	440700		HRLZI C,440700
   132	000111'	541140	000240'		HRRI C,SSGOM
   133	000112'	042040	000003		AUXCAL A,C
   134	000113'	201040	000322'		MOVEI A,TRPTAB
   135	000114'	505040	000006		HRLI A,6
   136	000115'	047040	777745		INTADR A,	;DISABLE AND CLEAR INTERRUPT SYSTEM
   137	000116'	255000	000000		 JFCL
   138	000117'	400040	000000		SETZ A,
   139	000120'	047040	777741		SETTIM A,	;RESET TIMER
   140	000121'	255000	000000		 JFCL
   141	000122'	505040	000004		HRLI A,4
   142	000123'	541040	000001		HRRI A,1
   143	000124'	047040	777742		INTASS A,	;TIMER ON CHAN 2
   144	000125'	255000	000000		 JFCL
   145	000126'	550040	000251'		HRRZ A,CHAN
   146	000127'	205040	600000		MOVSI A,600000
   147	000130'	047040	777744		INTENB A,	;ENABLE INTERRUPTS ON CHAN 1
   148	000131'	255000	000000		 JFCL
   149	000132'	200040	000444'		MOVE A,[XWD 1,^D240]	;FOUR MINUTES
   150	000133'	047040	777741		SETTIM A,
   151	000134'	255000	000000		 JFCL
   152	000135'	514040	000251'		HRLZ A,CHAN
   153	000136'	541040	000001		HRRI A,1
   154	000137'	042040	000006	TRYAGN:	AUXCAL A,CH
   155	000140'	260740	000166'	        PUSHJ P,IOWAIT
   156	000141'	302300	000001		CAIE CH,1
   157	000142'	254000	000137'		 JRST TRYAGN
   158	000143'	042040	000006		AUXCAL A,CH
   159	000144'	260740	000166'		 PUSHJ P,IOWAIT
JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-4
JOB005.MAC	 2-OCT-80 16:39		J. MARCIN 4/14/77

   160	000145'	302300	000002		CAIE CH,2
   161	000146'	254000	000137'		 JRST TRYAGN
   162	000147'	042040	000006		AUXCAL A,CH
   163	000150'	260740	000166'		 PUSHJ P,IOWAIT
   164	000151'	302300	000003		CAIE CH,3
   165	000152'	254000	000137'		 JRST TRYAGN
   166	000153'	042040	000006		AUXCAL A,CH
   167	000154'	260740	000166'		 PUSHJ P,IOWAIT
   168	000155'	302300	000004		CAIE CH,4
   169	000156'	254000	000137'		 JRST TRYAGN
   170	000157'	514040	000251'		HRLZ A,CHAN
   171	000160'	541040	000004		HRRI A,4
   172	000161'	042040	000001		AUXCAL A,1
   173	000162'	042040	000002		AUXCAL A,2
   174	000163'	042040	000003		AUXCAL A,3
   175	000164'	042040	000004		AUXCAL A,4
   176	000165'	263740	000000		POPJ P,0
   177
   178	000166'	200140	000251'	IOWAIT:  MOVE C,CHAN
   179	000167'	242140	000011	        LSH C,^D9
   180	000170'	271140	000111	        ADDI C,111
   181	000171'	507140	000003	        HRLS C,C
   182	000172'	541140	000005	        HRRI C,5                ;WAIT 5 SECONDS
   183	000173'	047140	000072	        HIBER C,
   184	000174'	254000	000220'	        JRST IOERR
   185	000175'	263740	000000	        POPJ P,0
   186
   187	000176'	200340	000445'	CKLOG:	MOVE HGHJOB,[XWD 20,12]	;GET HIGHEST JOB NUMBER
   188	000177'	047340	000041		GETTAB HGHJOB,
   189	000200'			BADGTB:	 MAKERR 1,JOB,@THISYS,NXTJ^XLIST
   190	000207'	514100	000007	NXTJOB:	HRLZ B,HGHJOB		;SEE IF USER IS LOGGED IN ALLREADY
   191	000210'	541100	000002		HRRI B,2
   192	000211'	047100	000041		GETTAB B,		;GET PPN FOR NEXT JOB
   193	000212'	254000	000200'		 JRST BADGTB
   194	000213'	316100	000247'		CAMN B,COLLECT	;IS THIS JOB THE ONE WE ARE LOOKING FOR?
   195					JRST [HRLZ A,HGHJOB	;SEE WHAT PROGRAM JOB IS RUNNING
   196						HRRI A,3
   197						GETTAB A,
   198						 JRST BADGTB
   199						CAME A,COPNET
   200						JRST NXJB1
   201	000214'	254000	000446'			POPJ P,0]
   202	000215'	367340	000207'	NXJB1:	SOJG HGHJOB,NXTJOB	;NO, CHECK ALL JOBS
   203	000216'	350017	000000		AOS (P)
   204	000217'	263740	000000		POPJ P,0
   205
   206	000220'			IOERR: MAKERR 11,JOB,@THISYS,NXTJ^XLIST
   207
   208	000227'	205040	300000	CPROB:	MOVSI A,300000	;DISABLE
   209	000230'	047040	777744		INTENB A,
   210	000231'	255000	000000		 JFCL
   211	000232'	474040	000000		SETO A,
   212	000233'	047040	777733		ZAPCIR A,
JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-5
JOB005.MAC	 2-OCT-80 16:39		J. MARCIN 4/14/77

   213	000234'	254000	000075'		JRST RETURN
   214
   215	000235'	416371	446212	SSLOG:	ASCIZ /COLLECTR:   /
	000236'	416512	235100
	000237'	201000	000000
   216	000240'	516132	420100	SSGOM:	ASCIZ /SET  LOGOUT
	000241'	462370	747652
   217	000242'	520321	251252	RUN   COPNET
	000243'	471004	020206
	000244'	476411	642650
   218	000245'	064240	000000	/
   219	000246'	435760	564564	COPNET:	SIXBIT /COPNET/
   220
   221	000247'	021477	214621	COLLECT:	XWD 21477,214621
   222	000250'	436056	000000	CPN:	SIXBIT /CPN/
   223
   224
   225	000251'	000000	000000	CHAN:	0
   226
   227	000252'	777740	000262'	UFDBLK:	XWD -40,UFDINF
   228	000253'	120000	000000		SIXBIT /*/
   229	000254'	120000	000000		SIXBIT /*/
   230	000255'	000000	000000		0
   231	000256'	000000	000000		0
   232	000257'	000000	000000		0
   233	000260'	000000	000000		0
   234	000261'	000000	000000		0
   235
   236	000262'			UFDINF:	BLOCK 40
   237
   238	000322'	000000	000000	TRPTAB:	0
   239	000323'	000000	000227'		CPROB
   240	000324'				BLOCK ^D68
   241					END
   242
NO ERRORS DETECTED
HI-SEG. BREAK IS 000455
3K CORE USED
JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 2
JOB005.MAC	 2-OCT-80 16:39		SYMBOL TABLE

A		000001		
B		000002		
BADGTB		000200'		
BP		000005		
C		000003		
CH		000006		
CHAN		000251'		
CKLOG		000176'		
CNXTF		000027'		
CNXTFL		000072'		
COLLEC		000247'		
COPNET		000246'		
COUNT		000015	SPD	
CPN		000250'		
CPROB		000227'		
CREAUX	047000	777734		
D		000004		
ERROR		000226'	EXT	
GETCIR		000077'		
GETTAB	047000	000041		
HGHJOB		000007	SPD	
HIBER	047000	000072		
INDEX		000016		
INTADR	047000	777745		
INTASS	047000	777742		
INTENB	047000	777744		
IOERR		000220'		
IOWAIT		000166'		
JOB		000005	SPD	
NXJB1		000215'		
NXTJ		000000	SPD	
NXTJOB		000207'		
P		000017		
PAMJOB		000000'	INT	
RDUFD		000021'		
RETURN		000075'		
SAVAC		000000	EXT	
SETTIM	047000	777741		
SETUWP	047000	000036		
SLEEP	047000	000031		
SSGOM		000240'		
SSLOG		000235'		
THISYS		000224'	EXT	
TRPTAB		000322'		
TRYAGN		000137'		
UFDBLK		000252'		
UFDINF		000262'		
ZAPCIR	047000	777733		

JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86
JOB005.MAC	 2-OCT-80 16:39		Symbol cross reference

A	    24#	    53	    54	    62	    66	    68	    70	    71	    72	    81	    82	    85	    89	    90
	    91	    92	    95	    96	    97	    99	   101	   107	   108	   111	   112	   114	   115	   122
	   123	   125	   126	   127	   128	   129	   130	   133	   134	   135	   136	   138	   139	   141
	   142	   143	   145	   146	   147	   149	   150	   152	   153	   154	   158	   162	   166	   170
	   171	   172	   173	   174	   175	   190	   195	   196	   197	   199	   207	   208	   209	   211
	   212
B	    25#	    63	    82	    83	    93	    94	   100	   104	   190	   191	   192	   194	   207
BADGTB	    61	    67	    76	   189#	   193	   198
BP	    28#	    88	    92	    94	    96	    98	   103
C	    26#	    64	   101	   102	   103	   131	   132	   133	   178	   179	   180	   181	   182	   183
CH	    29#	   154	   156	   158	   160	   162	   164	   166	   168
CHAN	   114	   125	   145	   152	   170	   178	   225#
CKLOG	    86	   187#
CNXTF	    81#	   117
CNXTFL	    84	    87	   116#
COLLEC	   194	   221#
COPNET	    85	   199	   219#
COUNT	    31#	    78	   117
CPN	    83	   222#
CPROB	   208#	   239
D	    27#	    65
ERROR	     7%	   190	   207
GETCIR	   106	   122#
HGHJOB	    30#	   187	   188	   190	   195	   202
INDEX	    32#	    80	    81	    97	   105	   110	   116
IOERR	   184	   206#
IOWAIT	   155	   159	   163	   167	   178#
JOB	    37#	   190	   207
NXJB1	   200	   202#
NXTJ	    40#	   190	   207
NXTJOB	   190#	   202
P	    33#	    56	    86	   105	   106	   110	   119	   120	   124	   155	   159	   163	   167	   176
	   185	   190	   201	   203	   204	   207
PAMJOB	    21	    53#
RDUFD	    71#	    77	   118
RETURN	    74	    79	   119#	   213
SAVAC	     8%	    56	   119
SSGOM	    98	   132	   216#
SSLOG	    88	   122	   215#
THISYS	     7%	    89	   190	   207
TRPTAB	   134	   238#
TRYAGN	   154#	   157	   161	   165	   169
UFDBLK	    72	    75	    78	   227#
UFDINF	    68	    69	    70	    81	    97	   227	   236#
JOB005 - JOB 5 FOR SYSTEM 30 ONLY	MACRO 12.5-46.0 17:51 13-NOV-86
JOB005.MAC	 2-OCT-80 16:39		Macro/Opdef cross reference

CREAUX	   123
GETTAB	   188	   192	   197
HIBER	   183
INTADR	   136
INTASS	   143
INTENB	   108	   147	   209
MAKERR	    43#	   189	   206
SETTIM	   139	   150
SETUWP	    54
SLEEP	   112
ZAPCIR	   115	   212JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1
JOB006.MAC	21-MAY-79 13:33		J. MARCIN 4/14/77

     1				TITLE JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY
     2				SUBTTL J. MARCIN 4/14/77
     3
     4	000000'			HISEG	;ALL GOES IN HIGH SEGMENT
     5
     6				EXTERN ERROR, THISYS, SAVAC
     7
     8				;VERSION 3 (5/21/79) - CHANGE SO CIRCUIT IS BUILT TO THISYS
     9				;VERSION 2 (5/24/78) - NEW PJ
    10
    11
    12
    13				;REQUIRES SY AC LICENSE
    14
    15				INTERN PAMJOB
    16
    17				;AC'S
    18			000001	A=1
    19			000002	B=2
    20			000003	C=3
    21			000004	CH=4
    22			000005	BP=5
    23			000007	HGHJOB==7
    24			000017	P=17
    25
    26
    27
    28			000006	JOB==6
    29
    30				;RETURN FROM ERROR
    31		777777	777777	NORET==-1
    32
    33				DEFINE MAKERR (ERRN, JN, SN, RET)
    34				<XLIST
    35					SKIPA
    36					JRST .+6
    37					HRLZI A,ERRN
    38					HRRI A,JN
    39					HRLZI B,SN
    40					HRRI B,RET
    41					PUSHJ P,ERROR
    42				LIST>
    43
    44	000000'	400040	000000	PAMJOB:	SETZ A,
    45	000001'	047040	000036		SETUWP A,		;ALLOW WRITING IN HIGH SEGMENT
    46	000002'	255000	000000		 JFCL
    47	000003'	202740	000017*		MOVEM P,SAVAC+17	;SAVE P
    48	000004'	200040	000315'		MOVE A,[XWD REC370,LK1FIL]
    49	000005'	251040	000206'		BLT A,LK1FIL+3
    50	000006'	041040	000017		INIT 1,17
    51	000007'	446353	000000		SIXBIT /DSK/
    52	000010'	000000	000000		0
    53					MAKERR 2,JOB,@THISYS,NORET^XLIST
    54	000020'	076040	000203'		LOOKUP 1,LK1FIL
    55					 JRST [CLOSE 1,
    56						RELEASE 1,
    57	000021'	254000	000316'			JRST RETURN]
    58	000022'	070040	000000		CLOSE 1,
    59	000023'	071040	000000		RELEASE 1,
    60	000024'	260740	000030'		PUSHJ P,CKLOG
    61	000025'	254000	000074'		JRST RETURN
    62	000026'	260740	000060'	RNTLIB:	PUSHJ P,RUNIT
    63	000027'	254000	000074'		JRST RETURN
    64
    65	000030'	200340	000321'	CKLOG:	MOVE HGHJOB,[XWD 20,12]	;GET HIGHEST JOB NUMBER
    66	000031'	047340	000041		GETTAB HGHJOB,
    67	000032'			BADGTB:	 MAKERR 1,JOB,@THISYS,NORET^XLIST
    68	000041'	514100	000007	NXTJOB:	HRLZ B,HGHJOB		;SEE IF USER IS LOGGED IN ALLREADY
    69	000042'	541100	000002		HRRI B,2
    70	000043'	047100	000041		GETTAB B,		;GET PPN FOR NEXT JOB
    71	000044'	254000	000032'		 JRST BADGTB
    72	000045'	316100	000201'		CAMN B,TAPLIB	;IS THIS JOB THE ONE WE ARE LOOKING FOR?
    73					JRST [HRLZ A,HGHJOB	;SEE WHAT PROGRAM JOB IS RUNNING
    74						HRRI A,3
    75						GETTAB A,
    76						 JRST BADGTB
    77						CAME A,UPDATE
    78						JRST NXJB1
    79	000046'	254000	000322'			POPJ P,0]
    80	000047'	367340	000041'	NXJB1:	SOJG HGHJOB,NXTJOB	;NO, CHECK ALL JOBS
    81	000050'	350017	000000		AOS (P)
    82	000051'	263740	000000		POPJ P,0
    83
    84	000052'	205040	200000	TIMEUP:	MOVSI A,200000	;DISABLE
    85	000053'	047040	777744		INTENB A,
    86	000054'	255000	000000		 JFCL
    87	000055'	474040	000000		SETO A,
    88	000056'	047040	777733		ZAPCIR A,
    89	000057'	254000	000074'		JRST RETURN
    90
    91	000060'	200240	000331'	RUNIT:	MOVE BP,[POINT 7,TAPLOG+1,20]	;SET UP PTR TO LOGIN STRING
    92	000061'	200040	000036*		MOVE A,THISYS	;SAVE THIS SYSTEM NO. IN LOGIN STRING
    93	000062'	231040	000012		IDIVI A,^D10
    94	000063'	271040	000060		ADDI A,60	;MAKE ASCII
    95	000064'	136040	000005		IDPB A,BP	;SAVE FIRST CHAR
    96	000065'	271100	000060		ADDI B,60
    97	000066'	136100	000005		IDPB B,BP	;SAVE SECOND CHAR
    98	000067'	260740	000076'		PUSHJ P,GETCIR
    99	000070'	205040	200000		MOVSI A,200000
   100	000071'	047040	777744		INTENB A,		;DO NOT TRAP ON ZAPPED CIRCUIT
   101	000072'	255000	000000		 JFCL			;BECAUSE SLAVE WILL DETACH
   102	000073'	263740	000000		POPJ P,0
   103
   104	000074'	200740	000017*	RETURN:	MOVE P,SAVAC+17
   105	000075'	263740	000000		POPJ P,0
   106
   107	000076'	201040	000165'	GETCIR:	MOVEI A,TAPLOG
   108	000077'	047040	777734		CREAUX A,
   109	000100'	254000	000074'		 JRST RETURN
JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-3
JOB006.MAC	21-MAY-79 13:33		J. MARCIN 4/14/77

   110	000101'	202040	000202'		MOVEM A,CHAN
   111	000102'	507000	000001		HRLS A
   112	000103'	541040	000004		HRRI A,4
   113	000104'	042040	000015		AUXCAL A,15	;2CR'S
   114	000105'	042040	000015		AUXCAL A,15
   115	000106'	541040	000005		HRRI A,5
   116	000107'	505140	440700		HRLI C,440700	;SEND START UP STRING
   117	000110'	541140	000170'		HRRI C,TAPGOM
   118	000111'	042040	000003		AUXCAL A,C
   119	000112'	201040	000207'		MOVEI A,TRPTAB
   120	000113'	505040	000006		HRLI A,6	;DISABLE AND CLEAR INTERRUPT SSSTEM
   121	000114'	047040	777745		INTADR A,
   122	000115'	255000	000000		 JFCL
   123	000116'	400040	000000		SETZ A,
   124	000117'	047040	777741		SETTIM A,	;RESET TIMER
   125	000120'	255000	000000		 JFCL
   126	000121'	505040	000004		HRLI A,4
   127	000122'	541040	000001		HRRI A,1
   128	000123'	047040	777742		INTASS A,	;TIMER ON CHAN 2
   129	000124'	255000	000000		 JFCL
   130	000125'	550040	000202'		HRRZ A,CHAN
   131	000126'	205040	600000		MOVSI A,600000
   132	000127'	047040	777744		INTENB A,	;ENABLE INTERRUPTS ON CHAN 1
   133	000130'	255000	000000		 JFCL
   134	000131'	200040	000332'		MOVE A,[XWD 1,^D240]
   135	000132'	047040	777741		SETTIM A,
   136	000133'	255000	000000		 JFCL
   137	000134'	514040	000202'		HRLZ A,CHAN
   138	000135'	541040	000001		HRRI A,1
   139	000136'	042040	000004	TRYAGN:	AUXCAL A,CH
   140	000137'	254000	000136'		 JRST .-1
   141	000140'	302200	000001		CAIE CH,1
   142	000141'	254000	000136'		 JRST TRYAGN
   143	000142'	042040	000004		AUXCAL A,CH
   144	000143'	254000	000142'		 JRST .-1
   145	000144'	302200	000002		CAIE CH,2
   146	000145'	254000	000136'		 JRST TRYAGN
   147	000146'	042040	000004		AUXCAL A,CH
   148	000147'	254000	000146'		 JRST .-1
   149	000150'	302200	000003		CAIE CH,3
   150	000151'	254000	000136'		 JRST TRYAGN
   151	000152'	042040	000004		AUXCAL A,CH
   152	000153'	254000	000152'		 JRST .-1
   153	000154'	302200	000004		CAIE CH,4
   154	000155'	254000	000136'		 JRST TRYAGN
   155	000156'	514040	000202'		HRLZ A,CHAN
   156	000157'	541040	000004		HRRI A,4
   157	000160'	042040	000001		AUXCAL A,1
   158	000161'	042040	000002		AUXCAL A,2
   159	000162'	042040	000003		AUXCAL A,3
   160	000163'	042040	000004		AUXCAL A,4
   161	000164'	263740	000000		POPJ P,0
   162
JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-4
JOB006.MAC	21-MAY-79 13:33		J. MARCIN 4/14/77

   163	000165'	522032	042630	TAPLOG:	ASCIZ /TAPELIB:29;/
	000166'	446047	231162
	000167'	354000	000000
   164
   165	000170'	516132	420230	TAPGOM: ASCIZ /SET LOGOUT
	000171'	476171	752650
   166	000172'	064252	252634	RUN UPDATE
	000173'	202532	042202
   167	000174'	522121	505000	/
   168
   169	000175'	656044	416445	UPDATE:	SIXBIT /UPDATE/
   170
   171
   172	000176'	624543	576244	REC370:	SIXBIT /RECORD/
   173	000177'	232720	000000		SIXBIT /370/
   174	000200'	000000	000000		0
   175	000201'	000001	030773	TAPLIB:	XWD 1,30773
   176	000202'	000000	000000	CHAN:	0
   177
   178	000203'			LK1FIL:	BLOCK 4
   179
   180
   181	000207'	000000	000000	TRPTAB:	0
   182	000210'	000000	000052'		TIMEUP
   183	000211'				BLOCK ^D68
   184					END
   185
NO ERRORS DETECTED
HI-SEG. BREAK IS 000333
2K CORE USED
JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 2
JOB006.MAC	21-MAY-79 13:33		SYMBOL TABLE

A		000001		
B		000002		
BADGTB		000032'		
BP		000005		
C		000003		
CH		000004		
CHAN		000202'		
CKLOG		000030'		
CREAUX	047000	777734		
ERROR		000040'	EXT	
GETCIR		000076'		
GETTAB	047000	000041		
HGHJOB		000007	SPD	
INTADR	047000	777745		
INTASS	047000	777742		
INTENB	047000	777744		
JOB		000006	SPD	
LK1FIL		000203'		
NORET	777777	777777	SPD	
NXJB1		000047'		
NXTJOB		000041'		
P		000017		
PAMJOB		000000'	INT	
REC370		000176'		
RETURN		000074'		
RNTLIB		000026'		
RUNIT		000060'		
SAVAC		000000	EXT	
SETTIM	047000	777741		
SETUWP	047000	000036		
TAPGOM		000170'		
TAPLIB		000201'		
TAPLOG		000165'		
THISYS		000061'	EXT	
TIMEUP		000052'		
TRPTAB		000207'		
TRYAGN		000136'		
UPDATE		000175'		
ZAPCIR	047000	777733		

JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY	MACRO 12.5-46.0 17:51 13-NOV-86
JOB006.MAC	21-MAY-79 13:33		Symbol cross reference

A	    18#	    44	    45	    48	    49	    54	    68	    73	    74	    75	    77	    84	    85	    87
	    88	    92	    93	    94	    95	    99	   100	   107	   108	   110	   111	   112	   113	   114
	   115	   118	   119	   120	   121	   123	   124	   126	   127	   128	   130	   131	   132	   134
	   135	   137	   138	   139	   143	   147	   151	   155	   156	   157	   158	   159	   160
B	    19#	    54	    68	    69	    70	    72	    96	    97
BADGTB	    67#	    71	    76
BP	    22#	    91	    95	    97
C	    20#	   116	   117	   118
CH	    21#	   139	   141	   143	   145	   147	   149	   151	   153
CHAN	   110	   130	   137	   155	   176#
CKLOG	    60	    65#
ERROR	     6%	    54	    68
GETCIR	    98	   107#
HGHJOB	    23#	    65	    66	    68	    73	    80
JOB	    28#	    54	    68
LK1FIL	    48	    49	    54	   178#
NORET	    31#	    54	    68
NXJB1	    78	    80#
NXTJOB	    68#	    80
P	    24#	    47	    54	    60	    62	    68	    79	    81	    82	    98	   102	   104	   105	   161
PAMJOB	    15	    44#
REC370	    48	   172#
RETURN	    57	    61	    63	    89	   104#	   109
RNTLIB	    62#
RUNIT	    62	    91#
SAVAC	     6%	    47	   104
TAPGOM	   117	   165#
TAPLIB	    72	   175#
TAPLOG	    91	   107	   163#
THISYS	     6%	    54	    68	    92
TIMEUP	    84#	   182
TRPTAB	   119	   181#
TRYAGN	   139#	   142	   146	   150	   154
UPDATE	    77	   169#
JOB006 - ACCTG. SYSTEM ONLY - TAPE LIBRARY	MACRO 12.5-46.0 17:51 13-NOV-86
JOB006.MAC	21-MAY-79 13:33		Macro/Opdef cross reference

CREAUX	   108
GETTAB	    66	    70	    75
INTADR	   121
INTASS	   128
INTENB	    85	   100	   132
MAKERR	    34#	    53	    67
SETTIM	   124	   135
SETUWP	    45
ZAPCIR	    88JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1
JOB007.MAC	25-MAY-78 08:30		J. MARCIN 6/13/77

     1				TITLE JOB007 - JOB 7
     2				SUBTTL J. MARCIN 6/13/77
     3				;START UP A JOB TO UPDATE PERPS SCHEDULE
     4
     5	000000'			HISEG	;ALL GOES IN HIGH SEGMENT
     6
     7				EXTERN THISYS, SAVAC
     8
     9				EXTERN BL1LST, BLOCK1, ERROR
    10
    11				;VERSION 1
    12
    13
    14				;REQUIRES SY AC LICENSE
    15
    16				INTERN PAMJOB
    17
    18				;AC'S
    19			000001	A=1
    20			000002	B=2
    21			000003	C=3
    22			000004	D=4
    23			000016	CH=16
    24			000017	P=17
    25
    26
    27
    28			000007	JOB==7
    29
    30				;RETURN FROM ERROR
    31		777777	777777	NORET==-1
    32
    33				DEFINE MAKERR (ERRN, JN, SN, RET)
    34				<XLIST
    35					SKIPA
    36					JRST .+6
    37					HRLZI A,ERRN
    38					HRRI A,JN
    39					HRLZI B,SN
    40					HRRI B,RET
    41					PUSHJ P,ERROR
    42				LIST>
    43
    44	000000'	400040	000000	PAMJOB:	SETZ A,
    45	000001'	047040	000036		SETUWP A,		;ALLOW WRITING IN HIGH SEGMENT
    46	000002'	255000	000000		 JFCL
    47	000003'	202740	000017*		MOVEM P,SAVAC+17	;SAVE P
    48	000004'	041040	000017		INIT 1,17
    49	000005'	446353	000000		SIXBIT /DSK/
    50	000006'	000000	000000		0
    51					MAKERR 2,JOB,@THISYS,NORET^XLIST
    52	000016'	076040	000203'		LOOKUP 1,CHGPER
    53					 JRST [CLOSE 1,
JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-2
JOB007.MAC	25-MAY-78 08:30		J. MARCIN 6/13/77

    54						RELEASE 1,
    55	000017'	254000	000315'			JRST RETURN]
    56	000020'	260740	000076'		PUSHJ P,RUNIT
    57	000021'	200100	000013*		MOVE B,THISYS
    58	000022'	042042	000000		AUXCAL A,(B)
    59	000023'	042040	000001		AUXCAL A,1
    60	000024'	066040	000000*		INPUT 1,BL1LST
    61	000025'	211200	000004		MOVNI D,4
    62	000026'	200144	000004*	NWORD:	MOVE C,BLOCK1+4(D)
    63	000027'	246100	000024		LSHC B,^D20
    64	000030'	042042	000000		AUXCAL A,(B)
    65	000031'	246100	000010		LSHC B,8
    66	000032'	042042	000000		AUXCAL A,(B)
    67	000033'	246100	000010		LSHC B,8
    68	000034'	042042	000000		AUXCAL A,(B)
    69	000035'	341200	000026'		AOJL D,NWORD
    70	000036'	514040	000175'		HRLZ A,CHAN
    71	000037'	541040	000001		HRRI A,1
    72	000040'	042040	000016		AUXCAL A,CH
    73	000041'	254000	000040'		 JRST .-1
    74	000042'	302700	000001		CAIE CH,1
    75	000043'	254000	000066'		JRST SOMERR
    76	000044'	402000	000203'		SETZM CHGPER
    77	000045'	402000	000204'		SETZM CHGPER+1
    78	000046'	402000	000205'		SETZM CHGPER+2
    79	000047'	402000	000206'		SETZM CHGPER+3
    80	000050'	055040	000203'		RENAME 1,CHGPER
    81	000051'	254000	000066'		JRST SOMERR
    82	000052'	070040	000000		CLOSE 1,
    83	000053'	071040	000000		RELEASE 1,
    84	000054'	260740	000056'		PUSHJ P,ZAPIT
    85	000055'	254000	000173'		JRST RETURN
    86
    87	000056'	205040	300000	ZAPIT:	MOVSI A,300000	;DISABLE INTERRUPTS
    88	000057'	047040	777744		INTENB A,
    89	000060'	255000	000000		 JFCL
    90	000061'	474040	000000		SETO A,
    91	000062'	047040	777733		ZAPCIR A,
    92	000063'	263740	000000		POPJ P,0
    93
    94	000064'	260740	000056'	CPROB:	PUSHJ P,ZAPIT
    95	000065'	254000	000173'		JRST RETURN
    96
    97	000066'			SOMERR:	MAKERR(24,JOB,@THISYS,0)^XLIST
    98	000075'	254000	000173'		JRST RETURN
    99
   100	000076'	260740	000100'	RUNIT:	PUSHJ P,GETCIR
   101	000077'	263740	000000		POPJ P,0
   102
   103
   104	000100'	201040	000176'	GETCIR:	MOVEI A,PERLOG
   105	000101'	047040	777734		CREAUX A,
   106	000102'	254000	000173'		 JRST RETURN
JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-3
JOB007.MAC	25-MAY-78 08:30		J. MARCIN 6/13/77

   107	000103'	202040	000175'		MOVEM A,CHAN
   108	000104'	507000	000001		HRLS A
   109	000105'	541040	000004		HRRI A,4
   110	000106'	042040	000015		AUXCAL A,15	;2 CR'S
   111	000107'	042040	000015		AUXCAL A,15
   112	000110'	541040	000005		HRRI A,5
   113	000111'	515140	440700		HRLZI C,440700	;SEND START UP STRING
   114	000112'	541140	000201'		HRRI C,PERGOM
   115	000113'	042040	000003		AUXCAL A,C
   116	000114'	201040	000207'		MOVEI A,TRPTAB
   117	000115'	505040	000006		HRLI A,6
   118	000116'	047040	777745		INTADR A,	;DISABLE AND CLEAR INTERRUPT SYSTEM
   119	000117'	255000	000000		 JFCL
   120	000120'	550040	000175'		HRRZ A,CHAN
   121	000121'	505040	007001		HRLI A,7001
   122	000122'	047040	777736		TINASS A,	;CIRCUIT ZAP ON CHAN 1
   123	000123'	255000	000000		 JFCL
   124	000124'	400040	000000		SETZ A,
   125	000125'	047040	777741		SETTIM A,	;RESET TIMER
   126	000126'	255000	000000		 JFCL
   127	000127'	505040	000004		HRLI A,4
   128	000130'	541040	000002		HRRI A,2
   129	000131'	047040	777742		INTASS A,	;TIMER ON CHAN 2
   130	000132'	255000	000000		 JFCL
   131	000133'	550040	000175'		HRRZ A,CHAN
   132	000134'	205040	700000		MOVSI A,700000
   133	000135'	047040	777744		INTENB A,	;ENABLE INTERRUPTS ON CHAN 1 AND 2
   134	000136'	255000	000000		 JFCL
   135	000137'	200040	000320'		MOVE A,[XWD 1,^D240]	;FOUR MINUTES
   136	000140'	047040	777741		SETTIM A,
   137	000141'	255000	000000		 JFCL
   138	000142'	514040	000175'		HRLZ A,CHAN
   139	000143'	541040	000001		HRRI A,1
   140	000144'	042040	000016	TRYAGN:	AUXCAL A,CH
   141	000145'	254000	000144'		 JRST .-1
   142	000146'	302700	000001		CAIE CH,1
   143	000147'	254000	000144'		JRST TRYAGN
   144	000150'	042040	000016		AUXCAL A,CH
   145	000151'	254000	000150'		JRST .-1
   146	000152'	302700	000002		CAIE CH,2
   147	000153'	254000	000144'		 JRST TRYAGN
   148	000154'	042040	000016		AUXCAL A,CH
   149	000155'	254000	000154'		 JRST .-1
   150	000156'	302700	000003		CAIE CH,3
   151	000157'	254000	000144'		 JRST TRYAGN
   152	000160'	042040	000016		AUXCAL A,CH
   153	000161'	254000	000160'		 JRST .-1
   154	000162'	302700	000004		CAIE CH,4
   155	000163'	254000	000144'		 JRST TRYAGN
   156	000164'	514040	000175'		HRLZ A,CHAN
   157	000165'	541040	000004		HRRI A,4
   158	000166'	042040	000001		AUXCAL A,1
   159	000167'	042040	000002		AUXCAL A,2
JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 1-4
JOB007.MAC	25-MAY-78 08:30		J. MARCIN 6/13/77

   160	000170'	042040	000003		AUXCAL A,3
   161	000171'	042040	000004		AUXCAL A,4
   162	000172'	263740	000000		POPJ P,0
   163
   164
   165	000173'	200740	000017*	RETURN:	MOVE P,SAVAC+17
   166	000174'	263740	000000		POPJ P,0
   167
   168
   169	000175'	000000	000000	CHAN:	0
   170	000176'	516472	040632	PERLOG:	ASCIZ /SSPAMBIN:10;/
	000177'	412231	635142
	000200'	301660	000000
   171
   172	000201'	306410	551212	PERGOM: ASCIZ /1PEREXC
   173	000202'	542061	505000	/
   174
   175	000203'	435041	564745	CHGPER:	SIXBIT /CHANGE/
   176	000204'	444164	000000		SIXBIT /DAT/
   177	000205'	000000	000000		0
   178	000206'	000000	000000		0
   179
   180
   181	000207'	000000	000000	TRPTAB:	0
   182	000210'	000000	000064'		CPROB
   183	000211'	000000	000000		0
   184	000212'	000000	000064'		CPROB
   185	000213'				BLOCK ^D66
   186					END
   187
NO ERRORS DETECTED
HI-SEG. BREAK IS 000321
2K CORE USED
JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86 PAGE 2
JOB007.MAC	25-MAY-78 08:30		SYMBOL TABLE

A		000001		
B		000002		
BL1LST		000024'	EXT	
BLOCK1		000000	EXT	
C		000003		
CH		000016		
CHAN		000175'		
CHGPER		000203'		
CPROB		000064'		
CREAUX	047000	777734		
D		000004		
ERROR		000074'	EXT	
GETCIR		000100'		
INTADR	047000	777745		
INTASS	047000	777742		
INTENB	047000	777744		
JOB		000007	SPD	
NORET	777777	777777	SPD	
NWORD		000026'		
P		000017		
PAMJOB		000000'	INT	
PERGOM		000201'		
PERLOG		000176'		
RETURN		000173'		
RUNIT		000076'		
SAVAC		000000	EXT	
SETTIM	047000	777741		
SETUWP	047000	000036		
SOMERR		000066'		
THISYS		000072'	EXT	
TINASS	047000	777736		
TRPTAB		000207'		
TRYAGN		000144'		
ZAPCIR	047000	777733		
ZAPIT		000056'		

JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86
JOB007.MAC	25-MAY-78 08:30		Symbol cross reference

A	    19#	    44	    45	    52	    58	    59	    64	    66	    68	    70	    71	    72	    87	    88
	    90	    91	    98	   104	   105	   107	   108	   109	   110	   111	   112	   115	   116	   117
	   118	   120	   121	   122	   124	   125	   127	   128	   129	   131	   132	   133	   135	   136
	   138	   139	   140	   144	   148	   152	   156	   157	   158	   159	   160	   161
B	    20#	    52	    57	    58	    63	    64	    65	    66	    67	    68	    98
BL1LST	     9%	    60
BLOCK1	     9%	    62
C	    21#	    62	   113	   114	   115
CH	    23#	    72	    74	   140	   142	   144	   146	   148	   150	   152	   154
CHAN	    70	   107	   120	   131	   138	   156	   169#
CHGPER	    52	    76	    77	    78	    79	    80	   175#
CPROB	    94#	   182	   184
D	    22#	    61	    62	    69
ERROR	     9%	    52	    98
GETCIR	   100	   104#
JOB	    28#	    52	    98
NORET	    31#	    52
NWORD	    62#	    69
P	    24#	    47	    52	    56	    84	    92	    94	    98	   100	   101	   162	   165	   166
PAMJOB	    16	    44#
PERGOM	   114	   172#
PERLOG	   104	   170#
RETURN	    55	    85	    95	    98	   106	   165#
RUNIT	    56	   100#
SAVAC	     7%	    47	   165
SOMERR	    75	    81	    97#
THISYS	     7%	    52	    57	    98
TRPTAB	   116	   181#
TRYAGN	   140#	   143	   147	   151	   155
ZAPIT	    84	    87#	    94
JOB007 - JOB 7	MACRO 12.5-46.0 17:51 13-NOV-86
JOB007.MAC	25-MAY-78 08:30		Macro/Opdef cross reference

CREAUX	   105
INTADR	   118
INTASS	   129
INTENB	    88	   133
MAKERR	    34#	    51	    97
SETTIM	   125	   136
SETUWP	    45
TINASS	   122
ZAPCIR	    91
      \~~y